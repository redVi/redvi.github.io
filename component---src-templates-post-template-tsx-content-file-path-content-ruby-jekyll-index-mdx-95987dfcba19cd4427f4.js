"use strict";(self.webpackChunkgatsby_blog=self.webpackChunkgatsby_blog||[]).push([[2588],{8590:function(e,n,t){t.r(n),t.d(n,{Head:function(){return i.Ss},default:function(){return m}});var l=t(8876),a=t(4424);function c(e){const n=Object.assign({p:"p",h2:"h2",a:"a",span:"span",pre:"pre",code:"code",h3:"h3",ul:"ul",li:"li",blockquote:"blockquote"},(0,l.MN)(),e.components);return a.createElement(a.Fragment,null,a.createElement(n.p,null,"Jekyll является одним из многих генераторов статических сайтов. Более всего он\nподойдёт желающим разместить свой блог на GitHub Pages (но и не только).\nСуществуют и другие генераторы статики, написанные на разных языках\nпрограммирования, но в заметке рассматриваться они не будут."),"\n",a.createElement(n.h2,{id:"установка-и-настройка",style:{position:"relative"}},a.createElement(n.a,{href:"#%D1%83%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%BA%D0%B0-%D0%B8-%D0%BD%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B9%D0%BA%D0%B0","aria-label":"установка и настройка permalink",className:"anchor before"},a.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"Установка и настройка"),"\n",a.createElement(n.p,null,"Для установки jekyll нам потребуется ",a.createElement(n.a,{href:"/posts/ruby-rvm/"},"ruby"),". Официальные доки по установке,\nнастройке и наличествующим плагинам размещены\nна ",a.createElement(n.a,{href:"http://jekyllrb.com",target:"_blank",rel:"nofollow"},"jekyllrb.com"),"."),"\n",a.createElement(n.pre,null,a.createElement(n.code,{className:"language-shell"},"$ gem install jekyll\n$ jekyll new myblog && cd myblog\n$ jekyll build && jekyll serve\n")),"\n",a.createElement(n.p,null,"После чего можно смело пройти по адресу ",a.createElement(n.a,{href:"http://localhost:4000",target:"_blank",rel:"nofollow"},"http://localhost:4000")," и насладиться\nвидом своего нового бложека. Имейте ввиду, что стили могут не отобразиться из-за\nдефолтных настроек в ",a.createElement(n.code,null,"_config.yml"),". Мы вернёмся к этому чуть позже."),"\n",a.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<span\n      class="gatsby-resp-image-wrapper"\n      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 927px; flex:2;"\n    >\n      <span\n    class="gatsby-resp-image-background-image"\n    style="padding-bottom: 60%; position: relative; bottom: 0; left: 0; display: block;"\n  ></span>\n  <picture>\n          <source\n              srcset="/static/09afd1209eefa4f46a196bc7477cf512/e93cc/jekyll-default.webp 300w,\n/static/09afd1209eefa4f46a196bc7477cf512/b0544/jekyll-default.webp 600w,\n/static/09afd1209eefa4f46a196bc7477cf512/44de1/jekyll-default.webp 927w"\n              sizes="(max-width: 927px) 100vw, 927px"\n              type="image/webp"\n            />\n          <source\n            srcset="/static/09afd1209eefa4f46a196bc7477cf512/eed55/jekyll-default.png 300w,\n/static/09afd1209eefa4f46a196bc7477cf512/7491f/jekyll-default.png 600w,\n/static/09afd1209eefa4f46a196bc7477cf512/469a2/jekyll-default.png 927w"\n            sizes="(max-width: 927px) 100vw, 927px"\n            type="image/png"\n          />\n          <img\n            class="gatsby-resp-image-image"\n            src="/static/09afd1209eefa4f46a196bc7477cf512/469a2/jekyll-default.png"\n            alt="jekyll default theme"\n            title=""\n            loading="lazy"\n            decoding="async"\n            style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"\n          />\n        </picture>\n    </span>'}}),"\n",a.createElement(n.h3,{id:"структура-каталогов",style:{position:"relative"}},a.createElement(n.a,{href:"#%D1%81%D1%82%D1%80%D1%83%D0%BA%D1%82%D1%83%D1%80%D0%B0-%D0%BA%D0%B0%D1%82%D0%B0%D0%BB%D0%BE%D0%B3%D0%BE%D0%B2","aria-label":"структура каталогов permalink",className:"anchor before"},a.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"структура каталогов"),"\n",a.createElement(n.p,null,"Структура каталогов может меняться в зависимости от версии jekyll, поэтому здесь\nпредставлено то, что можно сделать, а не то, что есть «из коробки».\nЕсли чего-то недостаёт, всегда можно создать необходимые файлы вручную."),"\n",a.createElement(n.pre,null,a.createElement(n.code,null,"myblog\n├── _config.yml (конфигурационный файл)\n├── _drafts (черновики постов)\n|   └── test_post.md\n├── _includes («включаемые» части шаблона)\n|   ├── footer.html\n|   └── header.html\n├── _layouts (шаблоны страниц)\n|   ├── default.html\n|   └── post.html\n├── _posts (готовые к публикации посты)\n|   └── 2016-09-26-my_first_post.md\n├── _site (сгенерированные страницы сайта)\n├── about.md (статическая страница)\n└── index.html (главная страница)\n")),"\n",a.createElement(n.p,null,"Как видно из представленной выше структуры, разобраться с размещением файлов не\nсоставит большого труда, а для разных частей блога можно создавать различные\nшаблоны (если в этом есть необходимость)."),"\n",a.createElement(n.p,null,"Описывать процесс подключения частей шаблона — дело долгое. Если хочется\nразобраться в том, как это работает, предлагаю смотреть реализацию на практических\nпримерах. Взять любую готовую ",a.createElement(n.a,{href:"https://github.com/redVi/voyager",target:"_blank",rel:"nofollow"},"тему jekyll"),"\nи разобраться в ней."),"\n",a.createElement(n.h3,{id:"файл-конфигурации",style:{position:"relative"}},a.createElement(n.a,{href:"#%D1%84%D0%B0%D0%B9%D0%BB-%D0%BA%D0%BE%D0%BD%D1%84%D0%B8%D0%B3%D1%83%D1%80%D0%B0%D1%86%D0%B8%D0%B8","aria-label":"файл конфигурации permalink",className:"anchor before"},a.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"файл конфигурации"),"\n",a.createElement(n.pre,null,a.createElement(n.code,{className:"language-rb"},'# _config.yml\n\n# тайтл, описание блога\ntitle: "Jekyll"\ndescription: "Blog about jekyll and ruby"\n\n# базовый url сайта\n# меняется, если страницы лежат не в корне\n# например, /blog\nbaseurl: ""\n\n# домен сайта\n# для разработки включите localhost, для деплоя укажите свой домен\nurl: "http://localhost:4000"\n\n# Настройки сборки\nmarkdown: kramdown      # используемый генератор markdown\ntimezone: Europe/Moscow # временная зона\ndestination: _site      # директория с собранной статикой\nrelative_permalinks: false # использовать ли относительные пути\n\n# путь к статье в формате /категория/название_статьи\npermalink: /:categories/:title/\n\n# При выводе всех постов на одной странице\n# используем постраничный вывод\npaginate: 6\npaginate_path: \'page:num\'\n\n# не публиковать посты, указанное время которых\n# позднее времени момента публикации\nfuture: false\n')),"\n",a.createElement(n.p,null,"Для просмотра превью ещё не готовых страниц, что хранятся в каталоге ",a.createElement(n.code,null,"_drafts"),",\nследует запускать сервер разработки с флагом ",a.createElement(n.code,null,"--drafts"),"."),"\n",a.createElement(n.p,null,"Касаемо опции ",a.createElement(n.code,null,"future"),": например, вы написали два поста, но не желаете\nпубликовать их одновременно. В таком случае просто выставьте нужные даты\nпубликации и jekyll не станет генерировать второй пост в публичную директорию проекта."),"\n",a.createElement(n.h3,{id:"русификация-дат",style:{position:"relative"}},a.createElement(n.a,{href:"#%D1%80%D1%83%D1%81%D0%B8%D1%84%D0%B8%D0%BA%D0%B0%D1%86%D0%B8%D1%8F-%D0%B4%D0%B0%D1%82","aria-label":"русификация дат permalink",className:"anchor before"},a.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"русификация дат"),"\n",a.createElement(n.p,null,"Для того, чтобы jekyll начал понимать даты на русском языке, достаточно\nпредоставить генератору файл ",a.createElement(n.code,null,"_locales/ru.yml")," со ",a.createElement(n.a,{href:"https://gist.github.com/redVi/7446603",target:"_blank",rel:"nofollow"},"следующим содержанием"),"."),"\n",a.createElement(n.p,null,"В директорию ",a.createElement(n.code,null,"_plugins")," положить файл с фильтром, который будет\nобрабатывать наши данные:"),"\n",a.createElement(n.p,null,a.createElement(n.a,{href:"https://gist.github.com/redVi/9096304",target:"_blank",rel:"nofollow"},"i18n_filter.rb")),"\n",a.createElement(n.p,null,"В шаблоне же выводить локализованную дату:"),"\n",a.createElement(n.pre,null,a.createElement(n.code,{className:"language-handlebars"},'---\nlayout: default\n---\n<h2>{{ page.title }}</h2>\n<%# вот таким макаром %>\n{% raw %}{{ page.date | localize: "%d %B %Y" }}{% endraw %}\n')),"\n",a.createElement(n.p,null,"Если имеется необходимость отображать даты на нескольких языках, сто́ит\nобратиться к плагину ",a.createElement(n.a,{href:"https://github.com/prometheus-ev/jekyll-localization",target:"_blank",rel:"nofollow"},"jekyll-localization")),"\n",a.createElement(n.h3,{id:"шаблонизатор-liquid",style:{position:"relative"}},a.createElement(n.a,{href:"#%D1%88%D0%B0%D0%B1%D0%BB%D0%BE%D0%BD%D0%B8%D0%B7%D0%B0%D1%82%D0%BE%D1%80-liquid","aria-label":"шаблонизатор liquid permalink",className:"anchor before"},a.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"шаблонизатор liquid"),"\n",a.createElement(n.p,null,"Возможно, не самый лучший из имеющихся шаблонизаторов. В частности, не\nпонимает, когда в посте используются элементы, совпадающие со строками его кода,\nи требует их экранирования (jinja2 для движков на python подобным не\nстрадает). Например, если в теле вашего поста имеются вставки кода с шаблонами\nDjango/Jinja (html+django) приходится экранировать их при помощи тега\n",a.createElement(n.code,null,"{% raw %}{% raw %}{% endraw %}"),", дабы не вызвать бурю праведного негодования у liquid:"),"\n",a.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<span\n      class="gatsby-resp-image-wrapper"\n      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 478px; flex:6;"\n    >\n      <span\n    class="gatsby-resp-image-background-image"\n    style="padding-bottom: 15.666666666666668%; position: relative; bottom: 0; left: 0; display: block;"\n  ></span>\n  <picture>\n          <source\n              srcset="/static/a406d646e8d86cdcdeab49533beff02c/e93cc/liquid-escaping.webp 300w,\n/static/a406d646e8d86cdcdeab49533beff02c/ca276/liquid-escaping.webp 478w"\n              sizes="(max-width: 478px) 100vw, 478px"\n              type="image/webp"\n            />\n          <source\n            srcset="/static/a406d646e8d86cdcdeab49533beff02c/eed55/liquid-escaping.png 300w,\n/static/a406d646e8d86cdcdeab49533beff02c/69adc/liquid-escaping.png 478w"\n            sizes="(max-width: 478px) 100vw, 478px"\n            type="image/png"\n          />\n          <img\n            class="gatsby-resp-image-image"\n            src="/static/a406d646e8d86cdcdeab49533beff02c/69adc/liquid-escaping.png"\n            alt="liquid-escaping"\n            title="liquid"\n            loading="lazy"\n            decoding="async"\n            style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"\n          />\n        </picture>\n    </span>'}}),"\n",a.createElement(n.p,null,"Приходится признать, что подобное экранирование достаточно неудобно, если требуется\nприменять его много раз, посему можно сделать красивый ход: изменить вывод самого поста."),"\n",a.createElement(n.pre,null,a.createElement(n.code,{className:"language-handlebars"},"\x3c!-- шаблон страницы поста --\x3e\n{% raw %}{{ page.content | markdownify }}{% endraw %}\n")),"\n",a.createElement(n.p,null,"В этом случае блоки"),"\n",a.createElement(n.pre,null,a.createElement(n.code,null,"{% raw %}{{ foo }}{% endraw %}\n")),"\n",a.createElement(n.p,null,"будут экранироваться (во избежание ошибок следите за тем, чтобы подобные блоки располагались полностью\nна одной строке), что, правда, не избавит от ругани liquid, если описываются\nтеги, которые в него не встроены. Иначе говоря, liquid экранирует лишь свои\nтеги. Возможно, со временем это исправят, но на момент написания поста\nразработчики удовлетворены текущим положением дел и менять ничего не собираются."),"\n",a.createElement(n.h3,{id:"переменные-окружения",style:{position:"relative"}},a.createElement(n.a,{href:"#%D0%BF%D0%B5%D1%80%D0%B5%D0%BC%D0%B5%D0%BD%D0%BD%D1%8B%D0%B5-%D0%BE%D0%BA%D1%80%D1%83%D0%B6%D0%B5%D0%BD%D0%B8%D1%8F","aria-label":"переменные окружения permalink",className:"anchor before"},a.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"переменные окружения"),"\n",a.createElement(n.p,null,"Удобно оперировать пемеменными и настроить два разных файла конфигурации для\nразработки и деплоя. В шаблоне пригодятся конструкции вида"),"\n",a.createElement(n.pre,null,a.createElement(n.code,{className:"language-handlebars"},'{% if site.environment == "production" %}\n  {% include disqus.html %}\n{% endif %}\n')),"\n",a.createElement(n.p,null,"Для разработки шаблон с системой комментирования не подключается, зато он будет\nвключен в сборку. Чтобы без лишних телодвижений настроить такое поведение,\nсоздайте дополнительный файл конфигурации и при сборке используйте его."),"\n",a.createElement(n.p,null,"В файлах для разработки и для публикации используйте соответствующие настройки:"),"\n",a.createElement(n.pre,null,a.createElement(n.code,{className:"language-rb"},"environment: development\nenvironment: production\n")),"\n",a.createElement(n.p,null,"При сборке/разработке укажите нужный конфигурационный файл. Например:\n",a.createElement(n.code,null,"jekyll build --config=_config_prod.yml"),". Также в конфигурационном файле может\nразличаться указанный url: localhost для разработки и реальный домен для деплоя."),"\n",a.createElement(n.p,null,"Если нет желания использовать два разных конфига, осуществляем сборку с явным\nуказанием окружения и меняем шаблон:"),"\n",a.createElement(n.pre,null,a.createElement(n.code,{className:"language-handlebars"},'{% if jekyll.environment == "production" %}\n  {% include disqus.html %}\n{% endif %}\n')),"\n",a.createElement(n.pre,null,a.createElement(n.code,{className:"language-rb"},"JEKYLL_ENV=production jekyll build\n")),"\n",a.createElement(n.h2,{id:"публикация",style:{position:"relative"}},a.createElement(n.a,{href:"#%D0%BF%D1%83%D0%B1%D0%BB%D0%B8%D0%BA%D0%B0%D1%86%D0%B8%D1%8F","aria-label":"публикация permalink",className:"anchor before"},a.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"Публикация"),"\n",a.createElement(n.h3,{id:"блог-на-github",style:{position:"relative"}},a.createElement(n.a,{href:"#%D0%B1%D0%BB%D0%BE%D0%B3-%D0%BD%D0%B0-github","aria-label":"блог на github permalink",className:"anchor before"},a.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"блог на GitHub"),"\n",a.createElement(n.p,null,"При публикации на GitHub следует выкладывать только статические страницы,\nкоторые jekyll любезно сгенерирует для вас. Это может быть\n«умолчательный» каталог ",a.createElement(n.code,null,"_site")," или любой другой, имя которого вы\nопределите в настройках (в нашем примере ",a.createElement(n.code,null,"public"),")."),"\n",a.createElement(n.h3,{id:"настройки-кэширования-переадресация",style:{position:"relative"}},a.createElement(n.a,{href:"#%D0%BD%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B9%D0%BA%D0%B8-%D0%BA%D1%8D%D1%88%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D1%8F-%D0%BF%D0%B5%D1%80%D0%B5%D0%B0%D0%B4%D1%80%D0%B5%D1%81%D0%B0%D1%86%D0%B8%D1%8F","aria-label":"настройки кэширования переадресация permalink",className:"anchor before"},a.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"настройки кэширования, переадресация"),"\n",a.createElement(n.p,null,"Если вы пользуетесь хостингом, отличным от GitHub, и у вас есть возможность\nуправлять настройками кэширования, обязательно настройте его. В подавляющем\nбольшинстве случаев ваш сайт обслуживается Apache, и управлять кэшированием\nможно с помощью файла ",a.createElement(n.code,null,".htaccess"),". Кстати, здесь есть два пути."),"\n",a.createElement(n.p,null,"Самый простой путь заключается в том, чтобы включить используемые типы файлов и\nзадать для них время кэширования (max-age):"),"\n",a.createElement(n.pre,null,a.createElement(n.code,{className:"language-conf"},'# .htaccess\n\n<IfModule mod_headers.c>\n<FilesMatch ".(flv|gif|jpg|jpeg|png|ico|swf|js|css|eot|woff|otf|ttf|svg)$">\n  Header set Cache-Control "max-age=7889231, public"\n</FilesMatch>\n</IfModule>\n')),"\n",a.createElement(n.p,null,"Время кэширования рассчитывается в секундах, поэтому приведённое в примере\nчисло будет обозначать примерно три месяца."),"\n",a.createElement(n.p,null,"Второй путь позволяет задавать более читабельное время и более тонко\nнастраивать кэширование, но он требует включения модуля expires. Выглядит это так:"),"\n",a.createElement(n.pre,null,a.createElement(n.code,{className:"language-conf"},'# .htaccess\n\nExpiresActive on\nExpiresByType image/gif "access plus 6 months"\nExpiresByType image/png "access plus 6 months"\nExpiresByType image/jpeg "access plus 6 months"\nExpiresByType image/x-icon "access plus 9 months"\nExpiresByType application/x-font-woff "access plus 9 months"\nExpiresByType text/css "modification plus 6 months"\nExpiresByType text/javascript "modification plus 6 months"\nExpiresByType text/html "now"\nExpiresByType application/xhtml+xml "now"\n')),"\n",a.createElement(n.p,null,"Здесь для изображений включено кэширование на 6 месяцев с последнего\nвремени доступа к ним, для шрифта 9 месяцев; для файлов css и javascript\n6 месяцев с последнего времени их изменения; html и xml не кэшируются вовсе."),"\n",a.createElement(n.p,null,"Если вы используете собственные домен и хостинг, может понадобится склеить\nнесколько доменов (например, с www и без):"),"\n",a.createElement(n.pre,null,a.createElement(n.code,{className:"language-conf"},"<IfModule mod_rewrite.c>\n  Options +FollowSymLinks\n  RewriteEngine On\n</IfModule>\n\nRewriteCond %{HTTP_HOST} ^domen.org$\nRewriteRule (.*)$ http://www.domen.org/$1 [R=301,L]\n\nErrorDocument 404 http://www.domen.org/404.html\n")),"\n",a.createElement(n.p,null,"Запись с ",a.createElement(n.code,null,"Rewrite")," осуществляет перенаправление с домена без www на домен с www;\nпоследняя строка служит проводником к 404 странице в случае, если файл не\nнайден."),"\n",a.createElement(n.h3,{id:"собственный-домен",style:{position:"relative"}},a.createElement(n.a,{href:"#%D1%81%D0%BE%D0%B1%D1%81%D1%82%D0%B2%D0%B5%D0%BD%D0%BD%D1%8B%D0%B9-%D0%B4%D0%BE%D0%BC%D0%B5%D0%BD","aria-label":"собственный домен permalink",className:"anchor before"},a.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"собственный домен"),"\n",a.createElement(n.p,null,"В случае, если сайт хостится на GitHub Pages, удобнее всего добавить в корень файл\n",a.createElement(n.code,null,"CNAME"),", где указать имя вашего домена. Подробную информацию о настройке можно\nнайти в справке ",a.createElement(n.a,{href:"https://help.github.com/articles/setting-up-a-custom-domain-with-pages",target:"_blank",rel:"nofollow"},"GitHub Help")),"\n",a.createElement(n.p,null,"Представми, что нами был выбран отличный от GitHub хостинг, и для примера создадим\nзаписи типа ",a.createElement(n.code,null,"A"),". Конкретно для OpenShift наши шаги будут следующими:"),"\n",a.createElement(n.ul,null,"\n",a.createElement(n.li,null,"Прописать настройки в панели управления доменом (указаны стандартные IP адреса\nOpenShift):"),"\n"),"\n",a.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<span\n      class="gatsby-resp-image-wrapper"\n      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 725px; flex:3;"\n    >\n      <span\n    class="gatsby-resp-image-background-image"\n    style="padding-bottom: 34.333333333333336%; position: relative; bottom: 0; left: 0; display: block;"\n  ></span>\n  <picture>\n          <source\n              srcset="/static/bb8818f21794c1e0abc2d2a580f5581e/e93cc/domain.webp 300w,\n/static/bb8818f21794c1e0abc2d2a580f5581e/b0544/domain.webp 600w,\n/static/bb8818f21794c1e0abc2d2a580f5581e/8fd7a/domain.webp 725w"\n              sizes="(max-width: 725px) 100vw, 725px"\n              type="image/webp"\n            />\n          <source\n            srcset="/static/bb8818f21794c1e0abc2d2a580f5581e/eed55/domain.png 300w,\n/static/bb8818f21794c1e0abc2d2a580f5581e/7491f/domain.png 600w,\n/static/bb8818f21794c1e0abc2d2a580f5581e/0a779/domain.png 725w"\n            sizes="(max-width: 725px) 100vw, 725px"\n            type="image/png"\n          />\n          <img\n            class="gatsby-resp-image-image"\n            src="/static/bb8818f21794c1e0abc2d2a580f5581e/0a779/domain.png"\n            alt="domain"\n            title="domain"\n            loading="lazy"\n            decoding="async"\n            style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"\n          />\n        </picture>\n    </span>'}}),"\n",a.createElement(n.ul,null,"\n",a.createElement(n.li,null,"Создать псевдонимы в панели управления OpenShift:"),"\n"),"\n",a.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<span\n      class="gatsby-resp-image-wrapper"\n      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 723px; flex:2;"\n    >\n      <span\n    class="gatsby-resp-image-background-image"\n    style="padding-bottom: 55.99999999999999%; position: relative; bottom: 0; left: 0; display: block;"\n  ></span>\n  <picture>\n          <source\n              srcset="/static/0a0fe9301a3c0c45c724e34002195cc1/e93cc/openshift.webp 300w,\n/static/0a0fe9301a3c0c45c724e34002195cc1/b0544/openshift.webp 600w,\n/static/0a0fe9301a3c0c45c724e34002195cc1/e12b6/openshift.webp 723w"\n              sizes="(max-width: 723px) 100vw, 723px"\n              type="image/webp"\n            />\n          <source\n            srcset="/static/0a0fe9301a3c0c45c724e34002195cc1/eed55/openshift.png 300w,\n/static/0a0fe9301a3c0c45c724e34002195cc1/7491f/openshift.png 600w,\n/static/0a0fe9301a3c0c45c724e34002195cc1/70a30/openshift.png 723w"\n            sizes="(max-width: 723px) 100vw, 723px"\n            type="image/png"\n          />\n          <img\n            class="gatsby-resp-image-image"\n            src="/static/0a0fe9301a3c0c45c724e34002195cc1/70a30/openshift.png"\n            alt="OpenShift"\n            title="OpenShift"\n            loading="lazy"\n            decoding="async"\n            style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"\n          />\n        </picture>\n    </span>'}}),"\n",a.createElement(n.p,null,"Впрочем, здесь всё тоже просто."),"\n",a.createElement(n.h3,{id:"карта-сайта-и-rss",style:{position:"relative"}},a.createElement(n.a,{href:"#%D0%BA%D0%B0%D1%80%D1%82%D0%B0-%D1%81%D0%B0%D0%B9%D1%82%D0%B0-%D0%B8-rss","aria-label":"карта сайта и rss permalink",className:"anchor before"},a.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"карта сайта и RSS"),"\n",a.createElement(n.blockquote,null,"\n",a.createElement(n.p,null,"Дабы не утомлять читателя xml-полотнами, используемые файлы вынесены в\nотдельные кусочки кода, которые при желании можно запросто посмотреть и скачать,\nперейдя по ссылкам."),"\n"),"\n",a.createElement(n.p,null,"В корневом каталоге проекта создайте файл ",a.createElement(n.code,null,"sitemap.xml")," со следующим содержанием: ",a.createElement(n.a,{href:"https://gist.github.com/redVi/9096116",target:"_blank",rel:"nofollow"},"sitemap.xml"),"."),"\n",a.createElement(n.p,null,"При генерации статических страниц он будет помещён в директорию, используемую\nвами в качестве публичной."),"\n",a.createElement(n.p,null,"Далее отведём для фидов специальную директорию и файл ",a.createElement(n.code,null,"feeds/atom.xml"),", в\nсодержимом замените ",a.createElement(n.code,null,"site.org")," на свой адрес сайта:"),"\n",a.createElement(n.p,null,a.createElement(n.a,{href:"https://gist.github.com/redVi/9096165",target:"_blank",rel:"nofollow"},"atom.xml")),"\n",a.createElement(n.p,null,"Вот так может выглядеть ",a.createElement(n.code,null,"feeds/rss.xml"),":"),"\n",a.createElement(n.p,null,a.createElement(n.a,{href:"https://gist.github.com/redVi/9096191",target:"_blank",rel:"nofollow"},"rss.xml")),"\n",a.createElement(n.p,null,"Указание ",a.createElement(n.code,null,"limit:3")," позволит получать новым читателям только последние три записи\nблога, а не весь ворох имеющихся записей сразу."),"\n",a.createElement(n.h2,{id:"hot-deploy",style:{position:"relative"}},a.createElement(n.a,{href:"#hot-deploy","aria-label":"hot deploy permalink",className:"anchor before"},a.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"Hot Deploy"),"\n",a.createElement(n.p,null,"Теперь буквально несколько слов о «горячем развёртывании».\nЭто будет интересно тем, кто держит jekyll на openshift."),"\n",a.createElement(n.p,null,"Есть одна небольшая проблема: когда вы даёте команду ",a.createElement(n.code,null,"git push"),", openshift\nостанавливает картридж, загружает файлы и снова запускает его."),"\n",a.createElement(n.pre,null,a.createElement(n.code,null,"remote: Stopping ruby cartridge\nremote: Waiting for stop to finish\nremote: Building Ruby cartridge\nremote: Starting application myapp\nremote: Starting ruby cartridge\n")),"\n",a.createElement(n.p,null,"В это время сервер недоступен и если кто-то захочет зайти на ваш сайт, то получит\nзакономерный ответ: 503 Service Temporarily Unavailable."),"\n",a.createElement(n.p,null,"Чтобы изменить такое поведение, надо внести небольшое дополнение к настройкам openshift.\nПерейдите к директории с маркерами, создайте маркер как в примере:"),"\n",a.createElement(n.pre,null,a.createElement(n.code,{className:"language-shell"},'$ cd applicationName/.openshift/markers\n$ touch hot_deploy\n$ git add hot_deploy\n$ git commit -m "Adding hot deployment marker"\n$ git push\n')),"\n",a.createElement(n.p,null,"После этого вывод при отправке коммита изменится на подобный:"),"\n",a.createElement(n.pre,null,a.createElement(n.code,null,"remote: Not stopping cartridge ruby because hot deploy is enabled\nremote: Building Ruby cartridge\nremote: Starting application myapp\nremote: Not starting cartridge ruby because hot deploy is enabled\n")),"\n",a.createElement(n.p,null,"Теперь можно смело вносить изменения и пушить их на сервер, при этом сайт будет\nдоступен, а изменения отобразятся тогда, когда это будет готово."),"\n",a.createElement(n.p,null,"Чтобы «воротать всё взад» достаточно удалить маркер и закоммитить\nизменение:"),"\n",a.createElement(n.pre,null,a.createElement(n.code,{className:"language-shell"},'$ rm applicationName/.openshift/markers/hot_deploy\n$ git commit -am "Removing hot deployment marker"\n$ git push\n')),"\n",a.createElement(n.h2,{id:"послесловие",style:{position:"relative"}},a.createElement(n.a,{href:"#%D0%BF%D0%BE%D1%81%D0%BB%D0%B5%D1%81%D0%BB%D0%BE%D0%B2%D0%B8%D0%B5","aria-label":"послесловие permalink",className:"anchor before"},a.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"Послесловие"),"\n",a.createElement(n.p,null,"Что ж, нужно как-то подвести итоги. Jekyll — хороший движок, который\nпозволяет не задумываться о приобретении домена, хостинга (или тем более\nхостинга с python/ruby) и может быть размещён на том же GitHub.\nСтатические страницы хороши для блогов, где информация меняется не\nтак стремительно как в интернет-магазинах с большим ассортиментом товаров,\nгде не нужны динамические страницы, генерирующиеся много раз для каждого\nотдельного посетителя."),"\n",a.createElement(n.p,null,"Хотя при желании, как это было уже описано выше, можно подключить свой домен,\nопубликовать сайт на хостинге, да и вообще делать всё, что угодно."),"\n",a.createElement(n.p,null,"Думается, jekyll подойдёт всем тем, кому не по душе негибкость blogspot,\nоткровенная убогость livejournal или медлительность wordpress. Нужно лишь не\nзабывать о том, что jekyll — не готовый дворец, а просто отличный\nфундамент для возведения дворца. Если вам хочется удобства и\nрюшечек «из коробки» вряд ли в его силах предложить вам это."))}var r=function(e){void 0===e&&(e={});const{wrapper:n}=Object.assign({},(0,l.MN)(),e.components);return n?a.createElement(n,e,a.createElement(c,e)):c(e)},i=t(7792),s=t(7619);function o(e){var n,t;let{data:{mdx:l},children:c,pageContext:{prev:r,next:o}}=e;const{h1:m,title:p,description:d,image:h,table_of_contents:u}=l.frontmatter;return(0,a.useEffect)((()=>{(0,s.K)()}),[]),a.createElement(a.Fragment,null,a.createElement(i._W,{h1:m,title:p,description:d,image:null===(n=l.frontmatter.image)||void 0===n?void 0:n.publicURL},a.createElement(i.MV,{post:l.frontmatter,imageData:null==h||null===(t=h.childImageSharp)||void 0===t?void 0:t.gatsbyImageData},u?a.createElement(i.G8,{headings:l.tableOfContents}):null,a.createElement("div",{className:"page__content"},c,a.createElement(i.Mf,{prev:r,next:o})),a.createElement(i.QZ,null))))}function m(e){return a.createElement(o,e,a.createElement(r,e))}},8876:function(e,n,t){t.d(n,{MN:function(){return c}});var l=t(4424);const a=l.createContext({});function c(e){const n=l.useContext(a);return l.useMemo((()=>"function"==typeof e?e(n):{...n,...e}),[n,e])}}}]);