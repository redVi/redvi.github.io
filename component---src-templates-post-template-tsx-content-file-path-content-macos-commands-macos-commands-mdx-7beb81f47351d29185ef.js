"use strict";(self.webpackChunkgatsby_blog=self.webpackChunkgatsby_blog||[]).push([[3988],{5212:function(e,t,l){l.r(t),l.d(t,{Head:function(){return i.Ss},default:function(){return u}});var n=l(8876),a=l(4424);function r(e){const t=Object.assign({p:"p",a:"a",h2:"h2",span:"span",code:"code",pre:"pre",ul:"ul",li:"li",table:"table",thead:"thead",tr:"tr",th:"th",tbody:"tbody",td:"td"},(0,n.MN)(),e.components);return a.createElement(a.Fragment,null,a.createElement(t.p,null,"Несколько полезных фокусов, которые пригодятся любому маководу. Для создания магического\nэффекта настоящие волшебники используют консоль. В отличие от ",a.createElement(t.a,{href:"/posts/linux-command/"},"записи про unix"),"\nздесь приводятся в основном специфичные для MacOS команды. Проверено на Catalina."),"\n",a.createElement(t.h2,{id:"ввод-пароля-по-touch-id",style:{position:"relative"}},a.createElement(t.a,{href:"#%D0%B2%D0%B2%D0%BE%D0%B4-%D0%BF%D0%B0%D1%80%D0%BE%D0%BB%D1%8F-%D0%BF%D0%BE-touch-id","aria-label":"ввод пароля по touch id permalink",className:"anchor before"},a.createElement(t.span,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"Ввод пароля по Touch ID"),"\n",a.createElement(t.p,null,"Если на вашем устройстве есть Touch ID и вы ленивы настолько, что не хотите вводить\nпароль в терминале руками — ваша мечта сбылась. Можно не печатать, а только дотронуться\nдо заветной кнопки."),"\n",a.createElement(t.p,null,"Откройте с правами root'а файл ",a.createElement(t.code,null,"/etc/pam.d/sudo")," и добавьте строку в самое начало:"),"\n",a.createElement(t.pre,null,a.createElement(t.code,{className:"language-bash"},"# /etc/pam.d/sudo\n# sudo: auth account password session\nauth       sufficient     pam_tid.so  # добавить эту строку\nauth       sufficient     pam_smartcard.so\nauth       required       pam_opendirectory.so\n")),"\n",a.createElement(t.h2,{id:"манипулирование-снапшотами",style:{position:"relative"}},a.createElement(t.a,{href:"#%D0%BC%D0%B0%D0%BD%D0%B8%D0%BF%D1%83%D0%BB%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5-%D1%81%D0%BD%D0%B0%D0%BF%D1%88%D0%BE%D1%82%D0%B0%D0%BC%D0%B8","aria-label":"манипулирование снапшотами permalink",className:"anchor before"},a.createElement(t.span,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"Манипулирование снапшотами"),"\n",a.createElement(t.pre,null,a.createElement(t.code,{className:"language-shell"},"$ sudo tmutil disablelocal # отключить\n$ sudo tmutil enablelocal  # включить\n$ sudo tmutil listlocalsnapshots / # просмотреть какие снапшоты есть\n$ tmutil deletelocalsnapshots <snapshot-version> # удалить снапшот по номеру его версии\n")),"\n",a.createElement(t.p,null,"Сам снапшот выглядит так: ",a.createElement(t.code,null,"com.apple.TimeMachine.2020-07-04-151555.local"),". Номер версии в\nэтом примере ",a.createElement(t.code,null,"2020-07-04-151555"),"."),"\n",a.createElement(t.h2,{id:"изменить-формат-скриншота",style:{position:"relative"}},a.createElement(t.a,{href:"#%D0%B8%D0%B7%D0%BC%D0%B5%D0%BD%D0%B8%D1%82%D1%8C-%D1%84%D0%BE%D1%80%D0%BC%D0%B0%D1%82-%D1%81%D0%BA%D1%80%D0%B8%D0%BD%D1%88%D0%BE%D1%82%D0%B0","aria-label":"изменить формат скриншота permalink",className:"anchor before"},a.createElement(t.span,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"Изменить формат скриншота"),"\n",a.createElement(t.p,null,"По-умолчанию скриншоты в формате ",a.createElement(t.code,null,"png"),". Можно задать другой формат:\nJPG, TIFF, GIF, PDF или снова тот же PNG."),"\n",a.createElement(t.p,null,"Делается командой:"),"\n",a.createElement(t.pre,null,a.createElement(t.code,{className:"language-shell"},"$ defaults write com.apple.screencapture type JPG\n")),"\n",a.createElement(t.h2,{id:"изменить-имя-хоста",style:{position:"relative"}},a.createElement(t.a,{href:"#%D0%B8%D0%B7%D0%BC%D0%B5%D0%BD%D0%B8%D1%82%D1%8C-%D0%B8%D0%BC%D1%8F-%D1%85%D0%BE%D1%81%D1%82%D0%B0","aria-label":"изменить имя хоста permalink",className:"anchor before"},a.createElement(t.span,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"Изменить имя хоста"),"\n",a.createElement(t.pre,null,a.createElement(t.code,{className:"language-shell"},"$ sudo scutil --set HostName jack\n")),"\n",a.createElement(t.p,null,"где ",a.createElement(t.code,null,"jack")," - выбранное имя."),"\n",a.createElement(t.h2,{id:"изменить-размер-сетки-launchpad",style:{position:"relative"}},a.createElement(t.a,{href:"#%D0%B8%D0%B7%D0%BC%D0%B5%D0%BD%D0%B8%D1%82%D1%8C-%D1%80%D0%B0%D0%B7%D0%BC%D0%B5%D1%80-%D1%81%D0%B5%D1%82%D0%BA%D0%B8-launchpad","aria-label":"изменить размер сетки launchpad permalink",className:"anchor before"},a.createElement(t.span,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"Изменить размер сетки launchpad"),"\n",a.createElement(t.p,null,"Сетка по-умолчанию 5×7: 5 столбцов, 7 строк. Когда программ много и все их\nхочется видеть на одном экране, размер сетки можно уменьшить."),"\n",a.createElement(t.pre,null,a.createElement(t.code,{className:"language-shell"},"$ defaults write com.apple.dock springboard-rows -int 6\n$ defaults write com.apple.dock springboard-columns -int 7\n$ killall Dock\n")),"\n",a.createElement(t.p,null,"Теперь сетка содержит 7 столбцов и 6 строк."),"\n",a.createElement(t.h2,{id:"управление-разделами-диска",style:{position:"relative"}},a.createElement(t.a,{href:"#%D1%83%D0%BF%D1%80%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5-%D1%80%D0%B0%D0%B7%D0%B4%D0%B5%D0%BB%D0%B0%D0%BC%D0%B8-%D0%B4%D0%B8%D1%81%D0%BA%D0%B0","aria-label":"управление разделами диска permalink",className:"anchor before"},a.createElement(t.span,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"Управление разделами диска"),"\n",a.createElement(t.p,null,"В MacOS для этого служит утилита ",a.createElement(t.code,null,"diskutil"),"."),"\n",a.createElement(t.pre,null,a.createElement(t.code,{className:"language-shell"},"$ diskutil list            # информация о всех разделах\n$ diskutil list disk1      # информация о конкретном разделе\n$ diskutil listFilesystems # какие есть поддерживаемые файловые системы\n")),"\n",a.createElement(t.p,null,"Часто используемые файловые системы:"),"\n",a.createElement(t.ul,null,"\n",a.createElement(t.li,null,"APFS, родная ФС операционной системы"),"\n",a.createElement(t.li,null,"ExFAT, для внешних дисков"),"\n",a.createElement(t.li,null,"FAT32, для флешек"),"\n"),"\n",a.createElement(t.p,null,"Запись образа на диск."),"\n",a.createElement(t.pre,null,a.createElement(t.code,{className:"language-shell"},"$ diskutil unmountDisk /dev/disk2 # размонтировать диск\n$ sudo dd if=image.iso of=/dev/disk2 bs=512 status=progress # записать образ\n$ sudo dd if=/dev/disk1 of=backup-18-oct-2019.img.dd bs=1m # сделать бэкап\n")),"\n",a.createElement(t.p,null,"Форматирование дисков. Как правило, внешних."),"\n",a.createElement(t.p,null,"Схемы:"),"\n",a.createElement(t.table,null,a.createElement(t.thead,null,a.createElement(t.tr,null,a.createElement(t.th,null,"Обозначение"),a.createElement(t.th,{align:"left"},"Описание"))),a.createElement(t.tbody,null,a.createElement(t.tr,null,a.createElement(t.td,null,"GPT"),a.createElement(t.td,{align:"left"},"GUID Partition Table")),a.createElement(t.tr,null,a.createElement(t.td,null,"APM"),a.createElement(t.td,{align:"left"},"Apple Partition Map")),a.createElement(t.tr,null,a.createElement(t.td,null,"MBR"),a.createElement(t.td,{align:"left"},"Master Boot Records")))),"\n",a.createElement(t.p,null,"Допустим, куплен новый внешний диск и надо разбить его на несколько разделов."),"\n",a.createElement(t.pre,null,a.createElement(t.code,{className:"language-shell"},'$ diskutil list /dev/disk2 # смотрим что есть\n$ diskutil info /dev/disk2 # подробная информация\n\n# разбивка: partitionDisk /dev/disk2 <схема> <ФС> <имя> <размер>\n$ diskutil partitionDisk /dev/disk2 GPT ExFAT "SanDisk" 100%\n\n# разбивка на два раздела: то же самое, но выбор ФС, имени и размера для обоих разделов\n$ diskutil partitionDisk /dev/disk2 GPT ExFAT "Work" 250GB ExFAT "Backup" 250GB\n')),"\n",a.createElement(t.h2,{id:"вывод-дат-в-определённом-формате",style:{position:"relative"}},a.createElement(t.a,{href:"#%D0%B2%D1%8B%D0%B2%D0%BE%D0%B4-%D0%B4%D0%B0%D1%82-%D0%B2-%D0%BE%D0%BF%D1%80%D0%B5%D0%B4%D0%B5%D0%BB%D1%91%D0%BD%D0%BD%D0%BE%D0%BC-%D1%84%D0%BE%D1%80%D0%BC%D0%B0%D1%82%D0%B5","aria-label":"вывод дат в определённом формате permalink",className:"anchor before"},a.createElement(t.span,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"Вывод дат в определённом формате"),"\n",a.createElement(t.p,null,"Кому как, а мне бывает нужно."),"\n",a.createElement(t.pre,null,a.createElement(t.code,{className:"language-shell"},"$ date '+%m-%d-%Y'\n")),"\n",a.createElement(t.p,null,"Таблица с примерами форматирования."),"\n",a.createElement(t.table,null,a.createElement(t.thead,null,a.createElement(t.tr,null,a.createElement(t.th,null,"Символ"),a.createElement(t.th,{align:"left"},"Описание"))),a.createElement(t.tbody,null,a.createElement(t.tr,null,a.createElement(t.td,null,"%a"),a.createElement(t.td,{align:"left"},"Дата, короткая. Sun")),a.createElement(t.tr,null,a.createElement(t.td,null,"%A"),a.createElement(t.td,{align:"left"},"Дата, полностью. Sunday")),a.createElement(t.tr,null,a.createElement(t.td,null,"%b"),a.createElement(t.td,{align:"left"},"Месяц, короткий. Feb")),a.createElement(t.tr,null,a.createElement(t.td,null,"%B"),a.createElement(t.td,{align:"left"},"Месяц, полностью. February")),a.createElement(t.tr,null,a.createElement(t.td,null,"%m"),a.createElement(t.td,{align:"left"},"Номер месяца (01..12)")),a.createElement(t.tr,null,a.createElement(t.td,null,"%M"),a.createElement(t.td,{align:"left"},"Минуты (00..59)")),a.createElement(t.tr,null,a.createElement(t.td,null,"%d"),a.createElement(t.td,{align:"left"},"День месяца")),a.createElement(t.tr,null,a.createElement(t.td,null,"%D"),a.createElement(t.td,{align:"left"},"Дата в формате %m/%d/%y")),a.createElement(t.tr,null,a.createElement(t.td,null,"%H"),a.createElement(t.td,{align:"left"},"Час в 24-часовом формате (00..23)")),a.createElement(t.tr,null,a.createElement(t.td,null,"%I"),a.createElement(t.td,{align:"left"},"Час в 12-часовом формате (01..12)")),a.createElement(t.tr,null,a.createElement(t.td,null,"%S"),a.createElement(t.td,{align:"left"},"Секунды")),a.createElement(t.tr,null,a.createElement(t.td,null,"%u"),a.createElement(t.td,{align:"left"},"Номер дня недели")),a.createElement(t.tr,null,a.createElement(t.td,null,"%Y"),a.createElement(t.td,{align:"left"},"Год")),a.createElement(t.tr,null,a.createElement(t.td,null,"%z или %Z"),a.createElement(t.td,{align:"left"},"Номер временной зоны (например, -0400)")))),"\n",a.createElement(t.h2,{id:"homebrew",style:{position:"relative"}},a.createElement(t.a,{href:"#homebrew","aria-label":"homebrew permalink",className:"anchor before"},a.createElement(t.span,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"Homebrew"),"\n",a.createElement(t.p,null,a.createElement(t.a,{href:"https://brew.sh/index_ru",target:"_blank",rel:"nofollow"},"Пакетный менеджер")," для MacOS. Увы, изначально в системе такой штуки нет."),"\n",a.createElement(t.p,null,"Основные команды."),"\n",a.createElement(t.pre,null,a.createElement(t.code,{className:"language-bash"},"$ brew search vim # поиск пакета по имени\n==> Formulae\navimetaedit  macvim  neovim  vim\n==> Casks\nmacvim\n")),"\n",a.createElement(t.p,null,"Если пакет указан в ",a.createElement(t.code,null,"Casks"),", значит у него есть графический интерфейс. Тогда установить\nего надо через ",a.createElement(t.code,null,"brew cask"),"."),"\n",a.createElement(t.pre,null,a.createElement(t.code,{className:"language-bash"},"# ставим и удаляем vim\n$ brew install vim\n$ brew uninstall vim\n\n# список установленных пакетов\n$ brew list\n\n# rmtree - программа, которая удаляет пакеты вместе с их зависимостями\n# ставить по желанию\n$ brew info beeftornado/rmtree\n$ brew tap beeftornado/rmtree\n$ brew rmtree <package>\n\n# почистить хвосты после удаления пакета\n$ clean /usr/local/Cellar # для Cask\n$ brew cleanup -s\n\n# установка актуальных gnu-утилит\n$ brew install coreutils findutils gnu-tar gnu-sed gawk gnutls gnu-indent gnu-getopt\n\n# установка yarn, которая не тащит за собой собственную версию node\n$ brew install yarn --ignore-dependencies\n\n$ brew update  # обновление формул и пакетов\n$ brew upgrade # обновление версии brew\n$ brew doctor  # рекомендуется после update, удаляет/перемещает симлинки и делает прочие добрые вещи\n")),"\n",a.createElement(t.p,null,"Управление сервисами, такими как nginx или mongo."),"\n",a.createElement(t.pre,null,a.createElement(t.code,{className:"language-shell"},"$ brew services list         # список имеющихся сервисов\n$ brew service start nginx   # запуск\n$ brew service restart nginx # перезапуск\n$ brew service stop nginx    # остановка\n")),"\n",a.createElement(t.p,null,"Может быть, этот список будет пополняться. Но пока всё."))}var c=function(e){void 0===e&&(e={});const{wrapper:t}=Object.assign({},(0,n.MN)(),e.components);return t?a.createElement(t,e,a.createElement(r,e)):r(e)},i=l(7792),s=l(7619);function m(e){var t,l;let{data:{mdx:n},children:r,pageContext:{prev:c,next:m}}=e;const{h1:u,title:d,description:o,image:h,table_of_contents:E}=n.frontmatter;return(0,a.useEffect)((()=>{(0,s.K)()}),[]),a.createElement(a.Fragment,null,a.createElement(i._W,{h1:u,title:d,description:o,image:null===(t=n.frontmatter.image)||void 0===t?void 0:t.publicURL},a.createElement(i.MV,{post:n.frontmatter,imageData:null==h||null===(l=h.childImageSharp)||void 0===l?void 0:l.gatsbyImageData},E?a.createElement(i.G8,{headings:n.tableOfContents}):null,a.createElement("div",{className:"page__content"},r,a.createElement(i.Mf,{prev:c,next:m})),a.createElement(i.QZ,null))))}function u(e){return a.createElement(m,e,a.createElement(c,e))}},8876:function(e,t,l){l.d(t,{MN:function(){return r}});var n=l(4424);const a=n.createContext({});function r(e){const t=n.useContext(a);return n.useMemo((()=>"function"==typeof e?e(t):{...t,...e}),[t,e])}}}]);