"use strict";(self.webpackChunkgatsby_blog=self.webpackChunkgatsby_blog||[]).push([[7412],{4808:function(e,t,l){l.r(t),l.d(t,{Head:function(){return c.Ss},default:function(){return E}});var n=l(8876),r=l(4424);function a(e){const t=Object.assign({p:"p",strong:"strong",code:"code",h2:"h2",a:"a",span:"span",pre:"pre",table:"table",thead:"thead",tr:"tr",th:"th",tbody:"tbody",td:"td"},(0,n.MN)(),e.components);return r.createElement(r.Fragment,null,r.createElement(t.p,null,"RVM — Ruby Version Manager (менеджер управления пакетами в ruby)\nсослужит хорошую службу в тех частых ситуациях, когда вам может потребоваться\nзапуск нескольких версий ruby на одной машине или же нескольких проектов с разными\nнаборами gem'ов для них. Чем-то напоминает virtualenv, если сравнивать с аналогичным приложением для python."),"\n",r.createElement(t.p,null,"Данный пост предположительно рассчитан на новоиспечённых рубистов и предназначен\nдля облегчения и в какой-то мере даже автоматизации их труда."),"\n",r.createElement(t.p,null,r.createElement(t.strong,null,"Что такое gem?")),"\n",r.createElement(t.p,null,"Gem (драгоценный камень, жемчужина) — пакет ruby, предоставляющий\nкакую-то функциональность. Например, библиотека ",r.createElement(t.code,null,"redcarpet"),", доступная в\nвиде gem'а, обеспечивает поддержку markdown."),"\n",r.createElement(t.p,null,r.createElement(t.strong,null,"Что такое gemset?")),"\n",r.createElement(t.p,null,"Gemset (set: набор, комплект) — набор gem'ов."),"\n",r.createElement(t.h2,{id:"установка-rvm",style:{position:"relative"}},r.createElement(t.a,{href:"#%D1%83%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%BA%D0%B0-rvm","aria-label":"установка rvm permalink",className:"anchor before"},r.createElement(t.span,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"Установка RVM"),"\n",r.createElement(t.pre,null,r.createElement(t.code,{className:"language-shell"},"$ \\curl -L https://get.rvm.io | bash\nDownloading RVM branch master\n% Total    % Received % Xferd  Average Speed\n                              Dload  Upload\n100   124  100   124    0     0    107\n100 1084k  100 1084k    0     0   234k\n* To start using RVM you need to run\n`source /home/user/.rvm/scripts/rvm`\n")),"\n",r.createElement(t.p,null,"Перезапускаем консоль и убеждаемся в том, что ",r.createElement(t.code,null,"rvm")," был успешно установлен:"),"\n",r.createElement(t.pre,null,r.createElement(t.code,{className:"language-shell"},"$ rvm -v\nrvm 1.23.13\n\n$ rvm get stable --auto-dotfiles\n")),"\n",r.createElement(t.p,null,"Дополним переменную PATH, дабы указать путь к директории rvm. Запись нужно\nсделать в ",r.createElement(t.code,null,".bashrc")," или ",r.createElement(t.code,null,".zshenv"),"."),"\n",r.createElement(t.pre,null,r.createElement(t.code,{className:"language-bash"},'# .bashrc\nexport PATH="$PATH:$HOME/.rvm/bin"\n')),"\n",r.createElement(t.p,null,"Дальше любопытно было бы просмотреть список доступных для установки и уже установленных пакетов ruby."),"\n",r.createElement(t.pre,null,r.createElement(t.code,{className:"language-shell"},"$ rvm list known # просмотреть все доступные для установки версии Ruby\n$ rvm list       # все установленные версии Ruby\n=* ruby-1.9.3-p448 [ x86_64 ]\n# => - current - текущая версия\n# =* - current && default - текущая и спользуется по-умолчанию\n#  * - default - используемая по-умолчанию версия\n")),"\n",r.createElement(t.h2,{id:"использование-разных-версий-ruby-и-gemsetы",style:{position:"relative"}},r.createElement(t.a,{href:"#%D0%B8%D1%81%D0%BF%D0%BE%D0%BB%D1%8C%D0%B7%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5-%D1%80%D0%B0%D0%B7%D0%BD%D1%8B%D1%85-%D0%B2%D0%B5%D1%80%D1%81%D0%B8%D0%B9-ruby-%D0%B8-gemset%D1%8B","aria-label":"использование разных версий ruby и gemsetы permalink",className:"anchor before"},r.createElement(t.span,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"Использование разных версий ruby и gemset'ы"),"\n",r.createElement(t.pre,null,r.createElement(t.code,{className:"language-shell"},"$ source ~/.rvm/scripts/rvm # активировать rvm\n$ rvm install 1.9.3 # установить несколько версий ruby\n$ rvm install 2.0.0\n$ rvm use ruby-2.0.0-p247 --default # переключиться на ruby 2 и использовать v2 по-умолчанию\n$ rvm list\n   ruby-1.9.3-p448 [ x86_64 ]\n=* ruby-2.0.0-p247 [ x86_64 ]\n\n# => - current\n# =* - current && default\n#  * - default\n")),"\n",r.createElement(t.p,null,"Для примера создадим gemset ",r.createElement(t.code,null,"jekyll"),", где будут собраны все нужные одноимённому генератору статических страниц gem'ы."),"\n",r.createElement(t.pre,null,r.createElement(t.code,{className:"language-shell"},"$ source ~/.rvm/scripts/rvm # «включаем» rvm\n$ rvm use 1.9.3@jekyll --create # создать gemset\n$ rvm use 1.9.3@jekyll --default # выбирать его по-умолчанию\n$ gem install jekyll jekyll-tagging i18n # установка gem'ов\n$ gem list # просмотр установленных в выбранном gemset'е gem'ов\ni18n (0.6.5)\njekyll (1.2.1)\njekyll-tagging (0.5.0)\nliquid (2.5.3)\nmaruku (0.7.0)\n")),"\n",r.createElement(t.p,null,"Gemset'ы создаются для определённой версии ruby. Так, при переключении с одной версии на другую вы будете всегда видеть разный набор gemset'ов: отображаются они также лишь для своей версии."),"\n",r.createElement(t.pre,null,r.createElement(t.code,{className:"language-shell"},"$ rvm gemset list # набор gemset'ов для ruby2\n\ngemsets for ruby-2.0.0-p247\n   (default)\n=> example\n   global\n\n$ cd workspace/jekyll # переход в директорию проекта, где используется ruby1.9\n$ rvm gemset list     # набор gemset'ов для ruby1.9\n\ngemsets for ruby-1.9.3-p448\n   (default)\n   global\n=> jekyll\n")),"\n",r.createElement(t.p,null,"Но здесь мы забежали чуть вперёд. Дело в том, что при переходе в директорию проекта, автоматически меняется версия ruby и набор gemset'ов, о чём речь пойдёт чуть ниже."),"\n",r.createElement(t.p,null,"Gemset'ы можно удалять(delete), очищать(), экспортировать(export) и импортировать(import) gem'ы из одного в gemset'a в другой. Наиболее часто используемые действия отражены в данной ниже таблице."),"\n",r.createElement(t.table,null,r.createElement(t.thead,null,r.createElement(t.tr,null,r.createElement(t.th,null,"команда"),r.createElement(t.th,null,"описание"))),r.createElement(t.tbody,null,r.createElement(t.tr,null,r.createElement(t.td,null,"rvm gemset create"),r.createElement(t.td,null,"создать новый gemset")),r.createElement(t.tr,null,r.createElement(t.td,null,"rvm gemset export new.gems"),r.createElement(t.td,null,"экспорт списка gem'ов в файл new.gems")),r.createElement(t.tr,null,r.createElement(t.td,null,"rvm gemset import new.gems"),r.createElement(t.td,null,"импорт в текущий gemset списка gem'ов из файла new.gems")),r.createElement(t.tr,null,r.createElement(t.td,null,"rvm gemset delete"),r.createElement(t.td,null,"удалить gemset")),r.createElement(t.tr,null,r.createElement(t.td,null,"rvm gemset empty"),r.createElement(t.td,null,"очистить gemset")),r.createElement(t.tr,null,r.createElement(t.td,null,"rvm gemset delete example --force"),r.createElement(t.td,null,"полностью удалить gemset example")),r.createElement(t.tr,null,r.createElement(t.td,null,"rvmreset"),r.createElement(t.td,null,"перезагрузка RVM")),r.createElement(t.tr,null,r.createElement(t.td,null,"rvm uninstall"),r.createElement(t.td,null,"удалить версию Ruby, оставить исходники")),r.createElement(t.tr,null,r.createElement(t.td,null,"rvm implode"),r.createElement(t.td,null,"полностью удалить RVM!")),r.createElement(t.tr,null,r.createElement(t.td,null,"rvm list known"),r.createElement(t.td,null,"получить список всех версий ruby доступных для установки")),r.createElement(t.tr,null,r.createElement(t.td,null,"rvm list"),r.createElement(t.td,null,"отобразить список установленных версий ruby")),r.createElement(t.tr,null,r.createElement(t.td,null,"rvm gemset list"),r.createElement(t.td,null,"просмотреть список gemset'ов в выбранной версии ruby")),r.createElement(t.tr,null,r.createElement(t.td,null,"rvm install 1.9.3"),r.createElement(t.td,null,"установить ruby версии 1.9.3")),r.createElement(t.tr,null,r.createElement(t.td,null,"rvm remove 1.9.3"),r.createElement(t.td,null,"удалить ruby версии 1.9.3")),r.createElement(t.tr,null,r.createElement(t.td,null,"rvm use 1.9.3"),r.createElement(t.td,null,"переключиться на ruby версии 1.9.3")),r.createElement(t.tr,null,r.createElement(t.td,null,"rvm use 1.9.3@jekyll --default"),r.createElement(t.td,null,"использовать версию ruby 1.9.3 c gemset jekyll по умолчанию")),r.createElement(t.tr,null,r.createElement(t.td,null,"rvm use system"),r.createElement(t.td,null,"использовать системную версию ruby")))),"\n",r.createElement(t.h2,{id:"создание-отдельного-окружения-для-проекта",style:{position:"relative"}},r.createElement(t.a,{href:"#%D1%81%D0%BE%D0%B7%D0%B4%D0%B0%D0%BD%D0%B8%D0%B5-%D0%BE%D1%82%D0%B4%D0%B5%D0%BB%D1%8C%D0%BD%D0%BE%D0%B3%D0%BE-%D0%BE%D0%BA%D1%80%D1%83%D0%B6%D0%B5%D0%BD%D0%B8%D1%8F-%D0%B4%D0%BB%D1%8F-%D0%BF%D1%80%D0%BE%D0%B5%D0%BA%D1%82%D0%B0","aria-label":"создание отдельного окружения для проекта permalink",className:"anchor before"},r.createElement(t.span,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"Создание отдельного окружения для проекта"),"\n",r.createElement(t.p,null,"Бывают случаи, когда необходимо не просто использовать разные версии ruby, но и разные версии gemset'ов для разных проектов. В этом посильную помощь может оказать создание своего окружения для каждого из проектов."),"\n",r.createElement(t.p,null,"В примере выше мы создали gemset ",r.createElement(t.code,null,"jekyll"),", который использует версию ruby 1.9.3 и собственный набор gem'ов. Теперь у нас имеется два пути для работы с ним."),"\n",r.createElement(t.p,null,r.createElement(t.strong,null,"Переключение между gemset'ами")),"\n",r.createElement(t.p,null,"Во-первых, можно переключаться между gemsets при необходимости."),"\n",r.createElement(t.pre,null,r.createElement(t.code,{className:"language-shell"},"$ rvm gemset use global\n$ rvm gemset use jekyll\n")),"\n",r.createElement(t.p,null,r.createElement(t.strong,null,"Окружение?")),"\n",r.createElement(t.p,null,"Но зачастую быстрее один раз внести необходимые настройки. Для этого следует создать два файла в каталоге с проектом: ",r.createElement(t.code,null,".ruby-gemset")," и ",r.createElement(t.code,null,".ruby-version"),", куда и поместить информацию об используемом в проекте gemset'е и версии ruby соответственно."),"\n",r.createElement(t.pre,null,r.createElement(t.code,{className:"language-shell"},"$ cat ~/workspace/jekyll/.ruby-gemset\njekyll\n\n$ cat ~/workspace/jekyll/.ruby-version\nruby-1.9.3-p448\n")),"\n",r.createElement(t.p,null,"Теперь достаточно просто зайти в директорию проекта, и нужные нам параметры будут установлены автоматически."),"\n",r.createElement(t.pre,null,r.createElement(t.code,{className:"language-shell"},"$ cd workspace/jekyll\n$ rvm list\n\n=> ruby-1.9.3-p448 [ x86_64 ]\n * ruby-2.0.0-p247 [ x86_64 ]\n\n# => - current\n# =* - current && default\n#  * - default\n")),"\n",r.createElement(t.p,null,"То есть, если вы использовали версию ruby 2, после перехода в каталог с проектом, она автоматически изменится на версию, указанную в ",r.createElement(t.code,null,".ruby-version"),", что достаточно удобно."))}var m=function(e){void 0===e&&(e={});const{wrapper:t}=Object.assign({},(0,n.MN)(),e.components);return t?r.createElement(t,e,r.createElement(a,e)):a(e)},c=l(7792),u=l(7619);function s(e){var t,l;let{data:{mdx:n},children:a,pageContext:{prev:m,next:s}}=e;const{h1:E,title:o,description:d,image:g,table_of_contents:i}=n.frontmatter;return(0,r.useEffect)((()=>{(0,u.K)()}),[]),r.createElement(r.Fragment,null,r.createElement(c._W,{h1:E,title:o,description:d,image:null===(t=n.frontmatter.image)||void 0===t?void 0:t.publicURL},r.createElement(c.MV,{post:n.frontmatter,imageData:null==g||null===(l=g.childImageSharp)||void 0===l?void 0:l.gatsbyImageData},i?r.createElement(c.G8,{headings:n.tableOfContents}):null,r.createElement("div",{className:"page__content"},a,r.createElement(c.Mf,{prev:m,next:s})),r.createElement(c.QZ,null))))}function E(e){return r.createElement(s,e,r.createElement(m,e))}},8876:function(e,t,l){l.d(t,{MN:function(){return a}});var n=l(4424);const r=n.createContext({});function a(e){const t=n.useContext(r);return n.useMemo((()=>"function"==typeof e?e(t):{...t,...e}),[t,e])}}}]);