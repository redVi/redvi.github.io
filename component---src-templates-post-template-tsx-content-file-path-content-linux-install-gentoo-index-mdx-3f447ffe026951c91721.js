"use strict";(self.webpackChunkgatsby_blog=self.webpackChunkgatsby_blog||[]).push([[3276],{7444:function(e,n,t){t.r(n),t.d(n,{Head:function(){return s.Ss},default:function(){return m}});var l=t(8876),a=t(4424);function c(e){const n=Object.assign({p:"p",a:"a",h2:"h2",span:"span",pre:"pre",code:"code",ul:"ul",li:"li",h3:"h3",strong:"strong"},(0,l.MN)(),e.components);return a.createElement(a.Fragment,null,a.createElement(n.p,null,'Сегодня будем развенчивать миф о сложности установки Gentoo. Почему установка "по-русски"?\nПотому что настраивать станем русскую локаль, раскладку и временную зону. Статья получилась\nдовольно объёмной, для тех, кто не знает, как скоротать долгий вечер).'),"\n",a.createElement(n.p,null,"Предлагается вооружиться знаниями об архитектуре своего процессора, перейти на\nстраницу ",a.createElement(n.a,{href:"https://get.gentoo.org/",target:"_blank",rel:"nofollow"},"get gentoo"),", выбрать эту самую\nархитектуру и после стольких утомительных мышкодвижений скачать и записать на диск\n(или usb-flash) нужный образ:"),"\n",a.createElement(n.p,null,"stages → current iso → install-$ARCH-minimal-*.iso."),"\n",a.createElement(n.h2,{id:"загрузитесь-с-сd-диска",style:{position:"relative"}},a.createElement(n.a,{href:"#%D0%B7%D0%B0%D0%B3%D1%80%D1%83%D0%B7%D0%B8%D1%82%D0%B5%D1%81%D1%8C-%D1%81-%D1%81d-%D0%B4%D0%B8%D1%81%D0%BA%D0%B0","aria-label":"загрузитесь с сd диска permalink",className:"anchor before"},a.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"Загрузитесь с СD-диска."),"\n",a.createElement(n.p,null,"Грузимся с параметрами по умолчанию."),"\n",a.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<span\n      class="gatsby-resp-image-wrapper"\n      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 445px; flex:2;"\n    >\n      <span\n    class="gatsby-resp-image-background-image"\n    style="padding-bottom: 64.33333333333333%; position: relative; bottom: 0; left: 0; display: block;"\n  ></span>\n  <picture>\n          <source\n              srcset="/static/8336c4ae72b8b0248d7f2dc4f492d802/e93cc/gentoo_boot.webp 300w,\n/static/8336c4ae72b8b0248d7f2dc4f492d802/4772b/gentoo_boot.webp 445w"\n              sizes="(max-width: 445px) 100vw, 445px"\n              type="image/webp"\n            />\n          <source\n            srcset="/static/8336c4ae72b8b0248d7f2dc4f492d802/eed55/gentoo_boot.png 300w,\n/static/8336c4ae72b8b0248d7f2dc4f492d802/d3ae0/gentoo_boot.png 445w"\n            sizes="(max-width: 445px) 100vw, 445px"\n            type="image/png"\n          />\n          <img\n            class="gatsby-resp-image-image"\n            src="/static/8336c4ae72b8b0248d7f2dc4f492d802/d3ae0/gentoo_boot.png"\n            alt="gettoo boot"\n            title=""\n            loading="lazy"\n            decoding="async"\n            style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"\n          />\n        </picture>\n    </span>'}}),"\n",a.createElement(n.h2,{id:"настройка-интернет-соединения",style:{position:"relative"}},a.createElement(n.a,{href:"#%D0%BD%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B9%D0%BA%D0%B0-%D0%B8%D0%BD%D1%82%D0%B5%D1%80%D0%BD%D0%B5%D1%82-%D1%81%D0%BE%D0%B5%D0%B4%D0%B8%D0%BD%D0%B5%D0%BD%D0%B8%D1%8F","aria-label":"настройка интернет соединения permalink",className:"anchor before"},a.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"Настройка интернет-соединения:"),"\n",a.createElement(n.p,null,"автор использует модемное соединение, данные передаются автоматически при помощи DHCP."),"\n",a.createElement(n.pre,null,a.createElement(n.code,{className:"language-shell"},"# /sbin/ifconfig\n")),"\n",a.createElement(n.p,null,"если кроме интерфейса lo больше ничего нет, значит делаем следующее:"),"\n",a.createElement(n.pre,null,a.createElement(n.code,{className:"language-shell"},"# dhcpcd eth0 (где ваш сетевой интерфейс - eth0)\n")),"\n",a.createElement(n.p,null,"после чего повторяем команду ",a.createElement(n.code,null,"/sbin/ifconfig")),"\n",a.createElement(n.p,null,"теперь у нас появились данные интерфейса ",a.createElement(n.code,null,"eth0"),"."),"\n",a.createElement(n.p,null,"Для настройки adsl-соединения:"),"\n",a.createElement(n.pre,null,a.createElement(n.code,{className:"language-shell"},"# pppoe-setup\n# net-setup eth0 (для обычных или беспроводных сетей)\n# ping ya.ru - пингуем яндекс\n")),"\n",a.createElement(n.p,null,"чтобы прервать пинги:"),"\n",a.createElement(n.p,null,a.createElement(n.code,null,"Ctrl+C")),"\n",a.createElement(n.p,null,"Также для настройки обычного или беспроводного соединения можно использовать\nкоманду ",a.createElement(n.code,null,"net-setup eth0"),", где ",a.createElement(n.code,null,"eth0")," — имя сетевого интерфейса.\nИнтернет настроили, идём дальше"),"\n",a.createElement(n.h2,{id:"создание-разделов-диска",style:{position:"relative"}},a.createElement(n.a,{href:"#%D1%81%D0%BE%D0%B7%D0%B4%D0%B0%D0%BD%D0%B8%D0%B5-%D1%80%D0%B0%D0%B7%D0%B4%D0%B5%D0%BB%D0%BE%D0%B2-%D0%B4%D0%B8%D1%81%D0%BA%D0%B0","aria-label":"создание разделов диска permalink",className:"anchor before"},a.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"Создание разделов диска"),"\n",a.createElement(n.p,null,"Для этого воспользуемся ",a.createElement(n.code,null,"cfdisk"),":"),"\n",a.createElement(n.p,null,"перед тем,как создавать разделы,сядьте и подумайте какие,какого размера и с какой файловой системой."),"\n",a.createElement(n.ul,null,"\n",a.createElement(n.li,null,a.createElement(n.code,null,"/")," - корневой каталог"),"\n",a.createElement(n.li,null,a.createElement(n.code,null,"/home")," - директории пользователей"),"\n",a.createElement(n.li,null,a.createElement(n.code,null,"/boot")," - загрузочные файлы"),"\n",a.createElement(n.li,null,a.createElement(n.code,null,"/usr")," - пользовательские приложения."),"\n",a.createElement(n.li,null,a.createElement(n.code,null,"/var")," - изменяемые приложения, лучше не жадничать хотя бы потому,что там будут компилироваться наши пакеты"),"\n",a.createElement(n.li,null,a.createElement(n.code,null,"/opt")," - большой размер нужен для игрового сервера"),"\n"),"\n",a.createElement(n.p,null,"Лучше записать то, что вы себе насочиняли. Для домашнего использования можно\nобойтись стандартными каталогами ",a.createElement(n.code,null,"/boot"),", ",a.createElement(n.code,null,"/")," , ",a.createElement(n.code,null,"swap"),"."),"\n",a.createElement(n.h3,{id:"непосредственно-создание-разделов",style:{position:"relative"}},a.createElement(n.a,{href:"#%D0%BD%D0%B5%D0%BF%D0%BE%D1%81%D1%80%D0%B5%D0%B4%D1%81%D1%82%D0%B2%D0%B5%D0%BD%D0%BD%D0%BE-%D1%81%D0%BE%D0%B7%D0%B4%D0%B0%D0%BD%D0%B8%D0%B5-%D1%80%D0%B0%D0%B7%D0%B4%D0%B5%D0%BB%D0%BE%D0%B2","aria-label":"непосредственно создание разделов permalink",className:"anchor before"},a.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"Непосредственно создание разделов:"),"\n",a.createElement(n.pre,null,a.createElement(n.code,{className:"language-shell"},"# cfdisk /dev/sda\n")),"\n",a.createElement(n.p,null,"где ",a.createElement(n.code,null,"sda")," - SCSI-диск; ",a.createElement(n.code,null,"hda")," - IDE-диск. Выбирайте что нужно вам."),"\n",a.createElement(n.ul,null,"\n",a.createElement(n.li,null,a.createElement(n.code,null,"news")," - создание нового раздела"),"\n",a.createElement(n.li,null,a.createElement(n.code,null,"type")," - выбор типа файловой системы (83 - Linux, 82 - ",a.createElement(n.code,null,"swap"),")"),"\n",a.createElement(n.li,null,a.createElement(n.code,null,"bootable")," - отметить как загрузочный (укажите для раздела,в который хотите смонтировать ",a.createElement(n.code,null,"/boot"),"!)"),"\n",a.createElement(n.li,null,a.createElement(n.code,null,"write")," - записать изменения"),"\n",a.createElement(n.li,null,a.createElement(n.code,null,"delete")," - удалить"),"\n",a.createElement(n.li,null,a.createElement(n.code,null,"quit")," - выйти"),"\n"),"\n",a.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<span\n      class="gatsby-resp-image-wrapper"\n      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 837px; flex:1;"\n    >\n      <span\n    class="gatsby-resp-image-background-image"\n    style="padding-bottom: 87.66666666666667%; position: relative; bottom: 0; left: 0; display: block;"\n  ></span>\n  <picture>\n          <source\n              srcset="/static/e7fe9a910b84416776d5c00a4218451e/e93cc/gentoo_cfdisk.webp 300w,\n/static/e7fe9a910b84416776d5c00a4218451e/b0544/gentoo_cfdisk.webp 600w,\n/static/e7fe9a910b84416776d5c00a4218451e/1e9da/gentoo_cfdisk.webp 837w"\n              sizes="(max-width: 837px) 100vw, 837px"\n              type="image/webp"\n            />\n          <source\n            srcset="/static/e7fe9a910b84416776d5c00a4218451e/eed55/gentoo_cfdisk.png 300w,\n/static/e7fe9a910b84416776d5c00a4218451e/7491f/gentoo_cfdisk.png 600w,\n/static/e7fe9a910b84416776d5c00a4218451e/084a5/gentoo_cfdisk.png 837w"\n            sizes="(max-width: 837px) 100vw, 837px"\n            type="image/png"\n          />\n          <img\n            class="gatsby-resp-image-image"\n            src="/static/e7fe9a910b84416776d5c00a4218451e/084a5/gentoo_cfdisk.png"\n            alt="cfdisk"\n            title=""\n            loading="lazy"\n            decoding="async"\n            style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"\n          />\n        </picture>\n    </span>'}}),"\n",a.createElement(n.h3,{id:"назначение-файловой-системы",style:{position:"relative"}},a.createElement(n.a,{href:"#%D0%BD%D0%B0%D0%B7%D0%BD%D0%B0%D1%87%D0%B5%D0%BD%D0%B8%D0%B5-%D1%84%D0%B0%D0%B9%D0%BB%D0%BE%D0%B2%D0%BE%D0%B9-%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D1%8B","aria-label":"назначение файловой системы permalink",className:"anchor before"},a.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"Назначение файловой системы:"),"\n",a.createElement(n.pre,null,a.createElement(n.code,{className:"language-shell"},"# mke2fs /dev/sda1 - создание `ext2` на разделе `/dev/sda1`\n# mke2fs -j /dev/sda3 - создание `ext3` на разделе `/dev/sda3`\n# mkswap /dev/sda2 - создание раздела подкачки на `/dev/sda2`\n# swapon /dev/sda2 - и его активация\n# mkfs.ext4 - создание `ext4`, если не желаете использовать `ext3`\n")),"\n",a.createElement(n.h3,{id:"назначение-точек-монтирования",style:{position:"relative"}},a.createElement(n.a,{href:"#%D0%BD%D0%B0%D0%B7%D0%BD%D0%B0%D1%87%D0%B5%D0%BD%D0%B8%D0%B5-%D1%82%D0%BE%D1%87%D0%B5%D0%BA-%D0%BC%D0%BE%D0%BD%D1%82%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D1%8F","aria-label":"назначение точек монтирования permalink",className:"anchor before"},a.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"Назначение точек монтирования:"),"\n",a.createElement(n.pre,null,a.createElement(n.code,{className:"language-shell"},"# mount /dev/sda3 /mnt/gentoo - монтируем корень\n# mkdir /mnt/gentoo/boot - раздел под загрузчик\n# mount /dev/sda1 /mnt/gentoo/boot - монтирование раздела загрузчика\n")),"\n",a.createElement(n.h2,{id:"архив-стадии-дерево-портежей",style:{position:"relative"}},a.createElement(n.a,{href:"#%D0%B0%D1%80%D1%85%D0%B8%D0%B2-%D1%81%D1%82%D0%B0%D0%B4%D0%B8%D0%B8-%D0%B4%D0%B5%D1%80%D0%B5%D0%B2%D0%BE-%D0%BF%D0%BE%D1%80%D1%82%D0%B5%D0%B6%D0%B5%D0%B9","aria-label":"архив стадии дерево портежей permalink",className:"anchor before"},a.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"Архив стадии, дерево портежей"),"\n",a.createElement(n.p,null,"В качестве источника загрузки автором было использовано зеркало ",a.createElement(n.code,null,"mirror.yandex.ru"),"\nВнимательно следите за тем,чтобы загрузить подходящий скачанному вами образу архив. В примере использован amd64."),"\n",a.createElement(n.pre,null,a.createElement(n.code,{className:"language-shell"},"# cd /mnt/gentoo\n# links http://mirror.yandex.ru/gentoo-distfiles/releases/amd64/current-iso/\n")),"\n",a.createElement(n.p,null,"Выберите файл ",a.createElement(n.code,null,"stage3*.tar.bz")," и нажмите ",a.createElement(n.code,null,"enter"),". Начнётся загрузка архива, это 161 Мб, так что пока можно попить кофейку."),"\n",a.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<span\n      class="gatsby-resp-image-wrapper"\n      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 978px; flex:2;"\n    >\n      <span\n    class="gatsby-resp-image-background-image"\n    style="padding-bottom: 50%; position: relative; bottom: 0; left: 0; display: block;"\n  ></span>\n  <picture>\n          <source\n              srcset="/static/0be852145e11ed2c94275f9e1145c145/e93cc/gentoo2.webp 300w,\n/static/0be852145e11ed2c94275f9e1145c145/b0544/gentoo2.webp 600w,\n/static/0be852145e11ed2c94275f9e1145c145/47bc2/gentoo2.webp 978w"\n              sizes="(max-width: 978px) 100vw, 978px"\n              type="image/webp"\n            />\n          <source\n            srcset="/static/0be852145e11ed2c94275f9e1145c145/eed55/gentoo2.png 300w,\n/static/0be852145e11ed2c94275f9e1145c145/7491f/gentoo2.png 600w,\n/static/0be852145e11ed2c94275f9e1145c145/e3645/gentoo2.png 978w"\n            sizes="(max-width: 978px) 100vw, 978px"\n            type="image/png"\n          />\n          <img\n            class="gatsby-resp-image-image"\n            src="/static/0be852145e11ed2c94275f9e1145c145/e3645/gentoo2.png"\n            alt="gentoo install"\n            title=""\n            loading="lazy"\n            decoding="async"\n            style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"\n          />\n        </picture>\n    </span>'}}),"\n",a.createElement(n.p,null,"Загрузили? Распаковываем:"),"\n",a.createElement(n.pre,null,a.createElement(n.code,{className:"language-shell"},"# tar xvjpf stage3-*.tar.bz\n")),"\n",a.createElement(n.p,null,"Теперь сделаем снимок дерева портежей"),"\n",a.createElement(n.pre,null,a.createElement(n.code,{className:"language-shell"},"# links http://mirror.yandex.ru/gentoo-distfiles/snapshots/\n")),"\n",a.createElement(n.p,null,"выбираем внизу ",a.createElement(n.code,null,"portage-latest.tar.bz2")),"\n",a.createElement(n.p,null,"Начнётся загрузка."),"\n",a.createElement(n.p,null,"распаковываем (из корневого каталога):"),"\n",a.createElement(n.pre,null,a.createElement(n.code,{className:"language-shell"},"# tar xvjf /mnt/gentoo/portage-latest.tar.bz2 -C /mnt/gentoo/usr\n")),"\n",a.createElement(n.h2,{id:"настройка-компиляции-ядра",style:{position:"relative"}},a.createElement(n.a,{href:"#%D0%BD%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B9%D0%BA%D0%B0-%D0%BA%D0%BE%D0%BC%D0%BF%D0%B8%D0%BB%D1%8F%D1%86%D0%B8%D0%B8-%D1%8F%D0%B4%D1%80%D0%B0","aria-label":"настройка компиляции ядра permalink",className:"anchor before"},a.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"Настройка компиляции ядра"),"\n",a.createElement(n.p,null,"Настройки хранятся в файле ",a.createElement(n.code,null,"mnt/gentoo/etc/portage/make.conf"),". Его и открываем любимым редактором (joe, nano, vi?)\nЗдесь используются переменные и значения. Пример:"),"\n",a.createElement(n.p,null,"переменная - ",a.createElement(n.code,null,"CHOST"),", её значение - ",a.createElement(n.code,null,"x86_64-pc-linux-gnu")," - указывает на архитектуру процессора\n",a.createElement(n.code,null,'CFLAGS="-march=k8 -pipe -O2"')," - где"),"\n",a.createElement(n.p,null,a.createElement(n.code,null,'"-march=k8"')," - название целевой архитектуры, ",a.createElement(n.code,null,"k8")," прописывается для amd64, ",a.createElement(n.code,null,"-О2")," - классс оптимизации."),"\n",a.createElement(n.p,null,a.createElement(n.strong,null,"Допустимые значения:")),"\n",a.createElement(n.ul,null,"\n",a.createElement(n.li,null,a.createElement(n.code,null,"-s")," оптимизация по размеру"),"\n",a.createElement(n.li,null,a.createElement(n.code,null,"-0")," без оптимизации"),"\n",a.createElement(n.li,null,a.createElement(n.code,null,"-1 -2 -3")," - по скорости"),"\n",a.createElement(n.li,null,a.createElement(n.code,null,'CXXFLAGS="${CFLAGS}"')," - не изменяйте её"),"\n",a.createElement(n.li,null,a.createElement(n.code,null,'MAKEOPTS="-j2"')," - определяет сколько параллельных процессов компиляции можно запускать при установке пакета. Обычно ставят значение равное количеству ядер процессора +1. Если ваш процессор поддерживает технологию Hyper-threading, разумное значение будет: количество доступных ядер, умноженное на 2 +1."),"\n"),"\n",a.createElement(n.p,null,"Более тонкой настройки можно пока не делать, займёмся этим позже."),"\n",a.createElement(n.h3,{id:"выбор-зеркал-dns-chroot",style:{position:"relative"}},a.createElement(n.a,{href:"#%D0%B2%D1%8B%D0%B1%D0%BE%D1%80-%D0%B7%D0%B5%D1%80%D0%BA%D0%B0%D0%BB-dns-chroot","aria-label":"выбор зеркал dns chroot permalink",className:"anchor before"},a.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"Выбор зеркал, DNS, chroot"),"\n",a.createElement(n.p,null,"Действия в примере производятся из каталога ",a.createElement(n.code,null,"/")),"\n",a.createElement(n.p,null,"Выбор зеркала загрузки"),"\n",a.createElement(n.pre,null,a.createElement(n.code,{className:"language-shell"},"# mirrorselect -i -o >> /mnt/gentoo/etc/portage/make.conf\n")),"\n",a.createElement(n.p,null,"Выбор зеркала rsync:"),"\n",a.createElement(n.pre,null,a.createElement(n.code,{className:"language-shell"},"# mirrorselect -i -r -o >> /mnt/gentoo/etc/portage/make.conf\n")),"\n",a.createElement(n.p,null,"Из предложенного списка выберите зеркала России."),"\n",a.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<span\n      class="gatsby-resp-image-wrapper"\n      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 882px; flex:3;"\n    >\n      <span\n    class="gatsby-resp-image-background-image"\n    style="padding-bottom: 36.66666666666667%; position: relative; bottom: 0; left: 0; display: block;"\n  ></span>\n  <picture>\n          <source\n              srcset="/static/31b39112ed208342a07dd7d6f51bda59/e93cc/gentoo4_rsync.webp 300w,\n/static/31b39112ed208342a07dd7d6f51bda59/b0544/gentoo4_rsync.webp 600w,\n/static/31b39112ed208342a07dd7d6f51bda59/344e2/gentoo4_rsync.webp 882w"\n              sizes="(max-width: 882px) 100vw, 882px"\n              type="image/webp"\n            />\n          <source\n            srcset="/static/31b39112ed208342a07dd7d6f51bda59/eed55/gentoo4_rsync.png 300w,\n/static/31b39112ed208342a07dd7d6f51bda59/7491f/gentoo4_rsync.png 600w,\n/static/31b39112ed208342a07dd7d6f51bda59/2e4b5/gentoo4_rsync.png 882w"\n            sizes="(max-width: 882px) 100vw, 882px"\n            type="image/png"\n          />\n          <img\n            class="gatsby-resp-image-image"\n            src="/static/31b39112ed208342a07dd7d6f51bda59/2e4b5/gentoo4_rsync.png"\n            alt="gentoo rsync"\n            title=""\n            loading="lazy"\n            decoding="async"\n            style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"\n          />\n        </picture>\n    </span>'}}),"\n",a.createElement(n.p,null,"Нелишним будет скопировать информацию о DNS"),"\n",a.createElement(n.pre,null,a.createElement(n.code,{className:"language-shell"},"# cp -L /etc/resolv.conf /mnt/gentoo/etc/resolv.conf\n")),"\n",a.createElement(n.p,null,"Монтируем ",a.createElement(n.code,null,"/proc"),", ",a.createElement(n.code,null,"sys")," & ",a.createElement(n.code,null,"/dev"),":"),"\n",a.createElement(n.pre,null,a.createElement(n.code,{className:"language-shell"},"# mount -t proc none /mnt/gentoo/proc\n# mount -o bind /dev /mnt/gentoo/dev\n# mount -t sysfs none /mnt/gentoo/sys\n")),"\n",a.createElement(n.p,null,"Переходим в новую среду с помощью ",a.createElement(n.code,null,"chroot"),":"),"\n",a.createElement(n.pre,null,a.createElement(n.code,{className:"language-shell"},'# chroot /mnt/gentoo /bin/bash\n# env-update\n# source /etc/profile\n# export PS1="(chroot) $PS1"\n')),"\n",a.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<span\n      class="gatsby-resp-image-wrapper"\n      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 553px; flex:3;"\n    >\n      <span\n    class="gatsby-resp-image-background-image"\n    style="padding-bottom: 39.666666666666664%; position: relative; bottom: 0; left: 0; display: block;"\n  ></span>\n  <picture>\n          <source\n              srcset="/static/0a19cd2c4cf336d5cd2b2e9ff9442a23/e93cc/gentoo3_chroot1.webp 300w,\n/static/0a19cd2c4cf336d5cd2b2e9ff9442a23/a4f05/gentoo3_chroot1.webp 553w"\n              sizes="(max-width: 553px) 100vw, 553px"\n              type="image/webp"\n            />\n          <source\n            srcset="/static/0a19cd2c4cf336d5cd2b2e9ff9442a23/eed55/gentoo3_chroot1.png 300w,\n/static/0a19cd2c4cf336d5cd2b2e9ff9442a23/d4bfa/gentoo3_chroot1.png 553w"\n            sizes="(max-width: 553px) 100vw, 553px"\n            type="image/png"\n          />\n          <img\n            class="gatsby-resp-image-image"\n            src="/static/0a19cd2c4cf336d5cd2b2e9ff9442a23/d4bfa/gentoo3_chroot1.png"\n            alt="chroot"\n            title=""\n            loading="lazy"\n            decoding="async"\n            style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"\n          />\n        </picture>\n    </span>'}}),"\n",a.createElement(n.h2,{id:"прочие-премудрости",style:{position:"relative"}},a.createElement(n.a,{href:"#%D0%BF%D1%80%D0%BE%D1%87%D0%B8%D0%B5-%D0%BF%D1%80%D0%B5%D0%BC%D1%83%D0%B4%D1%80%D0%BE%D1%81%D1%82%D0%B8","aria-label":"прочие премудрости permalink",className:"anchor before"},a.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"Прочие премудрости"),"\n",a.createElement(n.p,null,"Обновите дерево портежей:"),"\n",a.createElement(n.pre,null,a.createElement(n.code,{className:"language-shell"},"# mkdir /usr/portage\n# emerge --sync\n")),"\n",a.createElement(n.p,null,"это может занять какое-то время, не пугайтесь"),"\n",a.createElement(n.pre,null,a.createElement(n.code,{className:"language-shell"},"# emerge portage - если выдаёт сообщение о новой версии портежей\n")),"\n",a.createElement(n.p,null,"Выбор профиля:"),"\n",a.createElement(n.pre,null,a.createElement(n.code,{className:"language-shell"},"# eselect profile list\nAvailable profile symlink targets:\n[1]   default/linux/amd64/10.0 *\n[2]   default/linux/amd64/10.0/desktop\n[3]   default/linux/amd64/10.0/server\n# eselect profile set 3\n")),"\n",a.createElement(n.p,null,"Думаю, приведённые действия не нуждаются в пояснении, всё ясно из названий профилей.\nНужно лишь выбрать необходимый вам, исходя из ваших задач."),"\n",a.createElement(n.h3,{id:"use-флаги",style:{position:"relative"}},a.createElement(n.a,{href:"#use-%D1%84%D0%BB%D0%B0%D0%B3%D0%B8","aria-label":"use флаги permalink",className:"anchor before"},a.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"USE-флаги"),"\n",a.createElement(n.p,null,"Служат для включения/отключения поддержки необязательных функций при компиляции программ.\nВам не нужен X-сервер? Допишите значение ",a.createElement(n.code,null,'"-X"'),". Не нужна поддержка qt? Значит ",a.createElement(n.code,null,'"-qt"'),".\nИ наоборот включите поддержку unicode: ",a.createElement(n.code,null,'"unicode"'),".\nПосмотреть допустимые значения:"),"\n",a.createElement(n.pre,null,a.createElement(n.code,{className:"language-shell"},"# less /usr/portage/profiles/use.desc\n")),"\n",a.createElement(n.p,null,"Значения дописываются в ",a.createElement(n.code,null,"/etc/portage/make.conf")," в строку USE"),"\n",a.createElement(n.pre,null,a.createElement(n.code,{className:"language-shell"},"# nano -w /etc/portage/make.conf\n")),"\n",a.createElement(n.p,null,"Например:"),"\n",a.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<span\n      class="gatsby-resp-image-wrapper"\n      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 825px; flex:3;"\n    >\n      <span\n    class="gatsby-resp-image-background-image"\n    style="padding-bottom: 37.333333333333336%; position: relative; bottom: 0; left: 0; display: block;"\n  ></span>\n  <picture>\n          <source\n              srcset="/static/c4f13c00d385bd3049d2c6927305b3a2/e93cc/gentoo_use1.webp 300w,\n/static/c4f13c00d385bd3049d2c6927305b3a2/b0544/gentoo_use1.webp 600w,\n/static/c4f13c00d385bd3049d2c6927305b3a2/fb185/gentoo_use1.webp 825w"\n              sizes="(max-width: 825px) 100vw, 825px"\n              type="image/webp"\n            />\n          <source\n            srcset="/static/c4f13c00d385bd3049d2c6927305b3a2/eed55/gentoo_use1.png 300w,\n/static/c4f13c00d385bd3049d2c6927305b3a2/7491f/gentoo_use1.png 600w,\n/static/c4f13c00d385bd3049d2c6927305b3a2/7f529/gentoo_use1.png 825w"\n            sizes="(max-width: 825px) 100vw, 825px"\n            type="image/png"\n          />\n          <img\n            class="gatsby-resp-image-image"\n            src="/static/c4f13c00d385bd3049d2c6927305b3a2/7f529/gentoo_use1.png"\n            alt="use flags"\n            title=""\n            loading="lazy"\n            decoding="async"\n            style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"\n          />\n        </picture>\n    </span>'}}),"\n",a.createElement(n.h3,{id:"настройка-кодировки",style:{position:"relative"}},a.createElement(n.a,{href:"#%D0%BD%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B9%D0%BA%D0%B0-%D0%BA%D0%BE%D0%B4%D0%B8%D1%80%D0%BE%D0%B2%D0%BA%D0%B8","aria-label":"настройка кодировки permalink",className:"anchor before"},a.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"Настройка кодировки:"),"\n",a.createElement(n.pre,null,a.createElement(n.code,{className:"language-shell"},"# nano -w /etc/locale.gen\n")),"\n",a.createElement(n.p,null,"вы увидите список закомментированных строк с кодировками, вот сверху или же ниже его впишите:"),"\n",a.createElement(n.pre,null,a.createElement(n.code,{className:"language-bash"},"en_US.UTF-8 UTF-8\nru_RU.UTF-8 UTF-8\n")),"\n",a.createElement(n.p,null,"сохраните изменения и выйдите: ",a.createElement(n.code,null,"Ctrl+O"),", ",a.createElement(n.code,null,"Ctrl+Q")),"\n",a.createElement(n.pre,null,a.createElement(n.code,{className:"language-shell"},"# locale-gen\n")),"\n",a.createElement(n.h3,{id:"настройка-времени",style:{position:"relative"}},a.createElement(n.a,{href:"#%D0%BD%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B9%D0%BA%D0%B0-%D0%B2%D1%80%D0%B5%D0%BC%D0%B5%D0%BD%D0%B8","aria-label":"настройка времени permalink",className:"anchor before"},a.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"Настройка времени:"),"\n",a.createElement(n.pre,null,a.createElement(n.code,{className:"language-shell"},"# cp /usr/share/zoneinfo/Europe/Moscow /etc/localtime\n")),"\n",a.createElement(n.p,null,"Теперь наше локальное время идёт по Кремлёвским курантам))\nМожете скопировать любое место вашей дислокации из ",a.createElement(n.code,null,"/usr/share/zoneinfo")),"\n",a.createElement(n.h2,{id:"ядро",style:{position:"relative"}},a.createElement(n.a,{href:"#%D1%8F%D0%B4%D1%80%D0%BE","aria-label":"ядро permalink",className:"anchor before"},a.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"Ядро"),"\n",a.createElement(n.p,null,"Скачаем исходники ядра"),"\n",a.createElement(n.pre,null,a.createElement(n.code,{className:"language-bash"},'# USE="-doc symlink" emerge gentoo-sources\n')),"\n",a.createElement(n.h3,{id:"установка-ядра",style:{position:"relative"}},a.createElement(n.a,{href:"#%D1%83%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%BA%D0%B0-%D1%8F%D0%B4%D1%80%D0%B0","aria-label":"установка ядра permalink",className:"anchor before"},a.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"Установка ядра"),"\n",a.createElement(n.p,null,"Способ 1 - всё и сразу"),"\n",a.createElement(n.pre,null,a.createElement(n.code,{className:"language-shell"},"# emerge genkernel\n# genkernel all\n")),"\n",a.createElement(n.p,null,"В результате получим ядро с поддержкой разного ненужного хлама. Плюс этого способа - простота.\nПримечание: можно подправить ",a.createElement(n.code,null,"/etc/genkernel.conf"),", включив в нём параметры:"),"\n",a.createElement(n.pre,null,a.createElement(n.code,{className:"language-bash"},'OLDCONFIG="yes"\nMENUCONFIG="yes"\nCLEAN="no"\nMRPROPER="no"\n')),"\n",a.createElement(n.p,null,"В таком случае вы сможете собрать своё ядро, а genkernel сделает всё остальное.\nПосле сборки можете просто проверить название созданного ядра и initrd, а затем\nобратиться к дальнейшему пункту о сборке программ:"),"\n",a.createElement(n.pre,null,a.createElement(n.code,{className:"language-shell"},"# ls /boot/kernel* /boot/initramfs*\n")),"\n",a.createElement(n.p,null,"Способ 2 - ",a.createElement(n.a,{href:"/posts/kernel-v3/"},"только то, что нужно")),"\n",a.createElement(n.pre,null,a.createElement(n.code,{className:"language-shell"},"# emerge pcutils (с её помощью вы сможете посмотреть аппаратную часть своего ПК)\n# cd /usr/src/linux (переход в каталог с исходниками)\n# make menuconfig (вызов меню с настройками)\n")),"\n",a.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<span\n      class="gatsby-resp-image-wrapper"\n      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 814px; flex:1;"\n    >\n      <span\n    class="gatsby-resp-image-background-image"\n    style="padding-bottom: 70.33333333333334%; position: relative; bottom: 0; left: 0; display: block;"\n  ></span>\n  <picture>\n          <source\n              srcset="/static/2763f9699c12a91d31100100a143ca5b/e93cc/gentoo_menuconfig.webp 300w,\n/static/2763f9699c12a91d31100100a143ca5b/b0544/gentoo_menuconfig.webp 600w,\n/static/2763f9699c12a91d31100100a143ca5b/e13d5/gentoo_menuconfig.webp 814w"\n              sizes="(max-width: 814px) 100vw, 814px"\n              type="image/webp"\n            />\n          <source\n            srcset="/static/2763f9699c12a91d31100100a143ca5b/eed55/gentoo_menuconfig.png 300w,\n/static/2763f9699c12a91d31100100a143ca5b/7491f/gentoo_menuconfig.png 600w,\n/static/2763f9699c12a91d31100100a143ca5b/c3665/gentoo_menuconfig.png 814w"\n            sizes="(max-width: 814px) 100vw, 814px"\n            type="image/png"\n          />\n          <img\n            class="gatsby-resp-image-image"\n            src="/static/2763f9699c12a91d31100100a143ca5b/c3665/gentoo_menuconfig.png"\n            alt="make menuconfig"\n            title=""\n            loading="lazy"\n            decoding="async"\n            style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"\n          />\n        </picture>\n    </span>'}}),"\n",a.createElement(n.p,null,"Здесь всё строго индивидуально. Используете usb-мышь или клавиатуру? Проверьте включена ли их поддержка. Хотите, чтобы система понимала NTFS? Проверьте включена ли её поддержка. Настроек хватит на всё: тип процессора, видео, звук, поддержка файловых систем, девайсов устройств, поддерживаемых кодировок. Просто пройдитесь по пунктам меню и поразбирайтесь,что вам нужно,а что нет. Если вы испытываете затруднения с этим, можете ознакомиться со следующей заметкой, а затем продолжить."),"\n",a.createElement(n.p,null,"Настроили? Теперь ядро нужно скомпилировать и установить:"),"\n",a.createElement(n.pre,null,a.createElement(n.code,{className:"language-shell"},"# make && make modules_install - для тех, кто занимался ручной сборкой\n")),"\n",a.createElement(n.p,null,"И скопировать ядро в ",a.createElement(n.code,null,"/boot"),":"),"\n",a.createElement(n.pre,null,a.createElement(n.code,{className:"language-shell"},"# cp arch/x86_64/boot/bzImage /boot/\n")),"\n",a.createElement(n.p,null,"Пример:"),"\n",a.createElement(n.pre,null,a.createElement(n.code,{className:"language-shell"},"# cp arch/x86_64/boot/bzImage /boot/2.6.37-gentoo-r4\n")),"\n",a.createElement(n.p,null,"Если вы собрали ядро с initramfs, следует всё же установить genkernel и скомандовать:"),"\n",a.createElement(n.pre,null,a.createElement(n.code,{className:"language-shell"},"# genkernel --install initramfs\n")),"\n",a.createElement(n.p,null,"Сборка программ, конфигурирование модулей, настройка загрузчика"),"\n",a.createElement(n.pre,null,a.createElement(n.code,{className:"language-shell"},"# emerge udev (автоматическое распознавание устройств) syslog-ng (служба журналирования) vixie-cron (что такое cron, думаю, знают все) dhcpcd (автоматическое получение IP-адреса, если у вас это дело статично, можете не ставить)\n")),"\n",a.createElement(n.p,null,"Теперь добавляем эти вещи в автозагрузку:"),"\n",a.createElement(n.pre,null,a.createElement(n.code,{className:"language-shell"},"# rc-update add udev boot\n# rc-update add syslog-ng default\n# rc-update add vixie-cron default\n# rc-update add dhcpcd default\n")),"\n",a.createElement(n.p,null,a.createElement(n.strong,null,"Примечание:")),"\n",a.createElement(n.p,null,"Если вы владелец беспроводного соединения, лучше заранее озаботиться о простом\nспособе подключения к сети после первой перезагрузки. Например, установить wicd\nс флагом ",a.createElement(n.code,null,"ncurses"),": это позволит провести настройку с помощью вызова\nwicd-curses. Также не забывайте заглянуть в содержимое ",a.createElement(n.code,null,"/etc/resolv.conf"),",\nкоторое может быть перезаписано dhcpcd."),"\n",a.createElement(n.p,null,"Проверяем наши устройства:"),"\n",a.createElement(n.pre,null,a.createElement(n.code,{className:"language-shell"},"# nano -w /ets/fstab\n")),"\n",a.createElement(n.p,null,"Должно получиться примерно так:"),"\n",a.createElement(n.pre,null,a.createElement(n.code,{className:"language-bash"},"# NOTE: If your BOOT partition is ReiserFS, add the notail option to opts.\n/dev/sda1    /boot           ext2            noatime 1 2\n/dev/sda2    /               ext4            noatime         0 1\n/dev/sda5    none            swap            defaults        0 0\n/dev/sda6    /home           ext4            noatime         0 0\ntmpfs        /var/tmp        tmpfs           size=4G,noatime 0 0\ntmpfs        /var/log        tmpfs           size=10M        0 0\ndebugfs      /sys/kernel/debug  debugfs      defaults        0 0\n#/dev/cdrom  /mnt/cdrom      auto            noauto,ro       0 0\n")),"\n",a.createElement(n.p,null,"Обратите внимание: нужно убрать параметр noauto напротив ",a.createElement(n.code,null,"/boot")," (в данном\nпримере ",a.createElement(n.code,null,"/boot")," расположен на ",a.createElement(n.code,null,"/sda1"),"). Вообще, boot и swap-разделы создавать\nнеобязательно. Монтирование ",a.createElement(n.code,null,"tmpfs")," и ",a.createElement(n.code,null,"debugfs")," по вкусу и потребностям."),"\n",a.createElement(n.p,null,"Имя хоста:"),"\n",a.createElement(n.pre,null,a.createElement(n.code,{className:"language-shell"},"# nano -w /etc/conf.d/hostname\n")),"\n",a.createElement(n.p,null,"Укажите здесь имя своего ПК"),"\n",a.createElement(n.p,null,"Сеть:"),"\n",a.createElement(n.pre,null,a.createElement(n.code,{className:"language-shell"},"# nano -w /etc/conf.d/net\n")),"\n",a.createElement(n.p,null,"дописываем:"),"\n",a.createElement(n.pre,null,a.createElement(n.code,{className:"language-bash"},'# /etc/conf.d/net\n#\nconfig_eth0="dhcp" # для получения динамического IP-адреса\n# если адрес статичен,то впишите вместо dhcp свою информацию. Например:\nconfig_eth0="192.168.0.2 netmask 255.255.255.0" # IP-адрес и адрес сети\nroutes_eth0="default via 192.168.0.1" # роутер\ndns_servers_eth0="192.168.0.1 8.8.8.8" # DNS-адреса\n')),"\n",a.createElement(n.p,null,"Теперь следует указать gentoo на существующий интерфейс. Для этого создайте символьную ссылку на ",a.createElement(n.code,null,"net.eth0"),":"),"\n",a.createElement(n.pre,null,a.createElement(n.code,{className:"language-shell"},"# cd /etc/init.d\n# ln -s net.lo net.eth0\n")),"\n",a.createElement(n.p,null,"Добавление сетевого интерфейса в автозагрузку:"),"\n",a.createElement(n.pre,null,a.createElement(n.code,{className:"language-shell"},"# rc-update add net.eth0 default\n")),"\n",a.createElement(n.p,null,"Создание пароля для суперпользователя:"),"\n",a.createElement(n.pre,null,a.createElement(n.code,{className:"language-shell"},"# passwd\n")),"\n",a.createElement(n.p,null,"впишите пароль для учётной записи root"),"\n",a.createElement(n.p,null,"Примечание: можете также ознакомиться с настройками файла ",a.createElement(n.code,null,"/etc/rc.conf")," (редактор по умолчанию, графическая среда и прочее)"),"\n",a.createElement(n.p,null,"Настройка раскладки клавиатуры:"),"\n",a.createElement(n.pre,null,a.createElement(n.code,{className:"language-bash"},'# /etc/conf.d/keymaps\nKEYMAP="ru"\n')),"\n",a.createElement(n.p,null,"Настройка часов:"),"\n",a.createElement(n.pre,null,a.createElement(n.code,{className:"language-bash"},'# /etc/conf.d/clock\nCLOCK="local"\nTIMEZONE="Europe/Moscow"\n')),"\n",a.createElement(n.p,null,"Установка загрузчика grub2:"),"\n",a.createElement(n.pre,null,a.createElement(n.code,{className:"language-shell"},'# nano -w /etc/portage/make.conf\nGRUB_PLATFORMS="pc"\n\n# emerge -av grub sysboot/os-prober\n# grub2-install /dev/sda\n# grub2-mkconfig -o /boot/grub/grub.cfg\n')),"\n",a.createElement(n.p,null,"По состоянию на 2015 год в gentoo предлагается установка grub2 по-умолчанию,\nхотя вы всегда можете выбрать любой другой загрузчик: grub-legacy, lilo."),"\n",a.createElement(n.h2,{id:"финиш",style:{position:"relative"}},a.createElement(n.a,{href:"#%D1%84%D0%B8%D0%BD%D0%B8%D1%88","aria-label":"финиш permalink",className:"anchor before"},a.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"Финиш"),"\n",a.createElement(n.pre,null,a.createElement(n.code,{className:"language-shell"},"# exit\n# cd\n# umount /mnt/gentoo/boot /mnt/gentoo/proc /mnt/gentoo/dev /mnt/gentoo (в общем последовательно отмонтируйте всё, что смонтировали в `/mnt`)\n# reboot\n")),"\n",a.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<span\n      class="gatsby-resp-image-wrapper"\n      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 591px; flex:1;"\n    >\n      <span\n    class="gatsby-resp-image-background-image"\n    style="padding-bottom: 79.66666666666667%; position: relative; bottom: 0; left: 0; display: block;"\n  ></span>\n  <picture>\n          <source\n              srcset="/static/28d379878fd5a514fdf62a231d954166/e93cc/gentoo_grub4.webp 300w,\n/static/28d379878fd5a514fdf62a231d954166/dc7b0/gentoo_grub4.webp 591w"\n              sizes="(max-width: 591px) 100vw, 591px"\n              type="image/webp"\n            />\n          <source\n            srcset="/static/28d379878fd5a514fdf62a231d954166/eed55/gentoo_grub4.png 300w,\n/static/28d379878fd5a514fdf62a231d954166/054b3/gentoo_grub4.png 591w"\n            sizes="(max-width: 591px) 100vw, 591px"\n            type="image/png"\n          />\n          <img\n            class="gatsby-resp-image-image"\n            src="/static/28d379878fd5a514fdf62a231d954166/054b3/gentoo_grub4.png"\n            alt="grub"\n            title=""\n            loading="lazy"\n            decoding="async"\n            style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"\n          />\n        </picture>\n    </span>'}}),"\n",a.createElement(n.p,null,"Перезагрузка, загрузка ПК с винчестера и вас встречают приглашением входа в систему.\nПоздравляю, вы победили!"),"\n",a.createElement(n.h2,{id:"локализация-системы",style:{position:"relative"}},a.createElement(n.a,{href:"#%D0%BB%D0%BE%D0%BA%D0%B0%D0%BB%D0%B8%D0%B7%D0%B0%D1%86%D0%B8%D1%8F-%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D1%8B","aria-label":"локализация системы permalink",className:"anchor before"},a.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"Локализация системы"),"\n",a.createElement(n.p,null,"Перезагрузившись, мы обнаружим прескверную вещь: кириллица отображается квадратиками. Что ж, в ",a.createElement(n.code,null,"locale.gen")," нужные настройки внесены, продолжим квест по русификации системы."),"\n",a.createElement(n.pre,null,a.createElement(n.code,{className:"language-shell"},"# emerge terminus-font intlfonts freefonts cronyx-fonts corefonts kbd\n")),"\n",a.createElement(n.p,null,"В файле ",a.createElement(n.code,null,"/etc/env.d/02locale"),":"),"\n",a.createElement(n.pre,null,a.createElement(n.code,{className:"language-bash"},'LC_ALL=""\nLANG="ru_RU.UTF-8"\n')),"\n",a.createElement(n.p,null,"В ",a.createElement(n.code,null,"/etc/conf.d/keymaps"),":"),"\n",a.createElement(n.pre,null,a.createElement(n.code,{className:"language-bash"},'keymap="ruwin_alt_sh-UTF-8"\nwindowkeys="NO"\nextended_keymaps=""\ndumpkeys_charset=""\nfix_euro="NO"\n')),"\n",a.createElement(n.p,null,"В ",a.createElement(n.code,null,"/etc/conf.d/font"),":"),"\n",a.createElement(n.pre,null,a.createElement(n.code,{className:"language-bash"},'font="cyr-sun16"\ntranslation=""\n')),"\n",a.createElement(n.p,null,"После чего прописать font в автозагрузку:"),"\n",a.createElement(n.pre,null,a.createElement(n.code,{className:"language-shell"},"# rc-update add font boot\n")),"\n",a.createElement(n.p,null,"Можно также установить различные шрифты и поэкспериментировать с ними. После пересборки/установки шрифтов желательно выполнить:"),"\n",a.createElement(n.pre,null,a.createElement(n.code,{className:"language-shell"},"# fc-cache -fv\n")))}var r=function(e){void 0===e&&(e={});const{wrapper:n}=Object.assign({},(0,l.MN)(),e.components);return n?a.createElement(n,e,a.createElement(c,e)):c(e)},s=t(7792),o=t(7619);function i(e){var n,t;let{data:{mdx:l},children:c,pageContext:{prev:r,next:i}}=e;const{h1:m,title:d,description:p,image:u,table_of_contents:g}=l.frontmatter;return(0,a.useEffect)((()=>{(0,o.K)()}),[]),a.createElement(a.Fragment,null,a.createElement(s._W,{h1:m,title:d,description:p,image:null===(n=l.frontmatter.image)||void 0===n?void 0:n.publicURL},a.createElement(s.MV,{post:l.frontmatter,imageData:null==u||null===(t=u.childImageSharp)||void 0===t?void 0:t.gatsbyImageData},g?a.createElement(s.G8,{headings:l.tableOfContents}):null,a.createElement("div",{className:"page__content"},c,a.createElement(s.Mf,{prev:r,next:i})),a.createElement(s.QZ,null))))}function m(e){return a.createElement(i,e,a.createElement(r,e))}},8876:function(e,n,t){t.d(n,{MN:function(){return c}});var l=t(4424);const a=l.createContext({});function c(e){const n=l.useContext(a);return l.useMemo((()=>"function"==typeof e?e(n):{...n,...e}),[n,e])}}}]);