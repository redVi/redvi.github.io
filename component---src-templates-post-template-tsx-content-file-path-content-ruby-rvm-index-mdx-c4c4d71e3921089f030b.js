"use strict";(self.webpackChunkgatsby_blog=self.webpackChunkgatsby_blog||[]).push([[7412],{4808:function(e,n,a){a.r(n),a.d(n,{Head:function(){return c.Ss},default:function(){return o}});var t=a(8876),s=a(4424);function l(e){const n=Object.assign({p:"p",strong:"strong",span:"span",h2:"h2",a:"a",table:"table",thead:"thead",tr:"tr",th:"th",tbody:"tbody",td:"td"},(0,t.MN)(),e.components);return s.createElement(s.Fragment,null,s.createElement(n.p,null,"RVM — Ruby Version Manager (менеджер управления пакетами в ruby)\nсослужит хорошую службу в тех частых ситуациях, когда вам может потребоваться\nзапуск нескольких версий ruby на одной машине или же нескольких проектов с разными\nнаборами gem'ов для них. Чем-то напоминает virtualenv, если сравнивать с аналогичным приложением для python."),"\n",s.createElement(n.p,null,"Данный пост предположительно рассчитан на новоиспечённых рубистов и предназначен\nдля облегчения и в какой-то мере даже автоматизации их труда."),"\n",s.createElement(n.p,null,s.createElement(n.strong,null,"Что такое gem?")),"\n",s.createElement(n.p,null,"Gem (драгоценный камень, жемчужина) — пакет ruby, предоставляющий\nкакую-то функциональность. Например, библиотека ",s.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">redcarpet</code>'}}),", доступная в\nвиде gem'а, обеспечивает поддержку markdown."),"\n",s.createElement(n.p,null,s.createElement(n.strong,null,"Что такое gemset?")),"\n",s.createElement(n.p,null,"Gemset (set: набор, комплект) — набор gem'ов."),"\n",s.createElement(n.h2,{id:"установка-rvm",style:{position:"relative"}},s.createElement(n.a,{href:"#%D1%83%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%BA%D0%B0-rvm","aria-label":"установка rvm permalink",className:"anchor before"},s.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"Установка RVM"),"\n",s.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="shell"><pre class="language-shell"><code class="language-shell">$ <span class="token punctuation">\\</span>curl <span class="token parameter variable">-L</span> https://get.rvm.io <span class="token operator">|</span> <span class="token function">bash</span>\nDownloading RVM branch master\n% Total    % Received % Xferd  Average Speed\n                              Dload  Upload\n<span class="token number">100</span>   <span class="token number">124</span>  <span class="token number">100</span>   <span class="token number">124</span>    <span class="token number">0</span>     <span class="token number">0</span>    <span class="token number">107</span>\n<span class="token number">100</span> 1084k  <span class="token number">100</span> 1084k    <span class="token number">0</span>     <span class="token number">0</span>   234k\n* To start using RVM you need to run\n<span class="token variable"><span class="token variable">`</span><span class="token builtin class-name">source</span> /home/user/.rvm/scripts/rvm<span class="token variable">`</span></span></code></pre></div>'}}),"\n",s.createElement(n.p,null,"Перезапускаем консоль и убеждаемся в том, что ",s.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">rvm</code>'}})," был успешно установлен:"),"\n",s.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="shell"><pre class="language-shell"><code class="language-shell">$ rvm <span class="token parameter variable">-v</span>\nrvm <span class="token number">1.23</span>.13\n\n$ rvm get stable --auto-dotfiles</code></pre></div>'}}),"\n",s.createElement(n.p,null,"Дополним переменную PATH, дабы указать путь к директории rvm. Запись нужно\nсделать в ",s.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">.bashrc</code>'}})," или ",s.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">.zshenv</code>'}}),"."),"\n",s.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash"><span class="token comment"># .bashrc</span>\n<span class="token builtin class-name">export</span> <span class="token assign-left variable"><span class="token environment constant">PATH</span></span><span class="token operator">=</span><span class="token string">"<span class="token environment constant">$PATH</span>:<span class="token environment constant">$HOME</span>/.rvm/bin"</span></code></pre></div>'}}),"\n",s.createElement(n.p,null,"Дальше любопытно было бы просмотреть список доступных для установки и уже установленных пакетов ruby."),"\n",s.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="shell"><pre class="language-shell"><code class="language-shell">$ rvm list known <span class="token comment"># просмотреть все доступные для установки версии Ruby</span>\n$ rvm list       <span class="token comment"># все установленные версии Ruby</span>\n<span class="token operator">=</span>* ruby-1.9.3-p448 <span class="token punctuation">[</span> x86_64 <span class="token punctuation">]</span>\n<span class="token comment"># => - current - текущая версия</span>\n<span class="token comment"># =* - current &amp;&amp; default - текущая и спользуется по-умолчанию</span>\n<span class="token comment">#  * - default - используемая по-умолчанию версия</span></code></pre></div>'}}),"\n",s.createElement(n.h2,{id:"использование-разных-версий-ruby-и-gemsetы",style:{position:"relative"}},s.createElement(n.a,{href:"#%D0%B8%D1%81%D0%BF%D0%BE%D0%BB%D1%8C%D0%B7%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5-%D1%80%D0%B0%D0%B7%D0%BD%D1%8B%D1%85-%D0%B2%D0%B5%D1%80%D1%81%D0%B8%D0%B9-ruby-%D0%B8-gemset%D1%8B","aria-label":"использование разных версий ruby и gemsetы permalink",className:"anchor before"},s.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"Использование разных версий ruby и gemset'ы"),"\n",s.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="shell"><pre class="language-shell"><code class="language-shell">$ <span class="token builtin class-name">source</span> ~/.rvm/scripts/rvm <span class="token comment"># активировать rvm</span>\n$ rvm <span class="token function">install</span> <span class="token number">1.9</span>.3 <span class="token comment"># установить несколько версий ruby</span>\n$ rvm <span class="token function">install</span> <span class="token number">2.0</span>.0\n$ rvm use ruby-2.0.0-p247 <span class="token parameter variable">--default</span> <span class="token comment"># переключиться на ruby 2 и использовать v2 по-умолчанию</span>\n$ rvm list\n   ruby-1.9.3-p448 <span class="token punctuation">[</span> x86_64 <span class="token punctuation">]</span>\n<span class="token operator">=</span>* ruby-2.0.0-p247 <span class="token punctuation">[</span> x86_64 <span class="token punctuation">]</span>\n\n<span class="token comment"># => - current</span>\n<span class="token comment"># =* - current &amp;&amp; default</span>\n<span class="token comment">#  * - default</span></code></pre></div>'}}),"\n",s.createElement(n.p,null,"Для примера создадим gemset ",s.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">jekyll</code>'}}),", где будут собраны все нужные одноимённому генератору статических страниц gem'ы."),"\n",s.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="shell"><pre class="language-shell"><code class="language-shell">$ <span class="token builtin class-name">source</span> ~/.rvm/scripts/rvm <span class="token comment"># «включаем» rvm</span>\n$ rvm use <span class="token number">1.9</span>.3@jekyll <span class="token parameter variable">--create</span> <span class="token comment"># создать gemset</span>\n$ rvm use <span class="token number">1.9</span>.3@jekyll <span class="token parameter variable">--default</span> <span class="token comment"># выбирать его по-умолчанию</span>\n$ gem <span class="token function">install</span> jekyll jekyll-tagging i18n <span class="token comment"># установка gem\'ов</span>\n$ gem list <span class="token comment"># просмотр установленных в выбранном gemset\'е gem\'ов</span>\ni18n <span class="token punctuation">(</span><span class="token number">0.6</span>.5<span class="token punctuation">)</span>\njekyll <span class="token punctuation">(</span><span class="token number">1.2</span>.1<span class="token punctuation">)</span>\njekyll-tagging <span class="token punctuation">(</span><span class="token number">0.5</span>.0<span class="token punctuation">)</span>\nliquid <span class="token punctuation">(</span><span class="token number">2.5</span>.3<span class="token punctuation">)</span>\nmaruku <span class="token punctuation">(</span><span class="token number">0.7</span>.0<span class="token punctuation">)</span></code></pre></div>'}}),"\n",s.createElement(n.p,null,"Gemset'ы создаются для определённой версии ruby. Так, при переключении с одной версии на другую вы будете всегда видеть разный набор gemset'ов: отображаются они также лишь для своей версии."),"\n",s.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="shell"><pre class="language-shell"><code class="language-shell">$ rvm gemset list <span class="token comment"># набор gemset\'ов для ruby2</span>\n\ngemsets <span class="token keyword">for</span> ruby-2.0.0-p247\n   <span class="token punctuation">(</span>default<span class="token punctuation">)</span>\n<span class="token operator">=</span><span class="token operator">></span> example\n   global\n\n$ <span class="token builtin class-name">cd</span> workspace/jekyll <span class="token comment"># переход в директорию проекта, где используется ruby1.9</span>\n$ rvm gemset list     <span class="token comment"># набор gemset\'ов для ruby1.9</span>\n\ngemsets <span class="token keyword">for</span> ruby-1.9.3-p448\n   <span class="token punctuation">(</span>default<span class="token punctuation">)</span>\n   global\n<span class="token operator">=</span><span class="token operator">></span> jekyll</code></pre></div>'}}),"\n",s.createElement(n.p,null,"Но здесь мы забежали чуть вперёд. Дело в том, что при переходе в директорию проекта, автоматически меняется версия ruby и набор gemset'ов, о чём речь пойдёт чуть ниже."),"\n",s.createElement(n.p,null,"Gemset'ы можно удалять(delete), очищать(), экспортировать(export) и импортировать(import) gem'ы из одного в gemset'a в другой. Наиболее часто используемые действия отражены в данной ниже таблице."),"\n",s.createElement(n.table,null,s.createElement(n.thead,null,s.createElement(n.tr,null,s.createElement(n.th,null,"команда"),s.createElement(n.th,null,"описание"))),s.createElement(n.tbody,null,s.createElement(n.tr,null,s.createElement(n.td,null,"rvm gemset create"),s.createElement(n.td,null,"создать новый gemset")),s.createElement(n.tr,null,s.createElement(n.td,null,"rvm gemset export new.gems"),s.createElement(n.td,null,"экспорт списка gem'ов в файл new.gems")),s.createElement(n.tr,null,s.createElement(n.td,null,"rvm gemset import new.gems"),s.createElement(n.td,null,"импорт в текущий gemset списка gem'ов из файла new.gems")),s.createElement(n.tr,null,s.createElement(n.td,null,"rvm gemset delete"),s.createElement(n.td,null,"удалить gemset")),s.createElement(n.tr,null,s.createElement(n.td,null,"rvm gemset empty"),s.createElement(n.td,null,"очистить gemset")),s.createElement(n.tr,null,s.createElement(n.td,null,"rvm gemset delete example --force"),s.createElement(n.td,null,"полностью удалить gemset example")),s.createElement(n.tr,null,s.createElement(n.td,null,"rvmreset"),s.createElement(n.td,null,"перезагрузка RVM")),s.createElement(n.tr,null,s.createElement(n.td,null,"rvm uninstall"),s.createElement(n.td,null,"удалить версию Ruby, оставить исходники")),s.createElement(n.tr,null,s.createElement(n.td,null,"rvm implode"),s.createElement(n.td,null,"полностью удалить RVM!")),s.createElement(n.tr,null,s.createElement(n.td,null,"rvm list known"),s.createElement(n.td,null,"получить список всех версий ruby доступных для установки")),s.createElement(n.tr,null,s.createElement(n.td,null,"rvm list"),s.createElement(n.td,null,"отобразить список установленных версий ruby")),s.createElement(n.tr,null,s.createElement(n.td,null,"rvm gemset list"),s.createElement(n.td,null,"просмотреть список gemset'ов в выбранной версии ruby")),s.createElement(n.tr,null,s.createElement(n.td,null,"rvm install 1.9.3"),s.createElement(n.td,null,"установить ruby версии 1.9.3")),s.createElement(n.tr,null,s.createElement(n.td,null,"rvm remove 1.9.3"),s.createElement(n.td,null,"удалить ruby версии 1.9.3")),s.createElement(n.tr,null,s.createElement(n.td,null,"rvm use 1.9.3"),s.createElement(n.td,null,"переключиться на ruby версии 1.9.3")),s.createElement(n.tr,null,s.createElement(n.td,null,"rvm use 1.9.3@jekyll --default"),s.createElement(n.td,null,"использовать версию ruby 1.9.3 c gemset jekyll по умолчанию")),s.createElement(n.tr,null,s.createElement(n.td,null,"rvm use system"),s.createElement(n.td,null,"использовать системную версию ruby")))),"\n",s.createElement(n.h2,{id:"создание-отдельного-окружения-для-проекта",style:{position:"relative"}},s.createElement(n.a,{href:"#%D1%81%D0%BE%D0%B7%D0%B4%D0%B0%D0%BD%D0%B8%D0%B5-%D0%BE%D1%82%D0%B4%D0%B5%D0%BB%D1%8C%D0%BD%D0%BE%D0%B3%D0%BE-%D0%BE%D0%BA%D1%80%D1%83%D0%B6%D0%B5%D0%BD%D0%B8%D1%8F-%D0%B4%D0%BB%D1%8F-%D0%BF%D1%80%D0%BE%D0%B5%D0%BA%D1%82%D0%B0","aria-label":"создание отдельного окружения для проекта permalink",className:"anchor before"},s.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"Создание отдельного окружения для проекта"),"\n",s.createElement(n.p,null,"Бывают случаи, когда необходимо не просто использовать разные версии ruby, но и разные версии gemset'ов для разных проектов. В этом посильную помощь может оказать создание своего окружения для каждого из проектов."),"\n",s.createElement(n.p,null,"В примере выше мы создали gemset ",s.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">jekyll</code>'}}),", который использует версию ruby 1.9.3 и собственный набор gem'ов. Теперь у нас имеется два пути для работы с ним."),"\n",s.createElement(n.p,null,s.createElement(n.strong,null,"Переключение между gemset'ами")),"\n",s.createElement(n.p,null,"Во-первых, можно переключаться между gemsets при необходимости."),"\n",s.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="shell"><pre class="language-shell"><code class="language-shell">$ rvm gemset use global\n$ rvm gemset use jekyll</code></pre></div>'}}),"\n",s.createElement(n.p,null,s.createElement(n.strong,null,"Окружение?")),"\n",s.createElement(n.p,null,"Но зачастую быстрее один раз внести необходимые настройки. Для этого следует создать два файла в каталоге с проектом: ",s.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">.ruby-gemset</code>'}})," и ",s.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">.ruby-version</code>'}}),", куда и поместить информацию об используемом в проекте gemset'е и версии ruby соответственно."),"\n",s.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="shell"><pre class="language-shell"><code class="language-shell">$ <span class="token function">cat</span> ~/workspace/jekyll/.ruby-gemset\njekyll\n\n$ <span class="token function">cat</span> ~/workspace/jekyll/.ruby-version\nruby-1.9.3-p448</code></pre></div>'}}),"\n",s.createElement(n.p,null,"Теперь достаточно просто зайти в директорию проекта, и нужные нам параметры будут установлены автоматически."),"\n",s.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="shell"><pre class="language-shell"><code class="language-shell">$ <span class="token builtin class-name">cd</span> workspace/jekyll\n$ rvm list\n\n<span class="token operator">=</span><span class="token operator">></span> ruby-1.9.3-p448 <span class="token punctuation">[</span> x86_64 <span class="token punctuation">]</span>\n * ruby-2.0.0-p247 <span class="token punctuation">[</span> x86_64 <span class="token punctuation">]</span>\n\n<span class="token comment"># => - current</span>\n<span class="token comment"># =* - current &amp;&amp; default</span>\n<span class="token comment">#  * - default</span></code></pre></div>'}}),"\n",s.createElement(n.p,null,"То есть, если вы использовали версию ruby 2, после перехода в каталог с проектом, она автоматически изменится на версию, указанную в ",s.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">.ruby-version</code>'}}),", что достаточно удобно."))}var r=function(e){void 0===e&&(e={});const{wrapper:n}=Object.assign({},(0,t.MN)(),e.components);return n?s.createElement(n,e,s.createElement(l,e)):l(e)},c=a(7792),p=a(7619);function m(e){var n,a;let{data:{mdx:t},children:l,pageContext:{prev:r,next:m}}=e;const{h1:o,title:u,description:g,image:i,table_of_contents:d}=t.frontmatter;return(0,s.useEffect)((()=>{(0,p.K)()}),[]),s.createElement(s.Fragment,null,s.createElement(c._W,{h1:o,title:u,description:g,image:null===(n=t.frontmatter.image)||void 0===n?void 0:n.publicURL},s.createElement(c.MV,{post:t.frontmatter,imageData:null==i||null===(a=i.childImageSharp)||void 0===a?void 0:a.gatsbyImageData},d?s.createElement(c.G8,{headings:t.tableOfContents}):null,s.createElement("div",{className:"page__content"},l,s.createElement(c.Mf,{prev:r,next:m})),s.createElement(c.QZ,null))))}function o(e){return s.createElement(m,e,s.createElement(r,e))}},8876:function(e,n,a){a.d(n,{MN:function(){return l}});var t=a(4424);const s=t.createContext({});function l(e){const n=t.useContext(s);return t.useMemo((()=>"function"==typeof e?e(n):{...n,...e}),[n,e])}}}]);