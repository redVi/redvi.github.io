"use strict";(self.webpackChunkgatsby_blog=self.webpackChunkgatsby_blog||[]).push([[2192],{4298:function(e,a,n){n.r(a),n.d(a,{Head:function(){return c.Ss},default:function(){return i}});var s=n(8876),t=n(4424);function l(e){const a=Object.assign({p:"p",h2:"h2",a:"a",span:"span"},(0,s.MN)(),e.components);return t.createElement(t.Fragment,null,t.createElement(a.p,null,'Как правило, то, чем мы собираемся сегодня заняться, не приносит никакой пользы,\nкроме разве что эстетической. Но иногда хочется красоты. В том числе и при\nстартовой загрузке системы. Все user-friendly дистрибутивы балуют своих\nпользователей симпатичными графическими заставками и последним это,\nвроде бы, нравится. Что касается пользователей дистрибутивов типа\n"сделай сам", изначально заставка при загрузке считается лишней и не ставится\nпо-умолчанию. Но мы можем это легко исправить. В течение десяти-пятнадцати минут.\nТем, кто хотел бы настроить fbsplash, посвящается. Начнём.'),"\n",t.createElement(a.h2,{id:"настройки-ядра",style:{position:"relative"}},t.createElement(a.a,{href:"#%D0%BD%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B9%D0%BA%D0%B8-%D1%8F%D0%B4%D1%80%D0%B0","aria-label":"настройки ядра permalink",className:"anchor before"},t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"Настройки ядра"),"\n",t.createElement(a.p,null,"Входим в директорию с исходниками ядра, запускаем ",t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">menuconfig</code>'}}),":"),"\n",t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="shell"><pre class="language-shell"><code class="language-shell"><span class="token comment"># cd /usr/src/linux-3.8.2-gentoo/</span>\n<span class="token comment"># make menuconfig</span></code></pre></div>'}}),"\n",t.createElement(a.p,null,"Надо отметить, что рекомендуемое в большинстве источников включение initramfs\nсовершенно необязательно для наших целей (не будет splash-картинки с начала\nзагрузки), у автора этих строк работает и без него. Если читатель собирается\nпоступить также, первые два блока — ",t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">General Setup</code>'}})," и ",t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">Device Drivers</code>'}})," — можно\nсмело игнорировать:"),"\n",t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">General setup  ---\x3e\n    [*] Initial RAM filesystem and RAM disk (initramfs/initrd) support\nDevice Drivers  ---\x3e\n    [*] Block devices  ---\x3e\n        &lt;*>   RAM block device support\n\nDevice Drivers  ---\x3e\n    Graphics support  ---\x3e\n        {*} Support for frame buffer devices  ---\x3e\n            *** Frame buffer hardware drivers ***</code></pre></div>'}}),"\n",t.createElement(a.p,null,"Готово. Собираем ядро:"),"\n",t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="shell"><pre class="language-shell"><code class="language-shell"><span class="token comment"># make bzImage modules modules_install install</span></code></pre></div>'}}),"\n",t.createElement(a.p,null,"Пока на этом всё. Займёмся поиском и установкой нужного софта."),"\n",t.createElement(a.h2,{id:"настройки-fbsplash",style:{position:"relative"}},t.createElement(a.a,{href:"#%D0%BD%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B9%D0%BA%D0%B8-fbsplash","aria-label":"настройки fbsplash permalink",className:"anchor before"},t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"Настройки fbsplash"),"\n",t.createElement(a.p,null,"Скачиваем нужные заставки. Можно найти стандартные из репозитария gentoo,\nможно поставить другие. Пойдём по второму пути."),"\n",t.createElement(a.p,null,"Скачайте ",t.createElement(a.a,{href:"http://www.mediafire.com/?0ga699ppbi41a2w",target:"_blank",rel:"nofollow"},"этот файл"),". Имеющиеся\nтам разрешения экрана:"),"\n",t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">1280×800\n1024×768\n1280×1024\n1600×1200\n1680×1050\n1440×900</code></pre></div>'}}),"\n",t.createElement(a.p,null,"Не будет большой беды, если вашего разрешения нет. Это исправляется путём правки файла ",t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">.cfg</code>'}})," и переименованием его. Пример для экрана с разрешением 1366x768:"),"\n",t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash"><span class="token comment"># 1440x900.cfg</span>\n<span class="token comment">#</span>\n<span class="token assign-left variable">bgcolor</span><span class="token operator">=</span><span class="token number">0</span>\n\n<span class="token assign-left variable">tx</span><span class="token operator">=</span><span class="token number">32</span>\n<span class="token assign-left variable">ty</span><span class="token operator">=</span><span class="token number">27</span>\n<span class="token assign-left variable">tw</span><span class="token operator">=</span><span class="token number">1305</span>\n<span class="token assign-left variable">th</span><span class="token operator">=</span><span class="token number">684</span>\n\n<span class="token assign-left variable">text_x</span><span class="token operator">=</span><span class="token number">7</span>\n<span class="token assign-left variable">text_y</span><span class="token operator">=</span><span class="token number">741</span>\n<span class="token assign-left variable">text_size</span><span class="token operator">=</span><span class="token number">13</span>\n<span class="token assign-left variable">text_color</span><span class="token operator">=</span>0xdedede\n\n<span class="token assign-left variable">pic</span><span class="token operator">=</span>/etc/splash/powered_by_gentoo/images/verbose_1366x768.jpg\n<span class="token assign-left variable">silentpic</span><span class="token operator">=</span>/etc/splash/powered_by_gentoo/images/silent_1366x768.jpg\n\n<span class="token comment"># progress bar</span>\nbox silent noover <span class="token number">0</span> <span class="token number">761</span> <span class="token number">1305</span> <span class="token number">768</span> <span class="token comment">#221f29</span>\nbox silent inter <span class="token number">0</span> <span class="token number">762</span> <span class="token number">0</span> <span class="token number">767</span> <span class="token comment">#221f29</span>\nbox silent <span class="token number">0</span> <span class="token number">761</span> <span class="token number">1305</span> <span class="token number">767</span> <span class="token comment">#ececec</span>\n\n<span class="token comment"># border of the progress bar</span>\nbox silent <span class="token number">0</span> <span class="token number">761</span> <span class="token number">1305</span> <span class="token number">761</span> <span class="token comment">#221f29</span>\nbox silent <span class="token number">0</span> <span class="token number">664</span> <span class="token number">1305</span> <span class="token number">664</span> <span class="token comment">#221f29</span>\nbox silent <span class="token number">0</span> <span class="token number">664</span> <span class="token number">0</span> <span class="token number">664</span> <span class="token comment">#221f29</span>\nbox silent <span class="token number">1305</span> <span class="token number">664</span> <span class="token number">1305</span> <span class="token number">664</span> <span class="token comment">#221f29</span></code></pre></div>'}}),"\n",t.createElement(a.p,null,"Переименовываем:"),"\n",t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="shell"><pre class="language-shell"><code class="language-shell">$ <span class="token function">mv</span> 1440x900.cfg 1366x768.cfg</code></pre></div>'}}),"\n",t.createElement(a.p,null,"Теперь следует изменить в графическом редакторе размер изображений ",t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">silent_1440x900.jpg</code>'}})," и ",t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">verbose_1440x900.jpg</code>'}})," на свои, и также переименовать их."),"\n",t.createElement(a.p,null,"Обеспечить красоту призван патч ",t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">bootsplash</code>'}}),". Для старых версий ядра его придётся качать отдельно, в новые ядра (3.x ?) он уже включен. Также устанавливаем ",t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">splashutils</code>'}}),", поправив флаги в случае, если того требует emerge:"),"\n",t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="shell"><pre class="language-shell"><code class="language-shell">$ emerge <span class="token parameter variable">-va</span> splashutils\n<span class="token comment"># emerge splashutils</span></code></pre></div>'}}),"\n",t.createElement(a.p,null,"Распаковываем наши изображения в директорию ",t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">/etc/splash/</code>'}})," (или копируем туда свои):"),"\n",t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="shell"><pre class="language-shell"><code class="language-shell"><span class="token comment"># tar xvzf powered_by_gentoo_v0.7.tar.gz -C /etc/splash</span></code></pre></div>'}}),"\n",t.createElement(a.p,null,"Наиболее удобным способом для создания initial ram filesystem автор считает использование ",t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">genkernel</code>'}}),", поэтому решившим собрать ядро с поддержкой initramfs рекомендуется ставить его и делать всё в соответствии со своими настройками. Пример:"),"\n",t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="shell"><pre class="language-shell"><code class="language-shell"><span class="token comment"># emerge genkernel</span>\n<span class="token comment"># cd /usr/src/linux-3.8.2-gentoo/</span>\n<span class="token comment"># genkernel initramfs --splash=powered_by_gentoo --splash-res=1366x768</span></code></pre></div>'}}),"\n",t.createElement(a.p,null,"Дописываем к строке загрузчика в ",t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">/boot/grub/menu.lst</code>'}})," (справедливо для grub-legasy):"),"\n",t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash"><span class="token comment"># menu.lst</span>\n<span class="token comment">#</span>\ndefault <span class="token number">0</span>\n<span class="token function">timeout</span> <span class="token number">30</span>\n<span class="token assign-left variable">splashimage</span><span class="token operator">=</span><span class="token punctuation">(</span>hd0,1<span class="token punctuation">)</span>/boot/grub/splash.xpm.gz\ntitle Gentoo Linux <span class="token number">3.8</span>.2-gentoo-iniram root <span class="token punctuation">(</span>hd0,1<span class="token punctuation">)</span>\nkernel /boot/vmlinuz-3.8.2-gentoo <span class="token assign-left variable">root</span><span class="token operator">=</span>/dev/ram0 <span class="token assign-left variable">real_root</span><span class="token operator">=</span>/dev/sda3 <span class="token assign-left variable">splash</span><span class="token operator">=</span>silent,theme:powered_by_gentoo <span class="token assign-left variable">console</span><span class="token operator">=</span>tty1\ninitrd /boot/initramfs-genkernel-x86_64-3.8.2-gentoo</code></pre></div>'}}),"\n",t.createElement(a.p,null,"Если intramfs не используется, прописывать всё то же самое, но без ",t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">root=/dev/ram0 real_root=/dev/sda3</code>'}})," и без указания последней строки."),"\n",t.createElement(a.p,null,"В случае с Grub2:"),"\n",t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash"><span class="token comment"># /etc/default/grub</span>\n<span class="token assign-left variable">GRUB_DISTRIBUTOR</span><span class="token operator">=</span><span class="token string">"Gentoo"</span>\n\n<span class="token assign-left variable">GRUB_DEFAULT</span><span class="token operator">=</span><span class="token number">0</span>\n<span class="token assign-left variable">GRUB_HIDDEN_TIMEOUT</span><span class="token operator">=</span><span class="token number">0</span>\n<span class="token assign-left variable">GRUB_HIDDEN_TIMEOUT_QUIET</span><span class="token operator">=</span>true\n<span class="token assign-left variable">GRUB_TIMEOUT</span><span class="token operator">=</span><span class="token number">10</span>\n<span class="token assign-left variable">GRUB_CMDLINE_LINUX_DEFAULT</span><span class="token operator">=</span>"vga<span class="token operator">=</span>0x0362 <span class="token assign-left variable">splash</span><span class="token operator">=</span>silent,theme:powered_by_gentoo <span class="token assign-left variable">console</span><span class="token operator">=</span>tty1 quiet\n<span class="token assign-left variable">GRUB_GFXPAYLOAD_LINUX</span><span class="token operator">=</span>1024x768x24\n<span class="token assign-left variable">GRUB_GFXMODE</span><span class="token operator">=</span>1024x768x24</code></pre></div>'}}),"\n",t.createElement(a.p,null,"Перезагружаемся. Наслаждаемся стартовыми красотами."),"\n",t.createElement(a.p,null,"silent mode"),"\n",t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<span\n      class="gatsby-resp-image-wrapper"\n      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1024px; flex:2;"\n    >\n      <span\n    class="gatsby-resp-image-background-image"\n    style="padding-bottom: 62.66666666666667%; position: relative; bottom: 0; left: 0; display: block;"\n  ></span>\n  <picture>\n          <source\n              srcset="/static/3d9af5949b0a3da27c24328277cfa165/e93cc/fb_silent.webp 300w,\n/static/3d9af5949b0a3da27c24328277cfa165/b0544/fb_silent.webp 600w,\n/static/3d9af5949b0a3da27c24328277cfa165/53334/fb_silent.webp 1024w"\n              sizes="(max-width: 1024px) 100vw, 1024px"\n              type="image/webp"\n            />\n          <source\n            srcset="/static/3d9af5949b0a3da27c24328277cfa165/73b64/fb_silent.jpg 300w,\n/static/3d9af5949b0a3da27c24328277cfa165/3ad8d/fb_silent.jpg 600w,\n/static/3d9af5949b0a3da27c24328277cfa165/c3413/fb_silent.jpg 1024w"\n            sizes="(max-width: 1024px) 100vw, 1024px"\n            type="image/jpeg"\n          />\n          <img\n            class="gatsby-resp-image-image"\n            src="/static/3d9af5949b0a3da27c24328277cfa165/c3413/fb_silent.jpg"\n            alt="silent mode"\n            title=""\n            loading="lazy"\n            decoding="async"\n            style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"\n          />\n        </picture>\n    </span>'}}),"\n",t.createElement(a.p,null,"verbose mode"),"\n",t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<span\n      class="gatsby-resp-image-wrapper"\n      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1024px; flex:2;"\n    >\n      <span\n    class="gatsby-resp-image-background-image"\n    style="padding-bottom: 62.66666666666667%; position: relative; bottom: 0; left: 0; display: block;"\n  ></span>\n  <picture>\n          <source\n              srcset="/static/38244c87fd41a1c75c8d5ae25b3735ff/e93cc/fb_verbose.webp 300w,\n/static/38244c87fd41a1c75c8d5ae25b3735ff/b0544/fb_verbose.webp 600w,\n/static/38244c87fd41a1c75c8d5ae25b3735ff/53334/fb_verbose.webp 1024w"\n              sizes="(max-width: 1024px) 100vw, 1024px"\n              type="image/webp"\n            />\n          <source\n            srcset="/static/38244c87fd41a1c75c8d5ae25b3735ff/73b64/fb_verbose.jpg 300w,\n/static/38244c87fd41a1c75c8d5ae25b3735ff/3ad8d/fb_verbose.jpg 600w,\n/static/38244c87fd41a1c75c8d5ae25b3735ff/c3413/fb_verbose.jpg 1024w"\n            sizes="(max-width: 1024px) 100vw, 1024px"\n            type="image/jpeg"\n          />\n          <img\n            class="gatsby-resp-image-image"\n            src="/static/38244c87fd41a1c75c8d5ae25b3735ff/c3413/fb_verbose.jpg"\n            alt="fbspash verbose mode"\n            title=""\n            loading="lazy"\n            decoding="async"\n            style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"\n          />\n        </picture>\n    </span>'}}),"\n",t.createElement(a.p,null,"Готово! При нажатии клавиши ",t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">F2</code>'}})," вы сможете перейти в режим verbose."),"\n",t.createElement(a.p,null,"Кстати, вопреки утверждениям сторонников systemd, которые как мантру повторяют, что systemd загружает ОС намного быстрее, OpenRC не дал автору сего поста вдоволь налюбоваться содеянным. Gentoo загрузилась очень быстро."),"\n",t.createElement(a.h2,{id:"мы-пойдём-дальше-заставка-в-tty",style:{position:"relative"}},t.createElement(a.a,{href:"#%D0%BC%D1%8B-%D0%BF%D0%BE%D0%B9%D0%B4%D1%91%D0%BC-%D0%B4%D0%B0%D0%BB%D1%8C%D1%88%D0%B5-%D0%B7%D0%B0%D1%81%D1%82%D0%B0%D0%B2%D0%BA%D0%B0-%D0%B2-tty","aria-label":"мы пойдём дальше заставка в tty permalink",className:"anchor before"},t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"Мы пойдём дальше. Заставка в tty"),"\n",t.createElement(a.p,null,"Да, все дистрибутивы, ориентированные на новичков, имеют splash-картинку. Но многие ли из них могут похвастаться красивым терминалом? Не эмулятором терминала, а самим терминалом. Мы же пойдём дальше и настроим эту фичу."),"\n",t.createElement(a.p,null,"Это уже не укладывается в указанные в начале поста 10-15 минут. Это дополнительное действо, вы можете от него отказаться."),"\n",t.createElement(a.p,null,"В ядре должно быть отключено!:"),"\n",t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">Device Drivers  ---\x3e\n    Graphics support  ---\x3e\n        Support for frame buffer devices\n            [ ] Enable Tile Blitting Support\n</code></pre></div>'}}),"\n",t.createElement(a.p,null,"И, наоборот, включена опция:"),"\n",t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">Graphics support  ---\x3e\n    Console display driver support\n        [*] Support for the Framebuffer Console decorations</code></pre></div>'}}),"\n",t.createElement(a.p,null,"Вот так:"),"\n",t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<span\n      class="gatsby-resp-image-wrapper"\n      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 620px; flex:2;"\n    >\n      <span\n    class="gatsby-resp-image-background-image"\n    style="padding-bottom: 59.66666666666667%; position: relative; bottom: 0; left: 0; display: block;"\n  ></span>\n  <picture>\n          <source\n              srcset="/static/ba30d99e1901108aaea4cd48b8e5f36f/e93cc/vesa_vga.webp 300w,\n/static/ba30d99e1901108aaea4cd48b8e5f36f/b0544/vesa_vga.webp 600w,\n/static/ba30d99e1901108aaea4cd48b8e5f36f/27f11/vesa_vga.webp 620w"\n              sizes="(max-width: 620px) 100vw, 620px"\n              type="image/webp"\n            />\n          <source\n            srcset="/static/ba30d99e1901108aaea4cd48b8e5f36f/eed55/vesa_vga.png 300w,\n/static/ba30d99e1901108aaea4cd48b8e5f36f/7491f/vesa_vga.png 600w,\n/static/ba30d99e1901108aaea4cd48b8e5f36f/a05ab/vesa_vga.png 620w"\n            sizes="(max-width: 620px) 100vw, 620px"\n            type="image/png"\n          />\n          <img\n            class="gatsby-resp-image-image"\n            src="/static/ba30d99e1901108aaea4cd48b8e5f36f/a05ab/vesa_vga.png"\n            alt="vesa vga"\n            title="vesa vga"\n            loading="lazy"\n            decoding="async"\n            style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"\n          />\n        </picture>\n    </span>'}}),"\n",t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<span\n      class="gatsby-resp-image-wrapper"\n      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 618px; flex:2;"\n    >\n      <span\n    class="gatsby-resp-image-background-image"\n    style="padding-bottom: 55.99999999999999%; position: relative; bottom: 0; left: 0; display: block;"\n  ></span>\n  <picture>\n          <source\n              srcset="/static/5bf0a129ffb6e8c530bf93b97276fff1/e93cc/framebuffer.webp 300w,\n/static/5bf0a129ffb6e8c530bf93b97276fff1/b0544/framebuffer.webp 600w,\n/static/5bf0a129ffb6e8c530bf93b97276fff1/216aa/framebuffer.webp 618w"\n              sizes="(max-width: 618px) 100vw, 618px"\n              type="image/webp"\n            />\n          <source\n            srcset="/static/5bf0a129ffb6e8c530bf93b97276fff1/eed55/framebuffer.png 300w,\n/static/5bf0a129ffb6e8c530bf93b97276fff1/7491f/framebuffer.png 600w,\n/static/5bf0a129ffb6e8c530bf93b97276fff1/34b6e/framebuffer.png 618w"\n            sizes="(max-width: 618px) 100vw, 618px"\n            type="image/png"\n          />\n          <img\n            class="gatsby-resp-image-image"\n            src="/static/5bf0a129ffb6e8c530bf93b97276fff1/34b6e/framebuffer.png"\n            alt="framebuffer"\n            title="framebuffer"\n            loading="lazy"\n            decoding="async"\n            style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"\n          />\n        </picture>\n    </span>'}}),"\n",t.createElement(a.p,null,"Теперь пересоберите ",t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">splashutils</code>'}})," с флагом ",t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">"fbcondecor"</code>'}})," или добавьте этот флаг в ",t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">make.conf</code>'}})," и скомандуйте:"),"\n",t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="shell"><pre class="language-shell"><code class="language-shell"><span class="token comment"># emerge --update --newuse --deep @world</span></code></pre></div>'}}),"\n",t.createElement(a.p,null,"Следующие шаги достаточно просты:"),"\n",t.createElement(a.p,null,"Прописать в ",t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">/etc/conf.d/fbcondecor</code>'}}),":"),"\n",t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash"><span class="token comment">#fbcondecor</span>\n<span class="token comment">#</span>\n<span class="token assign-left variable">FBCONDECOR_TTYS</span><span class="token operator">=</span><span class="token string">"1 2 3 4 5 6"</span>\n<span class="token assign-left variable">FBCONDECOR_TTY_MAP</span><span class="token operator">=</span><span class="token string">"1:powered_by_gentoo 2:powered_by_gentoo 3:powered_by_gentoo 4:powered_by_gentoo 5:powered_by_gentoo 6:powered_by_gentoo"</span></code></pre></div>'}}),"\n",t.createElement(a.p,null,"где TTYS — терминалы, на которых будет запускаться изображение"),"\n",t.createElement(a.p,null,'TTY_MAP — отображение в формате "номер tty:тема"'),"\n",t.createElement(a.p,null,"Как вы уже, вероятно, поняли на разных терминалах могут быть разные темы."),"\n",t.createElement(a.p,null,"Стартовать fbcondecor при запуске системы:"),"\n",t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="shell"><pre class="language-shell"><code class="language-shell"><span class="token comment"># rc-update add fbcondecor default</span></code></pre></div>'}}),"\n",t.createElement(a.p,null,"Менять тему можно так:"),"\n",t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="shell"><pre class="language-shell"><code class="language-shell">$ splash_manager <span class="token parameter variable">-c</span> <span class="token builtin class-name">set</span> <span class="token parameter variable">-t</span> powered_by_gentoo <span class="token parameter variable">--tty</span><span class="token operator">=</span><span class="token number">2</span></code></pre></div>'}}),"\n",t.createElement(a.p,null,"где powered_by_gentoo — название темы, а --tty=2 — номер терминала, где будет запущена тема."),"\n",t.createElement(a.p,null,"И последний штрих: поправить загрузчик. На этот раз пример для ядра без initramfs:"),"\n",t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash"><span class="token comment"># menu.lst</span>\n<span class="token comment">#</span>\ntitle Gentoo Linux <span class="token number">3.8</span>.2-gentoo\nroot <span class="token punctuation">(</span>hd0,1<span class="token punctuation">)</span>\nkernel /boot/vmlinuz-3.8.2-gentoo <span class="token assign-left variable">root</span><span class="token operator">=</span>/dev/sda3 <span class="token assign-left variable">splash</span><span class="token operator">=</span>silent,theme:powered_by_gentoo <span class="token assign-left variable">console</span><span class="token operator">=</span>tty1 <span class="token assign-left variable">video</span><span class="token operator">=</span>vesafb:ywrap,mtrr:3 <span class="token assign-left variable">vga</span><span class="token operator">=</span>0x0362</code></pre></div>'}}),"\n",t.createElement(a.p,null,"Параметр ",t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">vga</code>'}})," должен быть указан для вашего разрешения экрана. В примере это 1366x678."),"\n",t.createElement(a.p,null,"Итог:"),"\n",t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<span\n      class="gatsby-resp-image-wrapper"\n      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; flex:1;"\n    >\n      <span\n    class="gatsby-resp-image-background-image"\n    style="padding-bottom: 90.33333333333331%; position: relative; bottom: 0; left: 0; display: block;"\n  ></span>\n  <picture>\n          <source\n              srcset="/static/880750cb11540093280dba7c3dc8700a/e93cc/powered_by_gentoo.webp 300w,\n/static/880750cb11540093280dba7c3dc8700a/b0544/powered_by_gentoo.webp 600w,\n/static/880750cb11540093280dba7c3dc8700a/8d2ea/powered_by_gentoo.webp 800w"\n              sizes="(max-width: 800px) 100vw, 800px"\n              type="image/webp"\n            />\n          <source\n            srcset="/static/880750cb11540093280dba7c3dc8700a/73b64/powered_by_gentoo.jpg 300w,\n/static/880750cb11540093280dba7c3dc8700a/3ad8d/powered_by_gentoo.jpg 600w,\n/static/880750cb11540093280dba7c3dc8700a/c60e9/powered_by_gentoo.jpg 800w"\n            sizes="(max-width: 800px) 100vw, 800px"\n            type="image/jpeg"\n          />\n          <img\n            class="gatsby-resp-image-image"\n            src="/static/880750cb11540093280dba7c3dc8700a/c60e9/powered_by_gentoo.jpg"\n            alt="powered_by_gentoo"\n            title=""\n            loading="lazy"\n            decoding="async"\n            style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"\n          />\n        </picture>\n    </span>'}}),"\n",t.createElement(a.p,null,"Теперь можно отказаться от мыши и иксов ;)"))}var p=function(e){void 0===e&&(e={});const{wrapper:a}=Object.assign({},(0,s.MN)(),e.components);return a?t.createElement(a,e,t.createElement(l,e)):l(e)},c=n(7792),o=n(7619);function r(e){var a,n;let{data:{mdx:s},children:l,pageContext:{prev:p,next:r}}=e;const{h1:i,title:g,description:m,image:d,table_of_contents:b}=s.frontmatter;return(0,t.useEffect)((()=>{(0,o.K)()}),[]),t.createElement(t.Fragment,null,t.createElement(c._W,{h1:i,title:g,description:m,image:null===(a=s.frontmatter.image)||void 0===a?void 0:a.publicURL},t.createElement(c.MV,{post:s.frontmatter,imageData:null==d||null===(n=d.childImageSharp)||void 0===n?void 0:n.gatsbyImageData},b?t.createElement(c.G8,{headings:s.tableOfContents}):null,t.createElement("div",{className:"page__content"},l,t.createElement(c.Mf,{prev:p,next:r})),t.createElement(c.QZ,null))))}function i(e){return t.createElement(r,e,t.createElement(p,e))}},8876:function(e,a,n){n.d(a,{MN:function(){return l}});var s=n(4424);const t=s.createContext({});function l(e){const a=s.useContext(t);return s.useMemo((()=>"function"==typeof e?e(a):{...a,...e}),[a,e])}}}]);