"use strict";(self.webpackChunkgatsby_blog=self.webpackChunkgatsby_blog||[]).push([[6076],{9480:function(e,n,t){t.r(n),t.d(n,{Head:function(){return s.Ss},default:function(){return u}});var a=t(8876),l=t(4424);function r(e){const n=Object.assign({p:"p",h2:"h2",a:"a",span:"span",pre:"pre",code:"code",h3:"h3"},(0,a.MN)(),e.components);return l.createElement(l.Fragment,null,l.createElement(n.p,null,"Не так давно в archlinux всё же прекратили поддержку grub-legacy.\nТеперь выбор варьируется между двумя загрузчиками: Syslinux и Grub2.\nКак ясно из названия поста, автор отдаёт предпочтение второму варианту.\nГоворят, syslinux проще, поэтому большинство пользователей может обратить\nвнимание на него.  А вот владельцам UEFI BIOS рекомендуют второй граб."),"\n",l.createElement(n.h2,{id:"установка",style:{position:"relative"}},l.createElement(n.a,{href:"#%D1%83%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%BA%D0%B0","aria-label":"установка permalink",className:"anchor before"},l.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"Установка"),"\n",l.createElement(n.pre,null,l.createElement(n.code,{className:"language-shell"},"# pacman -S grub-bios grub2-common\n# grub-install /dev/sda\n# grub-mkconfig -o /boot/grub/grub.cfg\n")),"\n",l.createElement(n.p,null,"Теперь заглянем в файл ",l.createElement(n.code,null,"/etc/default/grub")),"\n",l.createElement(n.pre,null,l.createElement(n.code,{className:"language-bash"},'# /etc/default/grub\n\nGRUB_DEFAULT=0 # загружаемый по умолчанию пункт меню, 0 - первый пункт\nGRUB_TIMEOUT=5 # тайм аут, когда можно выбрать другой пункт, 5 - 5 секунд\nGRUB_DISTRIBUTOR="Arch" # "поставщик" вашей версии grub\'а\nGRUB_CMDLINE_LINUX_DEFAULT="quiet acpi" # параметры загрузки для обычной загрузки\nGRUB_CMDLINE_LINUX=""  # параметры загрузки (обычной и в режиме восстановления)\nGRUB_PRELOAD_MODULES="part_gpt part_msdos" # дополнительные модули загрузки\n\nGRUB_TERMINAL_INPUT=console # использование консоли\n\n# разрешение графического меню (800х600, например)\nGRUB_GFXMODE=auto\n\n# будет ли включен режим восстановления\nGRUB_DISABLE_RECOVERY=true\n')),"\n",l.createElement(n.p,null,"Подробнее можно почитать ",l.createElement(n.a,{href:"http://ru.wikibooks.org/wiki/Grub_2",target:"_blank",rel:"nofollow"},"здесь"),"."),"\n",l.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<span\n      class="gatsby-resp-image-wrapper"\n      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 500px; flex:2;"\n    >\n      <span\n    class="gatsby-resp-image-background-image"\n    style="padding-bottom: 42%; position: relative; bottom: 0; left: 0; display: block;"\n  ></span>\n  <picture>\n          <source\n              srcset="/static/a62a0c5cae55836d0bf6ee1ec236244f/e93cc/grub2.webp 300w,\n/static/a62a0c5cae55836d0bf6ee1ec236244f/10636/grub2.webp 500w"\n              sizes="(max-width: 500px) 100vw, 500px"\n              type="image/webp"\n            />\n          <source\n            srcset="/static/a62a0c5cae55836d0bf6ee1ec236244f/eed55/grub2.png 300w,\n/static/a62a0c5cae55836d0bf6ee1ec236244f/b30f8/grub2.png 500w"\n            sizes="(max-width: 500px) 100vw, 500px"\n            type="image/png"\n          />\n          <img\n            class="gatsby-resp-image-image"\n            src="/static/a62a0c5cae55836d0bf6ee1ec236244f/b30f8/grub2.png"\n            alt="archlinux_grub"\n            title="archlinux_grub"\n            loading="lazy"\n            decoding="async"\n            style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"\n          />\n        </picture>\n    </span>'}}),"\n",l.createElement(n.h2,{id:"изменение-параметров",style:{position:"relative"}},l.createElement(n.a,{href:"#%D0%B8%D0%B7%D0%BC%D0%B5%D0%BD%D0%B5%D0%BD%D0%B8%D0%B5-%D0%BF%D0%B0%D1%80%D0%B0%D0%BC%D0%B5%D1%82%D1%80%D0%BE%D0%B2","aria-label":"изменение параметров permalink",className:"anchor before"},l.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"Изменение параметров:"),"\n",l.createElement(n.h3,{id:"настройка-яркости-экрана",style:{position:"relative"}},l.createElement(n.a,{href:"#%D0%BD%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B9%D0%BA%D0%B0-%D1%8F%D1%80%D0%BA%D0%BE%D1%81%D1%82%D0%B8-%D1%8D%D0%BA%D1%80%D0%B0%D0%BD%D0%B0","aria-label":"настройка яркости экрана permalink",className:"anchor before"},l.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"Настройка яркости экрана:"),"\n",l.createElement(n.pre,null,l.createElement(n.code,{className:"language-bash"},'# /etc/default/grub:\n\nGRUB_CMDLINE_LINUX_DEFAULT="quiet acpi_backlight=vendor"\n')),"\n",l.createElement(n.p,null,"После чего:"),"\n",l.createElement(n.pre,null,l.createElement(n.code,{className:"language-shell"},"# grub-mkconfig -o /boot/grub/grub.cfg\n")),"\n",l.createElement(n.h3,{id:"загрузка-двух-и-более-операционных-систем",style:{position:"relative"}},l.createElement(n.a,{href:"#%D0%B7%D0%B0%D0%B3%D1%80%D1%83%D0%B7%D0%BA%D0%B0-%D0%B4%D0%B2%D1%83%D1%85-%D0%B8-%D0%B1%D0%BE%D0%BB%D0%B5%D0%B5-%D0%BE%D0%BF%D0%B5%D1%80%D0%B0%D1%86%D0%B8%D0%BE%D0%BD%D0%BD%D1%8B%D1%85-%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC","aria-label":"загрузка двух и более операционных систем permalink",className:"anchor before"},l.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"Загрузка двух и более операционных систем"),"\n",l.createElement(n.pre,null,l.createElement(n.code,{className:"language-shell"},"# pacman -S os-prober\n# grub-mkconfig -o /boot/grub/grub.cfg\n")),"\n",l.createElement(n.p,null,"Распознать имеющиеся ОС должен автоматически. Если этого не произошло, придётся\nдобавить вручную, после чего снова переконфигурировать конфигурационный файл\ngrub."),"\n",l.createElement(n.h3,{id:"как-добавить-windows",style:{position:"relative"}},l.createElement(n.a,{href:"#%D0%BA%D0%B0%D0%BA-%D0%B4%D0%BE%D0%B1%D0%B0%D0%B2%D0%B8%D1%82%D1%8C-windows","aria-label":"как добавить windows permalink",className:"anchor before"},l.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"Как добавить Windows?"),"\n",l.createElement(n.p,null,"В файл ",l.createElement(n.code,null,"/etc/grub.d/40_custom")," внести строки:"),"\n",l.createElement(n.pre,null,l.createElement(n.code,{className:"language-bash"},'menuentry "Microsoft Windows 7 BIOS-MBR" {\n    insmod part_msdos\n    insmod ntfs\n    insmod search_fs_uuid\n    insmod ntldr\n    search --fs-uuid --no-floppy --set=root C474B30B74B2FEEC\n    ntldr /bootmgr\n}\n')),"\n",l.createElement(n.p,null,"где ",l.createElement(n.code,null,"fs-uuid")," - ID вашего раздела с Windows. Определить его можно с помощью команды ",l.createElement(n.code,null,"blkid"),":"),"\n",l.createElement(n.pre,null,l.createElement(n.code,{className:"language-shell"},'# sudo blkid\n/dev/sda1: UUID="C474B30B74B2FEEC" TYPE="ntfs"\n')),"\n",l.createElement(n.p,null,"После чего обновить конфигурацию grub2:"),"\n",l.createElement(n.pre,null,l.createElement(n.code,{className:"language-shell"},"# grub-mkconfig -o /boot/grub/grub.cfg\n")),"\n",l.createElement(n.h2,{id:"украшательства",style:{position:"relative"}},l.createElement(n.a,{href:"#%D1%83%D0%BA%D1%80%D0%B0%D1%88%D0%B0%D1%82%D0%B5%D0%BB%D1%8C%D1%81%D1%82%D0%B2%D0%B0","aria-label":"украшательства permalink",className:"anchor before"},l.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"Украшательства"),"\n",l.createElement(n.p,null,"Для Archlinux можно найти неплохие темы в AUR."),"\n",l.createElement(n.p,null,"Чтобы поставить тему, послужившую иллюстрацией к данному посту, проделываем\nследующие шаги - установим тему и скопируем её в директорию с grub:"),"\n",l.createElement(n.pre,null,l.createElement(n.code,{className:"language-shell"},"$ yaourt grub2-theme-archlinux\n# cp -r /usr/share/grub/themes/Archlinux /boot/grub/themes/\n")),"\n",l.createElement(n.p,null,"Открываем в текстовом редакторе ",l.createElement(n.code,null,"/etc/default/grub"),":"),"\n",l.createElement(n.pre,null,l.createElement(n.code,{className:"language-bash"},'# /etc/default/grub\n\nGRUB_THEME="/boot/grub/themes/Archlinux/theme.txt"\n')),"\n",l.createElement(n.p,null,"Рекомендуется установить разрешение экрана загрузчика к данной теме:"),"\n",l.createElement(n.pre,null,l.createElement(n.code,null,"GRUB_GFXMODE=1024x768\n")),"\n",l.createElement(n.p,null,"После чего снова:"),"\n",l.createElement(n.pre,null,l.createElement(n.code,{className:"language-shell"},"# grub-mkconfig -o /boot/grub/grub.cfg\nГенерируется grub.cfg …\nНайдена тема: /boot/grub/themes/Archlinux/theme.txt\nНайден образ linux: /boot/vmlinuz-linux\nНайден образ initrd: /boot/initramfs-linux.img\nNo volume groups found\nНайден Windows 7 (loader) на /dev/sda1\nзавершено\n")),"\n",l.createElement(n.p,null,"Также для эстетических целей используется ",l.createElement(n.code,null,"plymouth")," (его часто можно увидеть\nв user-friendly дистрибутивах, например, в ubuntu), но автор сего зверя не\nставит и не рекомендует по одной простой причине: он снижает скорость загрузки."))}var c=function(e){void 0===e&&(e={});const{wrapper:n}=Object.assign({},(0,a.MN)(),e.components);return n?l.createElement(n,e,l.createElement(r,e)):r(e)},s=t(7792),o=t(7619);function i(e){var n,t;let{data:{mdx:a},children:r,pageContext:{prev:c,next:i}}=e;const{h1:u,title:m,description:g,image:h,table_of_contents:d}=a.frontmatter;return(0,l.useEffect)((()=>{(0,o.K)()}),[]),l.createElement(l.Fragment,null,l.createElement(s._W,{h1:u,title:m,description:g,image:null===(n=a.frontmatter.image)||void 0===n?void 0:n.publicURL},l.createElement(s.MV,{post:a.frontmatter,imageData:null==h||null===(t=h.childImageSharp)||void 0===t?void 0:t.gatsbyImageData},d?l.createElement(s.G8,{headings:a.tableOfContents}):null,l.createElement("div",{className:"page__content"},r,l.createElement(s.Mf,{prev:c,next:i})),l.createElement(s.QZ,null))))}function u(e){return l.createElement(i,e,l.createElement(c,e))}},8876:function(e,n,t){t.d(n,{MN:function(){return r}});var a=t(4424);const l=a.createContext({});function r(e){const n=a.useContext(l);return a.useMemo((()=>"function"==typeof e?e(n):{...n,...e}),[n,e])}}}]);