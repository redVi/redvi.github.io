"use strict";(self.webpackChunkgatsby_blog=self.webpackChunkgatsby_blog||[]).push([[9016],{5984:function(e,n,t){t.r(n),t.d(n,{Head:function(){return m.Ss},default:function(){return o}});var a=t(8876),l=t(4424);function c(e){const n=Object.assign({p:"p",h2:"h2",a:"a",span:"span",h3:"h3",pre:"pre",code:"code"},(0,a.MN)(),e.components);return l.createElement(l.Fragment,null,l.createElement(n.p,null,"NPM — пакетный менеджер JavaScript. Он управляет зависимостями как для\nклиентской стороны, так и для серверной. Если вы намерены выложить исходный код\nсвоего проекта и иметь возможность устанавливать его как отдельный компонент,\nлучший способ сделать это — создать пакет."),"\n",l.createElement(n.h2,{id:"что-для-этого-нужно",style:{position:"relative"}},l.createElement(n.a,{href:"#%D1%87%D1%82%D0%BE-%D0%B4%D0%BB%D1%8F-%D1%8D%D1%82%D0%BE%D0%B3%D0%BE-%D0%BD%D1%83%D0%B6%D0%BD%D0%BE","aria-label":"что для этого нужно permalink",className:"anchor before"},l.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"Что для этого нужно?"),"\n",l.createElement(n.p,null,"Для начала установить пакетный менеджер, если это ещё не было сделано. Установка\nзависит от используемой вами операционной системы, описывать её не вижу смысла:\nматериала по этому вопросу предостаточно."),"\n",l.createElement(n.h3,{id:"акканут",style:{position:"relative"}},l.createElement(n.a,{href:"#%D0%B0%D0%BA%D0%BA%D0%B0%D0%BD%D1%83%D1%82","aria-label":"акканут permalink",className:"anchor before"},l.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"Акканут"),"\n",l.createElement(n.p,null,"Первый шаг самый тривиальный. Зарегистрируйтесь на ",l.createElement(n.a,{href:"https://www.npmjs.com/signup",target:"_blank",rel:"nofollow"},"npmjs.com"),".\nПосле этого вы сможете публиковать пакеты от своего имени прямо из командной строки.\nВведите команду:"),"\n",l.createElement(n.pre,null,l.createElement(n.code,{className:"language-shell"},"$ npm login\nUsername: your_name\nPassword:\nEmail: (this IS public) your_name@domain.com\nLogged in on https://registry.npmjs.org/.\n")),"\n",l.createElement(n.h3,{id:"подготовка-проекта-к-публикации",style:{position:"relative"}},l.createElement(n.a,{href:"#%D0%BF%D0%BE%D0%B4%D0%B3%D0%BE%D1%82%D0%BE%D0%B2%D0%BA%D0%B0-%D0%BF%D1%80%D0%BE%D0%B5%D0%BA%D1%82%D0%B0-%D0%BA-%D0%BF%D1%83%D0%B1%D0%BB%D0%B8%D0%BA%D0%B0%D1%86%D0%B8%D0%B8","aria-label":"подготовка проекта к публикации permalink",className:"anchor before"},l.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"Подготовка проекта к публикации"),"\n",l.createElement(n.p,null,"Помимо самого кода, обязательно приложить файл README.md, содержащий описание\nтого как подключить и использовать пакет."),"\n",l.createElement(n.p,null,"Ещё надо обзавестись файлом ",l.createElement(n.code,null,"package.json"),", где хранятся основные сведения о\nпакете и прописаны его зависимости, если таковые имеются. В директории проекта\nсоздаём этот файл командой ",l.createElement(n.code,null,"npm init"),", вносим подходящее описание и консольные\nкоманды в секцию scripts (опять же если они есть):"),"\n",l.createElement(n.pre,null,l.createElement(n.code,{className:"language-json"},'{\n  "name": "mypackage",\n  "version": "1.0.0",\n  "description": "The best package in the world",\n  "main": "index.js",\n  "scripts": {\n    "test": "command for testing package"\n  },\n  "repository": {\n    "type": "git",\n    "url": "git+https://github.com/myname/mypackage.git"\n  },\n  "keywords": [\n    "my",\n    "package"\n  ],\n  "author": "me",\n  "license": "MIT",\n  "bugs": {\n    "url": "https://github.com/myname/mypackage/issues"\n  },\n  "homepage": "https://github.com/myname/mypackage#readme"\n}\n')),"\n",l.createElement(n.p,null,"Осталось только закоммитить изменения и выложить код на github."),"\n",l.createElement(n.h3,{id:"тестируем-пакет",style:{position:"relative"}},l.createElement(n.a,{href:"#%D1%82%D0%B5%D1%81%D1%82%D0%B8%D1%80%D1%83%D0%B5%D0%BC-%D0%BF%D0%B0%D0%BA%D0%B5%D1%82","aria-label":"тестируем пакет permalink",className:"anchor before"},l.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"Тестируем пакет"),"\n",l.createElement(n.p,null,"Всегда тестируйте работоспособность своего творения прежде, чем публиковать\nего в репозиторий npm."),"\n",l.createElement(n.pre,null,l.createElement(n.code,{className:"language-shell"},"# установка пакета из github\n$ npm install mypackage\n\n# или локально с указанием пути к модулю\n$ npm install path_to_mypackage/mypackage\n")),"\n",l.createElement(n.h3,{id:"публикация",style:{position:"relative"}},l.createElement(n.a,{href:"#%D0%BF%D1%83%D0%B1%D0%BB%D0%B8%D0%BA%D0%B0%D1%86%D0%B8%D1%8F","aria-label":"публикация permalink",className:"anchor before"},l.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"Публикация"),"\n",l.createElement(n.p,null,"Находясь в директории проекта, скомандуйте ",l.createElement(n.code,null,"npm publish"),". Вы должны увидеть\nчто-то подобное:"),"\n",l.createElement(n.pre,null,l.createElement(n.code,{className:"language-shell"},"+ mypackage@1.0.0\n")),"\n",l.createElement(n.p,null,"Теперь пакет можно найти в репозитории npm через поиск или по прямому адресу\nnpmjs.com/package/mypackage. Любой может установить его как зависимость своего\nсобственного проекта командой ",l.createElement(n.code,null,"npm install mypackage --save"),"."),"\n",l.createElement(n.p,null,"Если вы дорабатывали программу позже и пакет оказался в неактуальном состоянии,\nизмените версию в ",l.createElement(n.code,null,"package.json")," и снова опубликуйте его через ",l.createElement(n.code,null,"npm publihs"),"."),"\n",l.createElement(n.h2,{id:"es6-модули",style:{position:"relative"}},l.createElement(n.a,{href:"#es6-%D0%BC%D0%BE%D0%B4%D1%83%D0%BB%D0%B8","aria-label":"es6 модули permalink",className:"anchor before"},l.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"ES6-модули"),"\n",l.createElement(n.p,null,"Допустим, нужно использовать не commonJS, а модули ES6. Что тогда? Увы, нам не\nобойтись без транспайлера Babel.JS. Именно с его помощью будут проводиться все\nманипуляции. Ставим необходимые пакеты как зависимости нашей библиотеки."),"\n",l.createElement(n.pre,null,l.createElement(n.code,{className:"language-shell"},"$ npm i --save-dev babel-cli babel-core babel-preset-es2015\n")),"\n",l.createElement(n.p,null,"Также надо создать два каталога: один для исходников, другой — для\nскомпилированной версии скрипта. Это будут ",l.createElement(n.code,null,"src")," и ",l.createElement(n.code,null,"lib")," соответственно."),"\n",l.createElement(n.p,null,"Для удобства пропишите нужные команды в ",l.createElement(n.code,null,"package.json")," своего проекта."),"\n",l.createElement(n.pre,null,l.createElement(n.code,{className:"language-json"},'"scripts": {\n  "compile": "babel --presets es2015 -d lib/ src/",\n  "prepublish": "npm run compile"\n}\n')),"\n",l.createElement(n.p,null,"Первая команда будет собирать файлы ",l.createElement(n.code,null,".es6")," из исходников и\nпомещать их в ",l.createElement(n.code,null,"lib/"),". Вторая — делать то же самое без вашего участия\nпри публикации пакета в npm-репозиторий."),"\n",l.createElement(n.p,null,"Для коректной сборки нужно ещё немного магии. Создать ",l.createElement(n.code,null,".gitignore"),", поместить туда\nкаталог сборки ",l.createElement(n.code,null,"lib/"),". В ",l.createElement(n.code,null,"package.json")," указать главный файл проекта, например:"),"\n",l.createElement(n.pre,null,l.createElement(n.code,{className:"language-json"},'"main": "lib/mylibrary.js"\n')),"\n",l.createElement(n.p,null,"Таким образом, в git находятся только исходники, а при публикации в npm будут\nсобраны и файлы, пропущенные через транспайлер."),"\n",l.createElement(n.p,null,"Для подключения модуля в конкретном проекте теперь можно установить его стандартным\nспособом и импортировать."),"\n",l.createElement(n.pre,null,l.createElement(n.code,{className:"language-js"},"$ npm i --save mylibrary\n\n// подключаем\nimport myfile from 'mylibrary';\n")))}var r=function(e){void 0===e&&(e={});const{wrapper:n}=Object.assign({},(0,a.MN)(),e.components);return n?l.createElement(n,e,l.createElement(c,e)):c(e)},m=t(7792),s=t(7619);function i(e){var n,t;let{data:{mdx:a},children:c,pageContext:{prev:r,next:i}}=e;const{h1:o,title:p,description:h,image:u,table_of_contents:d}=a.frontmatter;return(0,l.useEffect)((()=>{(0,s.K)()}),[]),l.createElement(l.Fragment,null,l.createElement(m._W,{h1:o,title:p,description:h,image:null===(n=a.frontmatter.image)||void 0===n?void 0:n.publicURL},l.createElement(m.MV,{post:a.frontmatter,imageData:null==u||null===(t=u.childImageSharp)||void 0===t?void 0:t.gatsbyImageData},d?l.createElement(m.G8,{headings:a.tableOfContents}):null,l.createElement("div",{className:"page__content"},c,l.createElement(m.Mf,{prev:r,next:i})),l.createElement(m.QZ,null))))}function o(e){return l.createElement(i,e,l.createElement(r,e))}},8876:function(e,n,t){t.d(n,{MN:function(){return c}});var a=t(4424);const l=a.createContext({});function c(e){const n=a.useContext(l);return a.useMemo((()=>"function"==typeof e?e(n):{...n,...e}),[n,e])}}}]);