"use strict";(self.webpackChunkgatsby_blog=self.webpackChunkgatsby_blog||[]).push([[4276],{8300:function(e,n,l){l.r(n),l.d(n,{Head:function(){return m.Ss},default:function(){return s}});var t=l(8876),a=l(4424);function c(e){const n=Object.assign({p:"p",h2:"h2",a:"a",span:"span",pre:"pre",code:"code",ul:"ul",li:"li"},(0,t.MN)(),e.components);return a.createElement(a.Fragment,null,a.createElement(n.p,null,"В этом посте затронем тему записи скринкастов под linux.\nБудет рассмотрено несколько наиболее популярных утилит для захвата\nвидео с монитора компьютера, также обратим внимание на их функционал, для одних детально, для других — поверхностно."),"\n",a.createElement(n.p,null,"Вообще, в linux не так много кандидатов, которые могут устроить нас по всем показателям. Как оказалось, найти адекватную программу для указанных целей достаточно проблематично. Выбраны несколько: старый добрый ffmpeg, небезызвестные XVidCap и recordMyDesktop, а также подающий надежды новичок — eidete."),"\n",a.createElement(n.h2,{id:"ffmpeg",style:{position:"relative"}},a.createElement(n.a,{href:"#ffmpeg","aria-label":"ffmpeg permalink",className:"anchor before"},a.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"ffmpeg"),"\n",a.createElement(n.p,null,"Что он умеет и как это использовать в посведневной жизни:"),"\n",a.createElement(n.p,null,'"Склеивание" музыки и видео:'),"\n",a.createElement(n.pre,null,a.createElement(n.code,{className:"language-shell"},"$ ffmpeg -i son.wav -i video_origine.avi video_finale.avi\n")),"\n",a.createElement(n.p,null,"Замена одной звуковой дорожки на другую (например, более качественную):"),"\n",a.createElement(n.pre,null,a.createElement(n.code,{className:"language-shell"},"$ ffmpeg -i new.wav -i video.avi out.avi\n")),"\n",a.createElement(n.p,null,"Запись скринкаста (запись с монитора компьютера):"),"\n",a.createElement(n.pre,null,a.createElement(n.code,{className:"language-shell"},"$ ffmpeg -f x11grab -s 1366x768 -r 25 -b 1500 -bt 500 -aspect 1,3333 -sameq -i :0.0+0,0 -f alsa -async 1 -ac 2 -i hw:0,0 -acodec libmp3lame ~/MyVideo.avi\n")),"\n",a.createElement(n.p,null,"В этом примере будет записан также звук."),"\n",a.createElement(n.p,null,"Перекодирование из одного формата в другой:"),"\n",a.createElement(n.pre,null,a.createElement(n.code,{className:"language-shell"},"$ ffmpeg -i video.avi -f webm video.webm\n")),"\n",a.createElement(n.p,null,"Извлечение аудиодорожки из видеозаписи:"),"\n",a.createElement(n.pre,null,a.createElement(n.code,{className:"language-shell"},"$ ffmpeg -i video.avi -f mp3 audio.mp3\n")),"\n",a.createElement(n.p,null,"Запись звука с микрофона:"),"\n",a.createElement(n.pre,null,a.createElement(n.code,{className:"language-shell"},"$ ffmpeg -f alsa -async 1 -ac 2 -i hw:0,0 -acodec libmp3lame sound.mp3\n")),"\n",a.createElement(n.p,null,"Создание gif-анимации из видео:"),"\n",a.createElement(n.pre,null,a.createElement(n.code,{className:"language-shell"},"$ ffmpeg -i video.avi animation.gif\n")),"\n",a.createElement(n.p,null,"Получить сведения о видео:"),"\n",a.createElement(n.pre,null,a.createElement(n.code,{className:"language-shell"},"$ ffmpeg -i video.avi\n")),"\n",a.createElement(n.p,null,"Основные ключи:"),"\n",a.createElement(n.ul,null,"\n",a.createElement(n.li,null,"i - входной файл"),"\n",a.createElement(n.li,null,"s - разрешение экрана для нашей записи"),"\n",a.createElement(n.li,null,"r - количество кадров в секунду"),"\n",a.createElement(n.li,null,"ac - количество каналов (для аудио)"),"\n",a.createElement(n.li,null,"qscale - регулировка уровня сжатия"),"\n",a.createElement(n.li,null,"bt - битрейт"),"\n"),"\n",a.createElement(n.p,null,"Проверить поддерживаемые форматы файлов можно командой ",a.createElement(n.code,null,"ffmpeg -formats"),".\nОстальное можно найти в мануале - ",a.createElement(n.code,null,"man ffmpeg"),". Там до вас даже постараются донести, как всё это работает."),"\n",a.createElement(n.h2,{id:"следующий-кандидат---xvidcap",style:{position:"relative"}},a.createElement(n.a,{href:"#%D1%81%D0%BB%D0%B5%D0%B4%D1%83%D1%8E%D1%89%D0%B8%D0%B9-%D0%BA%D0%B0%D0%BD%D0%B4%D0%B8%D0%B4%D0%B0%D1%82---xvidcap","aria-label":"следующий кандидат   xvidcap permalink",className:"anchor before"},a.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"Следующий кандидат - XVidCap"),"\n",a.createElement(n.p,null,"Кодирует на лету и имеет множество разных форматов. Автору не подошёл. Это тот редкий случай, когда всё вроде нормально, но субъективно что-то не нравится."),"\n",a.createElement(n.h2,{id:"recordmydesktop",style:{position:"relative"}},a.createElement(n.a,{href:"#recordmydesktop","aria-label":"recordmydesktop permalink",className:"anchor before"},a.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"recordMyDesktop"),"\n",a.createElement(n.p,null,"Используют многие. Автору он не подошёл по причине непонятных фризов при записи ролика. Возможно, так отвратно он работает на отнюдь не топовом ноутбуке - нужно больше мощности?"),"\n",a.createElement(n.p,null,"Кроме того, recodrMyDesktop записывает файл в непотребном формате, который всё равно придётся перекодировать."),"\n",a.createElement(n.p,null,"Имеет и консольный вариант:"),"\n",a.createElement(n.pre,null,a.createElement(n.code,{className:"language-shell"},"$ recordmydesktop --height 400 --width 600 --channels 1 --no-sound --overwrite -o video.ogv\n")),"\n",a.createElement(n.p,null,"В приведённом примере несложно разобраться: мы запишем файл ",a.createElement(n.code,null,"video.ogv")," с\nразмерами 600x400 и без звука."),"\n",a.createElement(n.h2,{id:"как-создать-анимированный-gif",style:{position:"relative"}},a.createElement(n.a,{href:"#%D0%BA%D0%B0%D0%BA-%D1%81%D0%BE%D0%B7%D0%B4%D0%B0%D1%82%D1%8C-%D0%B0%D0%BD%D0%B8%D0%BC%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%BD%D1%8B%D0%B9-gif","aria-label":"как создать анимированный gif permalink",className:"anchor before"},a.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"Как создать анимированный gif"),"\n",a.createElement(n.p,null,"Для этого отлично подходит программка ",a.createElement(n.code,null,"byzanz"),". В официальных репозиториях её может и не быть. Пользователи Archlinux могут найти обсуждаемую деву в AUR."),"\n",a.createElement(n.p,null,"Сам процесс записи выглядит примерно так:"),"\n",a.createElement(n.pre,null,a.createElement(n.code,{className:"language-shell"},"$ byzanz-record --duration=5 --delay=5 --x=500 --y=500 --width=800 --height=600 myGifFile.gif\n")),"\n",a.createElement(n.p,null,"где"),"\n",a.createElement(n.pre,null,a.createElement(n.code,null,"--x/--y - точки координат\n--width/ --height - ширина и высота экрана соответственно\n--duration - продолжительность\n--delay - задержка перед началом записи\n")),"\n",a.createElement(n.p,null,"Помимо этого можно скомбинировать возможности ffmpeg и imagemagick:"),"\n",a.createElement(n.pre,null,a.createElement(n.code,{className:"language-shell"},"$ ffmpeg -t 5 -ss 00:00:10 -i MyVideo.mp4 out%04d.gif\n$ convert -delay 1x20 -loop 0 out*gif my.gif\n")),"\n",a.createElement(n.p,null,"Сначала разбиваем видео файл на множество гифок. Затем конвертируем все эти\nгифки в одну."),"\n",a.createElement(n.p,null,"Здесь параметр ",a.createElement(n.code,null,"-t")," указывает продолжительность, ",a.createElement(n.code,null,"-ss")," начать с\nначала или после прошествия некоторого времени. При конвертации ",a.createElement(n.code,null,"delay"),"\nопределяет задержку (насколько быстрой будет анимация)."),"\n",a.createElement(n.p,null,"Пример с множеством png-изображений:"),"\n",a.createElement(n.pre,null,a.createElement(n.code,{className:"language-shell"},"$ convert -delay 120 -loop 0 *.png animated.gif\n")),"\n",a.createElement(n.p,null,"Изменить размер гифки:"),"\n",a.createElement(n.pre,null,a.createElement(n.code,{className:"language-shell"},"$ convert old.gif -resize 600x600\\! new.gif\n")),"\n",a.createElement(n.p,null,"Или обойтись одним только ffmpeg:"),"\n",a.createElement(n.pre,null,a.createElement(n.code,null,"# -s - размер\n# -r 10 - скорость анимации\n$ ffmpeg -i file.mov -s 900x495 -pix_fmt rgb24 -r 10 file.gif\n")),"\n",a.createElement(n.h2,{id:"итог",style:{position:"relative"}},a.createElement(n.a,{href:"#%D0%B8%D1%82%D0%BE%D0%B3","aria-label":"итог permalink",className:"anchor before"},a.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"Итог"),"\n",a.createElement(n.p,null,"Ну, что сказать, ffmpeg пока был и остаётся лучшим, хотя если вам\nнужно добавить звук в записанный ролик, лучше записать звуковую дорожку отдельно - в Audacity, а затем склеить с видео в другой программке - Avidemux. Не забывайте, Avidemux может многое."),"\n",a.createElement(n.p,null,"Замечу, что один и тот же ролик в ",a.createElement(n.code,null,".avi")," и ",a.createElement(n.code,null,".webm")," имеет абсолютно разный вес. Рекорд автора: ",a.createElement(n.code,null,".avi")," - 70 MB, ",a.createElement(n.code,null,".webm")," - 12 MB. Впечатляет, не правда ли?"))}var r=function(e){void 0===e&&(e={});const{wrapper:n}=Object.assign({},(0,t.MN)(),e.components);return n?a.createElement(n,e,a.createElement(c,e)):c(e)},m=l(7792),i=l(7619);function o(e){var n,l;let{data:{mdx:t},children:c,pageContext:{prev:r,next:o}}=e;const{h1:s,title:u,description:p,image:d,table_of_contents:f}=t.frontmatter;return(0,a.useEffect)((()=>{(0,i.K)()}),[]),a.createElement(a.Fragment,null,a.createElement(m._W,{h1:s,title:u,description:p,image:null===(n=t.frontmatter.image)||void 0===n?void 0:n.publicURL},a.createElement(m.MV,{post:t.frontmatter,imageData:null==d||null===(l=d.childImageSharp)||void 0===l?void 0:l.gatsbyImageData},f?a.createElement(m.G8,{headings:t.tableOfContents}):null,a.createElement("div",{className:"page__content"},c,a.createElement(m.Mf,{prev:r,next:o})),a.createElement(m.QZ,null))))}function s(e){return a.createElement(o,e,a.createElement(r,e))}},8876:function(e,n,l){l.d(n,{MN:function(){return c}});var t=l(4424);const a=t.createContext({});function c(e){const n=t.useContext(a);return t.useMemo((()=>"function"==typeof e?e(n):{...n,...e}),[n,e])}}}]);