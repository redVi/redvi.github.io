"use strict";(self.webpackChunkgatsby_blog=self.webpackChunkgatsby_blog||[]).push([[6076],{9480:function(e,a,n){n.r(a),n.d(a,{Head:function(){return r.Ss},default:function(){return i}});var s=n(8876),t=n(4424);function l(e){const a=Object.assign({p:"p",h2:"h2",a:"a",span:"span",h3:"h3"},(0,s.MN)(),e.components);return t.createElement(t.Fragment,null,t.createElement(a.p,null,"Не так давно в archlinux всё же прекратили поддержку grub-legacy.\nТеперь выбор варьируется между двумя загрузчиками: Syslinux и Grub2.\nКак ясно из названия поста, автор отдаёт предпочтение второму варианту.\nГоворят, syslinux проще, поэтому большинство пользователей может обратить\nвнимание на него.  А вот владельцам UEFI BIOS рекомендуют второй граб."),"\n",t.createElement(a.h2,{id:"установка",style:{position:"relative"}},t.createElement(a.a,{href:"#%D1%83%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%BA%D0%B0","aria-label":"установка permalink",className:"anchor before"},t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"Установка"),"\n",t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="shell"><pre class="language-shell"><code class="language-shell"><span class="token comment"># pacman -S grub-bios grub2-common</span>\n<span class="token comment"># grub-install /dev/sda</span>\n<span class="token comment"># grub-mkconfig -o /boot/grub/grub.cfg</span></code></pre></div>'}}),"\n",t.createElement(a.p,null,"Теперь заглянем в файл ",t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">/etc/default/grub</code>'}})),"\n",t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash"><span class="token comment"># /etc/default/grub</span>\n\n<span class="token assign-left variable">GRUB_DEFAULT</span><span class="token operator">=</span><span class="token number">0</span> <span class="token comment"># загружаемый по умолчанию пункт меню, 0 - первый пункт</span>\n<span class="token assign-left variable">GRUB_TIMEOUT</span><span class="token operator">=</span><span class="token number">5</span> <span class="token comment"># тайм аут, когда можно выбрать другой пункт, 5 - 5 секунд</span>\n<span class="token assign-left variable">GRUB_DISTRIBUTOR</span><span class="token operator">=</span><span class="token string">"Arch"</span> <span class="token comment"># "поставщик" вашей версии grub\'а</span>\n<span class="token assign-left variable">GRUB_CMDLINE_LINUX_DEFAULT</span><span class="token operator">=</span><span class="token string">"quiet acpi"</span> <span class="token comment"># параметры загрузки для обычной загрузки</span>\n<span class="token assign-left variable">GRUB_CMDLINE_LINUX</span><span class="token operator">=</span><span class="token string">""</span>  <span class="token comment"># параметры загрузки (обычной и в режиме восстановления)</span>\n<span class="token assign-left variable">GRUB_PRELOAD_MODULES</span><span class="token operator">=</span><span class="token string">"part_gpt part_msdos"</span> <span class="token comment"># дополнительные модули загрузки</span>\n\n<span class="token assign-left variable">GRUB_TERMINAL_INPUT</span><span class="token operator">=</span>console <span class="token comment"># использование консоли</span>\n\n<span class="token comment"># разрешение графического меню (800х600, например)</span>\n<span class="token assign-left variable">GRUB_GFXMODE</span><span class="token operator">=</span>auto\n\n<span class="token comment"># будет ли включен режим восстановления</span>\n<span class="token assign-left variable">GRUB_DISABLE_RECOVERY</span><span class="token operator">=</span>true</code></pre></div>'}}),"\n",t.createElement(a.p,null,"Подробнее можно почитать ",t.createElement(a.a,{href:"http://ru.wikibooks.org/wiki/Grub_2",target:"_blank",rel:"nofollow"},"здесь"),"."),"\n",t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<span\n      class="gatsby-resp-image-wrapper"\n      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 500px; flex:2;"\n    >\n      <span\n    class="gatsby-resp-image-background-image"\n    style="padding-bottom: 42%; position: relative; bottom: 0; left: 0; display: block;"\n  ></span>\n  <picture>\n          <source\n              srcset="/static/a62a0c5cae55836d0bf6ee1ec236244f/e93cc/grub2.webp 300w,\n/static/a62a0c5cae55836d0bf6ee1ec236244f/10636/grub2.webp 500w"\n              sizes="(max-width: 500px) 100vw, 500px"\n              type="image/webp"\n            />\n          <source\n            srcset="/static/a62a0c5cae55836d0bf6ee1ec236244f/eed55/grub2.png 300w,\n/static/a62a0c5cae55836d0bf6ee1ec236244f/b30f8/grub2.png 500w"\n            sizes="(max-width: 500px) 100vw, 500px"\n            type="image/png"\n          />\n          <img\n            class="gatsby-resp-image-image"\n            src="/static/a62a0c5cae55836d0bf6ee1ec236244f/b30f8/grub2.png"\n            alt="archlinux_grub"\n            title="archlinux_grub"\n            loading="lazy"\n            decoding="async"\n            style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"\n          />\n        </picture>\n    </span>'}}),"\n",t.createElement(a.h2,{id:"изменение-параметров",style:{position:"relative"}},t.createElement(a.a,{href:"#%D0%B8%D0%B7%D0%BC%D0%B5%D0%BD%D0%B5%D0%BD%D0%B8%D0%B5-%D0%BF%D0%B0%D1%80%D0%B0%D0%BC%D0%B5%D1%82%D1%80%D0%BE%D0%B2","aria-label":"изменение параметров permalink",className:"anchor before"},t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"Изменение параметров:"),"\n",t.createElement(a.h3,{id:"настройка-яркости-экрана",style:{position:"relative"}},t.createElement(a.a,{href:"#%D0%BD%D0%B0%D1%81%D1%82%D1%80%D0%BE%D0%B9%D0%BA%D0%B0-%D1%8F%D1%80%D0%BA%D0%BE%D1%81%D1%82%D0%B8-%D1%8D%D0%BA%D1%80%D0%B0%D0%BD%D0%B0","aria-label":"настройка яркости экрана permalink",className:"anchor before"},t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"Настройка яркости экрана:"),"\n",t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash"><span class="token comment"># /etc/default/grub:</span>\n\n<span class="token assign-left variable">GRUB_CMDLINE_LINUX_DEFAULT</span><span class="token operator">=</span><span class="token string">"quiet acpi_backlight=vendor"</span></code></pre></div>'}}),"\n",t.createElement(a.p,null,"После чего:"),"\n",t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="shell"><pre class="language-shell"><code class="language-shell"><span class="token comment"># grub-mkconfig -o /boot/grub/grub.cfg</span></code></pre></div>'}}),"\n",t.createElement(a.h3,{id:"загрузка-двух-и-более-операционных-систем",style:{position:"relative"}},t.createElement(a.a,{href:"#%D0%B7%D0%B0%D0%B3%D1%80%D1%83%D0%B7%D0%BA%D0%B0-%D0%B4%D0%B2%D1%83%D1%85-%D0%B8-%D0%B1%D0%BE%D0%BB%D0%B5%D0%B5-%D0%BE%D0%BF%D0%B5%D1%80%D0%B0%D1%86%D0%B8%D0%BE%D0%BD%D0%BD%D1%8B%D1%85-%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC","aria-label":"загрузка двух и более операционных систем permalink",className:"anchor before"},t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"Загрузка двух и более операционных систем"),"\n",t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="shell"><pre class="language-shell"><code class="language-shell"><span class="token comment"># pacman -S os-prober</span>\n<span class="token comment"># grub-mkconfig -o /boot/grub/grub.cfg</span></code></pre></div>'}}),"\n",t.createElement(a.p,null,"Распознать имеющиеся ОС должен автоматически. Если этого не произошло, придётся\nдобавить вручную, после чего снова переконфигурировать конфигурационный файл\ngrub."),"\n",t.createElement(a.h3,{id:"как-добавить-windows",style:{position:"relative"}},t.createElement(a.a,{href:"#%D0%BA%D0%B0%D0%BA-%D0%B4%D0%BE%D0%B1%D0%B0%D0%B2%D0%B8%D1%82%D1%8C-windows","aria-label":"как добавить windows permalink",className:"anchor before"},t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"Как добавить Windows?"),"\n",t.createElement(a.p,null,"В файл ",t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">/etc/grub.d/40_custom</code>'}})," внести строки:"),"\n",t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">menuentry <span class="token string">"Microsoft Windows 7 BIOS-MBR"</span> <span class="token punctuation">{</span>\n    insmod part_msdos\n    insmod ntfs\n    insmod search_fs_uuid\n    insmod ntldr\n    search --fs-uuid --no-floppy <span class="token parameter variable">--set</span><span class="token operator">=</span>root C474B30B74B2FEEC\n    ntldr /bootmgr\n<span class="token punctuation">}</span></code></pre></div>'}}),"\n",t.createElement(a.p,null,"где ",t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">fs-uuid</code>'}})," - ID вашего раздела с Windows. Определить его можно с помощью команды ",t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">blkid</code>'}}),":"),"\n",t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="shell"><pre class="language-shell"><code class="language-shell"><span class="token comment"># sudo blkid</span>\n/dev/sda1: <span class="token assign-left variable">UUID</span><span class="token operator">=</span><span class="token string">"C474B30B74B2FEEC"</span> <span class="token assign-left variable">TYPE</span><span class="token operator">=</span><span class="token string">"ntfs"</span></code></pre></div>'}}),"\n",t.createElement(a.p,null,"После чего обновить конфигурацию grub2:"),"\n",t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="shell"><pre class="language-shell"><code class="language-shell"><span class="token comment"># grub-mkconfig -o /boot/grub/grub.cfg</span></code></pre></div>'}}),"\n",t.createElement(a.h2,{id:"украшательства",style:{position:"relative"}},t.createElement(a.a,{href:"#%D1%83%D0%BA%D1%80%D0%B0%D1%88%D0%B0%D1%82%D0%B5%D0%BB%D1%8C%D1%81%D1%82%D0%B2%D0%B0","aria-label":"украшательства permalink",className:"anchor before"},t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"Украшательства"),"\n",t.createElement(a.p,null,"Для Archlinux можно найти неплохие темы в AUR."),"\n",t.createElement(a.p,null,"Чтобы поставить тему, послужившую иллюстрацией к данному посту, проделываем\nследующие шаги - установим тему и скопируем её в директорию с grub:"),"\n",t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="shell"><pre class="language-shell"><code class="language-shell">$ yaourt grub2-theme-archlinux\n<span class="token comment"># cp -r /usr/share/grub/themes/Archlinux /boot/grub/themes/</span></code></pre></div>'}}),"\n",t.createElement(a.p,null,"Открываем в текстовом редакторе ",t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">/etc/default/grub</code>'}}),":"),"\n",t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash"><span class="token comment"># /etc/default/grub</span>\n\n<span class="token assign-left variable">GRUB_THEME</span><span class="token operator">=</span><span class="token string">"/boot/grub/themes/Archlinux/theme.txt"</span></code></pre></div>'}}),"\n",t.createElement(a.p,null,"Рекомендуется установить разрешение экрана загрузчика к данной теме:"),"\n",t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">GRUB_GFXMODE=1024x768</code></pre></div>'}}),"\n",t.createElement(a.p,null,"После чего снова:"),"\n",t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="shell"><pre class="language-shell"><code class="language-shell"><span class="token comment"># grub-mkconfig -o /boot/grub/grub.cfg</span>\nГенерируется grub.cfg …\nНайдена тема: /boot/grub/themes/Archlinux/theme.txt\nНайден образ linux: /boot/vmlinuz-linux\nНайден образ initrd: /boot/initramfs-linux.img\nNo volume <span class="token function">groups</span> found\nНайден Windows <span class="token number">7</span> <span class="token punctuation">(</span>loader<span class="token punctuation">)</span> на /dev/sda1\nзавершено</code></pre></div>'}}),"\n",t.createElement(a.p,null,"Также для эстетических целей используется ",t.createElement(a.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">plymouth</code>'}})," (его часто можно увидеть\nв user-friendly дистрибутивах, например, в ubuntu), но автор сего зверя не\nставит и не рекомендует по одной простой причине: он снижает скорость загрузки."))}var c=function(e){void 0===e&&(e={});const{wrapper:a}=Object.assign({},(0,s.MN)(),e.components);return a?t.createElement(a,e,t.createElement(l,e)):l(e)},r=n(7792),o=n(7619);function p(e){var a,n;let{data:{mdx:s},children:l,pageContext:{prev:c,next:p}}=e;const{h1:i,title:g,description:u,image:h,table_of_contents:m}=s.frontmatter;return(0,t.useEffect)((()=>{(0,o.K)()}),[]),t.createElement(t.Fragment,null,t.createElement(r._W,{h1:i,title:g,description:u,image:null===(a=s.frontmatter.image)||void 0===a?void 0:a.publicURL},t.createElement(r.MV,{post:s.frontmatter,imageData:null==h||null===(n=h.childImageSharp)||void 0===n?void 0:n.gatsbyImageData},m?t.createElement(r.G8,{headings:s.tableOfContents}):null,t.createElement("div",{className:"page__content"},l,t.createElement(r.Mf,{prev:c,next:p})),t.createElement(r.QZ,null))))}function i(e){return t.createElement(p,e,t.createElement(c,e))}},8876:function(e,a,n){n.d(a,{MN:function(){return l}});var s=n(4424);const t=s.createContext({});function l(e){const a=s.useContext(t);return s.useMemo((()=>"function"==typeof e?e(a):{...a,...e}),[a,e])}}}]);