"use strict";(self.webpackChunkgatsby_blog=self.webpackChunkgatsby_blog||[]).push([[5020],{4076:function(e,n,a){a.r(n),a.d(n,{Head:function(){return r.Ss},default:function(){return p}});var t=a(8876),s=a(4424);function l(e){const n=Object.assign({p:"p",a:"a",blockquote:"blockquote",h2:"h2",span:"span",img:"img",h3:"h3"},(0,t.MN)(),e.components);return s.createElement(s.Fragment,null,s.createElement(n.p,null,"Ранее был написан пост ",s.createElement(n.a,{href:"/posts/install-gentoo/"},"об установке gentoo"),", было это\nбольше полутора лет назад и тогда эта замечательная ОС долго не продержалась\nна моём десктопе, уступив место archlinux'у. Не так давно в сознание начали\nзакрадываться предательские мысли о смене дистрибутива. Связано это было с\nотходом команды разработчиков от традиций и философии archlinux. Несогласие\nс майнтейнерами в пути развития дистрибутива, ощущение того, что арч уже\n",s.createElement("s",null,"«не торт»")," не K.I.S.S., досада от того, что фактически разработчики не\nоставляют большого выбора, а просто навязывают свою волю."),"\n",s.createElement(n.p,null,"Перебарывать это и искать обходные пути в то время, когда хотелось бы\nпросто работать? Не думаю. Кроме того, стало появляться чувство, что\nпользователь в арче всё больше начинает походить на бета-тестера."),"\n",s.createElement(n.p,null,"В то же время в философии gentoo можно найти такие строки:"),"\n",s.createElement(n.blockquote,null,"\n",s.createElement(n.p,null,"«Из исходников» — важный и ключевой аспект Gentoo, который был и останется необходимым, ",s.createElement("u",null,"но не единственный и не главный"),". Основополагающая задача — создание технологии, позволяющей как нам, так и другим ",s.createElement("u",null,"делать то, что хочется, без ограничений"),"."),"\n"),"\n",s.createElement(n.p,null,"Отлично звучит, хотя на практике всё немного иначе. Из исходников — основополагающий\nаспект, как ни крути. Собственно, поэтому gentoo пока не стал моим основным\nдистрибутивом (это ещё не решено). Да, есть возможность создать свои локальные оверлеи, да есть бинхосты, но... действительно ли это выход? Разумеется, можно обновлять (читай — пересобирать) пакеты раз в день, затратив на это несколько минут, а можно раз в несколько месяцев, затратив на это куда больше времени. Это уже зависит от личных предпочтений каждого. Вопрос в том, можно ли в gentoo просто жить, а не посвящать всего себя системе. Поживём — увидим."),"\n",s.createElement(n.p,null,"Что же, распускать сопли дальше не имеет смысла, давайте лучше посмотрим, как можно более или менее быстро создать на основе свежеустановленной генты рабочий десктоп. Все шаги описываться не будут — это есть в документации — лишь моменты, которые заставили автора задуматься и прикинуть как сделать лучше/быстрее."),"\n",s.createElement(n.p,null,"Итак, некоторые подводные камни и методы их обхода:"),"\n",s.createElement(n.h2,{id:"споткнулись-раз-две-видеокарты-и-vgaswitcheroo--неработающий-wi-fi",style:{position:"relative"}},s.createElement(n.a,{href:"#%D1%81%D0%BF%D0%BE%D1%82%D0%BA%D0%BD%D1%83%D0%BB%D0%B8%D1%81%D1%8C-%D1%80%D0%B0%D0%B7-%D0%B4%D0%B2%D0%B5-%D0%B2%D0%B8%D0%B4%D0%B5%D0%BE%D0%BA%D0%B0%D1%80%D1%82%D1%8B-%D0%B8-vgaswitcheroo--%D0%BD%D0%B5%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%B0%D1%8E%D1%89%D0%B8%D0%B9-wi-fi","aria-label":"споткнулись раз две видеокарты и vgaswitcheroo  неработающий wi fi permalink",className:"anchor before"},s.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"Споткнулись раз. Две видеокарты и vgaswitcheroo + неработающий wi-fi"),"\n",s.createElement(n.p,null,"В archlinux стоило лишь подмонтировать debugfs и отключить одну из карточек, а\nтеперь не нужно и этого: дискретная карта по-умолчанию выключена.\nВ gentoo, поскольку ядро мы собираем сами, нужно сделать чуть больше телодвижений."),"\n",s.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">Device Drivers  ---\x3e\n  Graphics support  ---\x3e\n  &lt;*> /dev/agpgart (AGP Support)  ---\x3e\n    &lt;M> AMD Opteron/Athlon64 on-CPU GART support\n    {M} Intel 440LX/BX/GX, I8xx and E7x05 chipset support\n    [*] Laptop Hybrid Graphics - GPU switching support\n\n    Direct Rendering Manager  ---\x3e\n      &lt;*> Direct Rendering Manager (XFree86 4.1.0 and higher DRI support)  ---\x3e\n      &lt;M> ATI Radeon\n      &lt;M> Intel 8xx/9xx/G3x/G4x/HD Graphics\n      [*]   Enable modesetting on intel by defaul\n      [*]   Enable legacy fbdev support for the modesetting intel driver\n\n      Frame buffer Devices  ---\x3e\n        {*} Support for frame buffer devices  ---\x3e\n          [*]   Enable Video Mode Handling Helpers\n          [*]   Enable Tile Blitting Support</code></pre></div>'}}),"\n",s.createElement(n.p,null,"Это для владельцев видеокарт ATI + Intel. Владельцы карт NVidia должны шаманить с NOUVEAU.\nПравим конфиг ",s.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">/etc/genkernel.conf</code>'}}),", включив в нём:"),"\n",s.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash"><span class="token assign-left variable">OLDCONFIG</span><span class="token operator">=</span><span class="token string">"yes"</span>\n<span class="token assign-left variable">MENUCONFIG</span><span class="token operator">=</span><span class="token string">"yes"</span>\n<span class="token assign-left variable">CLEAN</span><span class="token operator">=</span><span class="token string">"no"</span>\n<span class="token assign-left variable">MRPROPER</span><span class="token operator">=</span><span class="token string">"no"</span></code></pre></div>'}}),"\n",s.createElement(n.p,null,"В ",s.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">/etc/portage/make.conf</code>'}})," определяем свои карточки. Например:"),"\n",s.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash"><span class="token assign-left variable">VIDEO_CARDS</span><span class="token operator">=</span><span class="token string">"intel i915"</span></code></pre></div>'}}),"\n",s.createElement(n.p,null,"Собираем ядро с genkernel:"),"\n",s.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="shell"><pre class="language-shell"><code class="language-shell"><span class="token comment"># genkernel all</span></code></pre></div>'}}),"\n",s.createElement(n.p,null,"А после установки grub, добавляем в конец строки загрузчика:"),"\n",s.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash"><span class="token comment"># /etc/default/grub</span>\n<span class="token comment"># for Intel + ATI</span>\n<span class="token assign-left variable">GRUB_CMDLINE_LINUX_DEFAULT</span><span class="token operator">=</span><span class="token string">"radeon.runpm=0"</span>\n\n<span class="token comment"># for Intel + NVIDIA</span>\n<span class="token assign-left variable">GRUB_CMDLINE_LINUX_DEFAULT</span><span class="token operator">=</span><span class="token string">"nouveau.runpm=0"</span></code></pre></div>'}}),"\n",s.createElement(n.p,null,"И вносим debugfs в ",s.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">/etc/fstab</code>'}}),":"),"\n",s.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash"><span class="token comment"># /etc/fstab</span>\ndebugfs /sys/kernel/debug  debugfs defaults <span class="token number">0</span> <span class="token number">0</span></code></pre></div>'}}),"\n",s.createElement(n.p,null,"Попросим grub2 перечитать настройки и после перезагрузки системы убедимся, что\nна дискретную карту не поступает питание:"),"\n",s.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="shell"><pre class="language-shell"><code class="language-shell"><span class="token comment"># grub2-mkconfig -o /boot/grub/grub.cfg</span>\n<span class="token comment"># cat /sys/kernel/debug/vgaswitcheroo/switch</span>\n<span class="token number">0</span>:IGD:+:Pwr:0000:00:02.0\n<span class="token number">1</span>:DIS: :Off:0000:01:00.0</code></pre></div>'}}),"\n",s.createElement(n.p,null,"Касаемо оборудования, стоило бы также отметить, что у автора изначально не определялась wi-fi карточка: не было интерфейса wlan0. К счастью, это решается даже проще:"),"\n",s.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="shell"><pre class="language-shell"><code class="language-shell"><span class="token comment"># lspci -v 04:00.0</span>\nNetwork controller: Broadcom Corporation BCM4313 <span class="token number">802</span>.11b/g/n Wireless LAN Controller <span class="token punctuation">(</span>rev 01<span class="token punctuation">)</span>\nKernel driver <span class="token keyword">in</span> use: bcma-pci-bridge</code></pre></div>'}}),"\n",s.createElement(n.p,null,"Для данной железки в ядре должно быть включено:"),"\n",s.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">Networking Support --\x3e Wireless --\x3e\n    &lt;M> cfg80211 - wireless configuration API\n    [*] cfg80211 wireless extensions compatibility\n\nDevice Drivers --\x3e Network Device Support --\x3e Wireless LAN --\x3e\n    &lt;M> Broadcom IEEE802.11n PCIe SoftMAC WLAN driver\n\nDevice Drivers --\x3e Broadcom specific AMBA  ---\x3e\n    &lt;M> BCMA support\n    [*]   Support for BCMA on PCI-host bus</code></pre></div>'}}),"\n",s.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<span\n      class="gatsby-resp-image-wrapper"\n      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 652px; flex:1;"\n    >\n      <span\n    class="gatsby-resp-image-background-image"\n    style="padding-bottom: 77.66666666666666%; position: relative; bottom: 0; left: 0; display: block;"\n  ></span>\n  <picture>\n          <source\n              srcset="/static/5cbb2ea205393d04d8024ebbe87dd5d1/e93cc/BCMA.webp 300w,\n/static/5cbb2ea205393d04d8024ebbe87dd5d1/b0544/BCMA.webp 600w,\n/static/5cbb2ea205393d04d8024ebbe87dd5d1/23d72/BCMA.webp 652w"\n              sizes="(max-width: 652px) 100vw, 652px"\n              type="image/webp"\n            />\n          <source\n            srcset="/static/5cbb2ea205393d04d8024ebbe87dd5d1/eed55/BCMA.png 300w,\n/static/5cbb2ea205393d04d8024ebbe87dd5d1/7491f/BCMA.png 600w,\n/static/5cbb2ea205393d04d8024ebbe87dd5d1/ef2ec/BCMA.png 652w"\n            sizes="(max-width: 652px) 100vw, 652px"\n            type="image/png"\n          />\n          <img\n            class="gatsby-resp-image-image"\n            src="/static/5cbb2ea205393d04d8024ebbe87dd5d1/ef2ec/BCMA.png"\n            alt="wifi"\n            title=""\n            loading="lazy"\n            decoding="async"\n            style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"\n          />\n        </picture>\n    </span>'}}),"\n",s.createElement(n.img,{src:"http://3.bp.blogspot.com/-GkhLdgPkbBo/USuFQHOn9OI/AAAAAAAAEDQ/AGt5Aaq6E8g/s1600/BCMA.png",alt:"bcma"}),"\n",s.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<span\n      class="gatsby-resp-image-wrapper"\n      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 656px; flex:1;"\n    >\n      <span\n    class="gatsby-resp-image-background-image"\n    style="padding-bottom: 77.33333333333333%; position: relative; bottom: 0; left: 0; display: block;"\n  ></span>\n  <picture>\n          <source\n              srcset="/static/a77ac3972daca8bbb6f00fab899f8f60/e93cc/broadcom_wireless.webp 300w,\n/static/a77ac3972daca8bbb6f00fab899f8f60/b0544/broadcom_wireless.webp 600w,\n/static/a77ac3972daca8bbb6f00fab899f8f60/37245/broadcom_wireless.webp 656w"\n              sizes="(max-width: 656px) 100vw, 656px"\n              type="image/webp"\n            />\n          <source\n            srcset="/static/a77ac3972daca8bbb6f00fab899f8f60/eed55/broadcom_wireless.png 300w,\n/static/a77ac3972daca8bbb6f00fab899f8f60/7491f/broadcom_wireless.png 600w,\n/static/a77ac3972daca8bbb6f00fab899f8f60/c0e0e/broadcom_wireless.png 656w"\n            sizes="(max-width: 656px) 100vw, 656px"\n            type="image/png"\n          />\n          <img\n            class="gatsby-resp-image-image"\n            src="/static/a77ac3972daca8bbb6f00fab899f8f60/c0e0e/broadcom_wireless.png"\n            alt="broadcom"\n            title=""\n            loading="lazy"\n            decoding="async"\n            style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"\n          />\n        </picture>\n    </span>'}}),"\n",s.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<span\n      class="gatsby-resp-image-wrapper"\n      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 529px; flex:1;"\n    >\n      <span\n    class="gatsby-resp-image-background-image"\n    style="padding-bottom: 82.33333333333334%; position: relative; bottom: 0; left: 0; display: block;"\n  ></span>\n  <picture>\n          <source\n              srcset="/static/3629cca80888872d1f44a37dea68404a/e93cc/linksus.webp 300w,\n/static/3629cca80888872d1f44a37dea68404a/2ef37/linksus.webp 529w"\n              sizes="(max-width: 529px) 100vw, 529px"\n              type="image/webp"\n            />\n          <source\n            srcset="/static/3629cca80888872d1f44a37dea68404a/eed55/linksus.png 300w,\n/static/3629cca80888872d1f44a37dea68404a/1adc2/linksus.png 529w"\n            sizes="(max-width: 529px) 100vw, 529px"\n            type="image/png"\n          />\n          <img\n            class="gatsby-resp-image-image"\n            src="/static/3629cca80888872d1f44a37dea68404a/1adc2/linksus.png"\n            alt="linksus"\n            title=""\n            loading="lazy"\n            decoding="async"\n            style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"\n          />\n        </picture>\n    </span>'}}),"\n",s.createElement(n.p,null,"И установлена прошивка:"),"\n",s.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="shell"><pre class="language-shell"><code class="language-shell"><span class="token comment"># emerge sys-kernel/linux-firmware</span></code></pre></div>'}}),"\n",s.createElement(n.p,null,"Если возникли проблемы, владельцам карт от broadcom предлагается просмотреть информацию о драйверах ",s.createElement(n.a,{href:"http://linuxwireless.org/en/users/Drivers/brcm80211",target:"_blank",rel:"nofollow"},"bcrm80211")," и ",s.createElement(n.a,{href:"http://linuxwireless.org/en/users/Drivers/b43",target:"_blank",rel:"nofollow"},"b43")," в зависимости от используемого вами и действовать по предложенной там инструкции. Если ваша карта есть в списке и поддерживается — не всё потеряно."),"\n",s.createElement(n.h2,{id:"споткнулись-два-сборка-chromium-нет-binhost",style:{position:"relative"}},s.createElement(n.a,{href:"#%D1%81%D0%BF%D0%BE%D1%82%D0%BA%D0%BD%D1%83%D0%BB%D0%B8%D1%81%D1%8C-%D0%B4%D0%B2%D0%B0-%D1%81%D0%B1%D0%BE%D1%80%D0%BA%D0%B0-chromium-%D0%BD%D0%B5%D1%82-binhost","aria-label":"споткнулись два сборка chromium нет binhost permalink",className:"anchor before"},s.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"Споткнулись два. Сборка chromium? Нет, binhost!"),"\n",s.createElement(n.p,null,"Привычным браузером у автора является хромиум, ну и в gentoo захотелось его собрать, только вот собирается он не меньше двух часов, и здесь возникает вполне себе закономерная мысль: фиг с ними, с USE-флагами, поставим из бинарного пакета."),"\n",s.createElement(n.p,null,"Вообще, надо сказать, что при обновлении ситуация повторится, поэтому лучше отдать предпочтение лёгким браузерам, таким как uzbl, или ставить готовые бинарные пакеты: google-chrome, firefox-bin. Но давайте для примера таки поработаем с binhost."),"\n",s.createElement(n.p,null,"В качестве бинхоста будем использовать ",s.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">http://calculate.freeside.ru/CLD/grp/</code>'}}),", там можно найти достаточно много пакетов под свою архитектуру. Естественно, лучше ставить из исходников со своими USE-флагами. Так же естественно, что автор не несёт ответственности, если при использовании бинарных пакетов из CLD у вас что-то отвалится ;)"),"\n",s.createElement(n.p,null,"Снова идём в ",s.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">/etc/portage/make.conf</code>'}}),":"),"\n",s.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash"><span class="token assign-left variable">FEATURES</span><span class="token operator">=</span><span class="token string">"ccache"</span>\n<span class="token assign-left variable">CCACHE_SIZE</span><span class="token operator">=</span><span class="token string">"2G"</span>\n<span class="token assign-left variable">PORTAGE_BINHOST</span><span class="token operator">=</span><span class="token string">"http://calculate.freeside.ru/CLD/grp/x86_64/"</span>\n<span class="token assign-left variable">PKGDIR</span><span class="token operator">=</span><span class="token string">"/var/binpackages/"</span></code></pre></div>'}}),"\n",s.createElement(n.p,null,s.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">ccache</code>'}})," следует сначала установить, он окажет неоценимую услугу при перекомпиляции пакетов, подробнее читаем на gentoo wiki."),"\n",s.createElement(n.p,null,"Что касается binhost'а здесь вы указываете откуда ставить пакеты с учётом своей архитектуры. Затем следует указание места, куда будут складываться эти пакеты.\nСтавим chromium:"),"\n",s.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="shell"><pre class="language-shell"><code class="language-shell"><span class="token comment"># emerge --getbinpkgonly --fetchonly --usepkgonly chromium</span></code></pre></div>'}}),"\n",s.createElement(n.p,null,"Заглядываем в ",s.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">/var/binpackages/</code>'}}),":"),"\n",s.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="shell"><pre class="language-shell"><code class="language-shell">$ <span class="token function">ls</span> var/binpackages/www-client/\nchromium-20.0.1132.57.tbz2</code></pre></div>'}}),"\n",s.createElement(n.p,null,"Всё нормально."),"\n",s.createElement(n.h2,{id:"споткнулись-три-а-сколько-ждать-то-сборка-пакетов-из-под-live-cd",style:{position:"relative"}},s.createElement(n.a,{href:"#%D1%81%D0%BF%D0%BE%D1%82%D0%BA%D0%BD%D1%83%D0%BB%D0%B8%D1%81%D1%8C-%D1%82%D1%80%D0%B8-%D0%B0-%D1%81%D0%BA%D0%BE%D0%BB%D1%8C%D0%BA%D0%BE-%D0%B6%D0%B4%D0%B0%D1%82%D1%8C-%D1%82%D0%BE-%D1%81%D0%B1%D0%BE%D1%80%D0%BA%D0%B0-%D0%BF%D0%B0%D0%BA%D0%B5%D1%82%D0%BE%D0%B2-%D0%B8%D0%B7-%D0%BF%D0%BE%D0%B4-live-cd","aria-label":"споткнулись три а сколько ждать то сборка пакетов из под live cd permalink",className:"anchor before"},s.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"Споткнулись три. А сколько ждать-то? Сборка пакетов из-под live cd."),"\n",s.createElement(n.p,null,"Также после первоначальной установки можно доставить все пакеты, загрузившись с какого-нибудь live cd и чрутнувшись в gentoo. У автора на то был рабочий арчлинукс, gentoo ставился на внешний HDD. Повторюсь, вполне можно использовать для этого любой live cd/live usb. Загружаемся с него, монтируем нужные разделы, ставим компиляцию сразу нескольких пакетов, а сами в это время сидим в jabber или читаем gentoo handbook в привычном окружении."),"\n",s.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="shell"><pre class="language-shell"><code class="language-shell">$ <span class="token function">sudo</span> <span class="token function">mount</span> /dev/sdc1 /mnt/gentoo\n$ <span class="token function">sudo</span> <span class="token function">mount</span> /dev/sdc2 /mnt/gentoo/boot\n$ <span class="token function">sudo</span> <span class="token function">mount</span> /dev/sdc6 /mnt/gentoo/home\n$ <span class="token function">sudo</span> <span class="token function">mount</span> <span class="token parameter variable">-t</span> proc none /mnt/gentoo/proc\n$ <span class="token function">sudo</span> <span class="token function">chroot</span> /mnt/gentoo /bin/bash\n<span class="token environment constant">PS1</span> <span class="token operator">=</span> <span class="token string">"(chroot) <span class="token environment constant">$PS1</span>"</span></code></pre></div>'}}),"\n",s.createElement(n.p,null,"Кроме того, позволяет ускорить время компиляции\n",s.createElement(n.a,{href:"http://ru.gentoo-wiki.com/wiki/%D0%A3%D1%81%D0%BA%D0%BE%D1%80%D0%B5%D0%BD%D0%B8%D0%B5_portage_%D1%87%D0%B5%D1%80%D0%B5%D0%B7_tmpfs",target:"_blank",rel:"nofollow"},"вынос /var/tmp/portage в tmpfs"),":"),"\n",s.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash"><span class="token comment"># /etc/fstab</span>\ntmpfs /var/tmp tmpfs <span class="token assign-left variable">size</span><span class="token operator">=</span>3G,mode<span class="token operator">=</span><span class="token number">1777</span>\n\n<span class="token comment"># /etc/portage/make.conf</span>\n<span class="token assign-left variable">PORTAGE_TMPDIR</span><span class="token operator">=</span><span class="token string">"/var/tmp"</span> <span class="token comment"># расположение временных файлов</span>\n<span class="token assign-left variable">BUILD_PREFIX</span><span class="token operator">=</span><span class="token string">"/var/tmp/portage"</span> <span class="token comment"># каталог сборки</span></code></pre></div>'}}),"\n",s.createElement(n.p,null,"В остальном с настройкой всё просто. При желании можете ознакомиться ",s.createElement(n.a,{href:"/posts/acpi/"},"с настройками acpi"),", одинаковыми для всех дистрибутивов."),"\n",s.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<span\n      class="gatsby-resp-image-wrapper"\n      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1024px; flex:2;"\n    >\n      <span\n    class="gatsby-resp-image-background-image"\n    style="padding-bottom: 56.333333333333336%; position: relative; bottom: 0; left: 0; display: block;"\n  ></span>\n  <picture>\n          <source\n              srcset="/static/4e9a8be968a1af4c956365d9a1b51df8/e93cc/dwm_gentoo.webp 300w,\n/static/4e9a8be968a1af4c956365d9a1b51df8/b0544/dwm_gentoo.webp 600w,\n/static/4e9a8be968a1af4c956365d9a1b51df8/53334/dwm_gentoo.webp 1024w"\n              sizes="(max-width: 1024px) 100vw, 1024px"\n              type="image/webp"\n            />\n          <source\n            srcset="/static/4e9a8be968a1af4c956365d9a1b51df8/73b64/dwm_gentoo.jpg 300w,\n/static/4e9a8be968a1af4c956365d9a1b51df8/3ad8d/dwm_gentoo.jpg 600w,\n/static/4e9a8be968a1af4c956365d9a1b51df8/c3413/dwm_gentoo.jpg 1024w"\n            sizes="(max-width: 1024px) 100vw, 1024px"\n            type="image/jpeg"\n          />\n          <img\n            class="gatsby-resp-image-image"\n            src="/static/4e9a8be968a1af4c956365d9a1b51df8/c3413/dwm_gentoo.jpg"\n            alt="gentoo dwm"\n            title=""\n            loading="lazy"\n            decoding="async"\n            style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"\n          />\n        </picture>\n    </span>'}}),"\n",s.createElement(n.h2,{id:"в-заключение-или-краткое-сравнение-возможностей-arch-и-gentoo",style:{position:"relative"}},s.createElement(n.a,{href:"#%D0%B2-%D0%B7%D0%B0%D0%BA%D0%BB%D1%8E%D1%87%D0%B5%D0%BD%D0%B8%D0%B5-%D0%B8%D0%BB%D0%B8-%D0%BA%D1%80%D0%B0%D1%82%D0%BA%D0%BE%D0%B5-%D1%81%D1%80%D0%B0%D0%B2%D0%BD%D0%B5%D0%BD%D0%B8%D0%B5-%D0%B2%D0%BE%D0%B7%D0%BC%D0%BE%D0%B6%D0%BD%D0%BE%D1%81%D1%82%D0%B5%D0%B9-arch-%D0%B8-gentoo","aria-label":"в заключение или краткое сравнение возможностей arch и gentoo permalink",className:"anchor before"},s.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"В заключение или краткое сравнение возможностей arch и gentoo"),"\n",s.createElement(n.h3,{id:"держи-мир-в-чистоте",style:{position:"relative"}},s.createElement(n.a,{href:"#%D0%B4%D0%B5%D1%80%D0%B6%D0%B8-%D0%BC%D0%B8%D1%80-%D0%B2-%D1%87%D0%B8%D1%81%D1%82%D0%BE%D1%82%D0%B5","aria-label":"держи мир в чистоте permalink",className:"anchor before"},s.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"Держи мир в чистоте"),"\n",s.createElement(n.p,null,"Принцип обоих дистрибутивов, хотя в gentoo это выражено ярче. Сразу о полезном: полезно иметь под рукой список установленных пакетов для быстрого восстановления системы. В gentoo таким списком является файл ",s.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">/var/lib/portage/world</code>'}}),", куда вносятся записи об установленных программах."),"\n",s.createElement(n.p,null,"В archlinux нет такого файла, но его можно получить. Арчевики по этому поводу нам выдаст следующее:"),"\n",s.createElement(n.p,null,'Если ваша система "упала" и её сложно восстановить, pacman может легко переустановить эти пакеты.\nСначала, сохраните в список пакетов (доступных в репозитории):'),"\n",s.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="shell"><pre class="language-shell"><code class="language-shell"><span class="token comment"># pacman -Qqe | grep -v "$(pacman -Qmq)" > pkglist</span></code></pre></div>'}}),"\n",s.createElement(n.p,null,"Безопасная, но и более сложная альтернатива (во избежание удаления частичных совпадений)"),"\n",s.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="shell"><pre class="language-shell"><code class="language-shell"><span class="token comment"># comm -13 &lt;(pacman -Qmq | sort) &lt;(pacman -Qqe | sort) > pkglist</span></code></pre></div>'}}),"\n",s.createElement(n.p,null,"Сохраните этот файл на флешке или на другом носителе.\nСкопируйте файл pkglist в новую систему, перейдите в эту папку.\nДля восстановления используйте команду:"),"\n",s.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="shell"><pre class="language-shell"><code class="language-shell"><span class="token comment"># pacman -S $(cat pkglist)</span></code></pre></div>'}}),"\n",s.createElement(n.h3,{id:"сборка-из-исходного-кода",style:{position:"relative"}},s.createElement(n.a,{href:"#%D1%81%D0%B1%D0%BE%D1%80%D0%BA%D0%B0-%D0%B8%D0%B7-%D0%B8%D1%81%D1%85%D0%BE%D0%B4%D0%BD%D0%BE%D0%B3%D0%BE-%D0%BA%D0%BE%D0%B4%D0%B0","aria-label":"сборка из исходного кода permalink",className:"anchor before"},s.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"Сборка из исходного кода"),"\n",s.createElement(n.p,null,"Возможна в обоих дистрибутивах. В archlinux для этого есть такая вкусная вещь как ABS. С Gentoo и так всё ясно — по умолчанию."),"\n",s.createElement(n.h3,{id:"ставим-бинарные-пакеты",style:{position:"relative"}},s.createElement(n.a,{href:"#%D1%81%D1%82%D0%B0%D0%B2%D0%B8%D0%BC-%D0%B1%D0%B8%D0%BD%D0%B0%D1%80%D0%BD%D1%8B%D0%B5-%D0%BF%D0%B0%D0%BA%D0%B5%D1%82%D1%8B","aria-label":"ставим бинарные пакеты permalink",className:"anchor before"},s.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"Ставим бинарные пакеты"),"\n",s.createElement(n.p,null,"Арч — бинарный дистрибутив и возможность ставить готовые пакеты, а не компилировать всё из исходников, заложена по-умолчанию."),"\n",s.createElement(n.p,null,"В gentoo есть возможность ставить бинарные пакеты, как правило, лишь для очень больших приложений (оно и понятно)."),"\n",s.createElement(n.h3,{id:"гибкость-менеджера-управлением-пакетов",style:{position:"relative"}},s.createElement(n.a,{href:"#%D0%B3%D0%B8%D0%B1%D0%BA%D0%BE%D1%81%D1%82%D1%8C-%D0%BC%D0%B5%D0%BD%D0%B5%D0%B4%D0%B6%D0%B5%D1%80%D0%B0-%D1%83%D0%BF%D1%80%D0%B0%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5%D0%BC-%D0%BF%D0%B0%D0%BA%D0%B5%D1%82%D0%BE%D0%B2","aria-label":"гибкость менеджера управлением пакетов permalink",className:"anchor before"},s.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"Гибкость менеджера управлением пакетов"),"\n",s.createElement(n.p,null,"И pacman, и emerge хороши. Но emerge — инструмент куда более гибкий (и куда более медленный)."),"\n",s.createElement(n.h3,{id:"обновление-конфигурационных-файлов-системы",style:{position:"relative"}},s.createElement(n.a,{href:"#%D0%BE%D0%B1%D0%BD%D0%BE%D0%B2%D0%BB%D0%B5%D0%BD%D0%B8%D0%B5-%D0%BA%D0%BE%D0%BD%D1%84%D0%B8%D0%B3%D1%83%D1%80%D0%B0%D1%86%D0%B8%D0%BE%D0%BD%D0%BD%D1%8B%D1%85-%D1%84%D0%B0%D0%B9%D0%BB%D0%BE%D0%B2-%D1%81%D0%B8%D1%81%D1%82%D0%B5%D0%BC%D1%8B","aria-label":"обновление конфигурационных файлов системы permalink",className:"anchor before"},s.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"Обновление конфигурационных файлов системы"),"\n",s.createElement(n.p,null,"В арче делается ручками. Большинство арчеводов активно испольуют программку ",s.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">diff</code>'}})," для сравнения изменившихся конфигурационных файлов и их последующей (ручной) правки. Не особенно удобно."),"\n",s.createElement(n.p,null,"Gentoo предлагает использовать команду ",s.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">etc-update</code>'}}),", что очень удобно."),"\n",s.createElement(n.h3,{id:"разнообразие-софта",style:{position:"relative"}},s.createElement(n.a,{href:"#%D1%80%D0%B0%D0%B7%D0%BD%D0%BE%D0%BE%D0%B1%D1%80%D0%B0%D0%B7%D0%B8%D0%B5-%D1%81%D0%BE%D1%84%D1%82%D0%B0","aria-label":"разнообразие софта permalink",className:"anchor before"},s.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"Разнообразие софта"),"\n",s.createElement(n.p,null,"Обычно имеющихся пакетов хватает как в случае с archlinux, так и в случае с gentoo. Но если нужной программы нет, это тоже не большая беда."),"\n",s.createElement(n.p,null,"Арч предоставляет для установки пакетов, не входящих в основной репозиторий, репозиторий пользовательский — AUR, отличная вещь."),"\n",s.createElement(n.p,null,"В Gentoo для подобных нужд есть оверлеи и связанная с ними программа ",s.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">layman</code>'}}),". Так что от недостатка программного обеспечения страдать в любом случае не придётся."),"\n",s.createElement(n.p,null,"Честно сказать, автору так и не удалось ответить на главный для себя вопрос: Arch или Gentoo? Оба дистрибутива по-своему хороши, оба имеют свои недостатки. И — да — оба неидеальны. От подобных мыслей линуксоиды обычно спасались созданием дистрибутива собственного ;)"))}var c=function(e){void 0===e&&(e={});const{wrapper:n}=Object.assign({},(0,t.MN)(),e.components);return n?s.createElement(n,e,s.createElement(l,e)):l(e)},r=a(7792),o=a(7619);function i(e){var n,a;let{data:{mdx:t},children:l,pageContext:{prev:c,next:i}}=e;const{h1:p,title:g,description:d,image:m,table_of_contents:h}=t.frontmatter;return(0,s.useEffect)((()=>{(0,o.K)()}),[]),s.createElement(s.Fragment,null,s.createElement(r._W,{h1:p,title:g,description:d,image:null===(n=t.frontmatter.image)||void 0===n?void 0:n.publicURL},s.createElement(r.MV,{post:t.frontmatter,imageData:null==m||null===(a=m.childImageSharp)||void 0===a?void 0:a.gatsbyImageData},h?s.createElement(r.G8,{headings:t.tableOfContents}):null,s.createElement("div",{className:"page__content"},l,s.createElement(r.Mf,{prev:c,next:i})),s.createElement(r.QZ,null))))}function p(e){return s.createElement(i,e,s.createElement(c,e))}},8876:function(e,n,a){a.d(n,{MN:function(){return l}});var t=a(4424);const s=t.createContext({});function l(e){const n=t.useContext(s);return t.useMemo((()=>"function"==typeof e?e(n):{...n,...e}),[n,e])}}}]);