<!DOCTYPE html><html lang="ru"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta name="yandex-verification" content="494a81ecb0e796d6"/><meta name="theme-color" content="#DFDBE5"/><meta name="description" content="Повествование о создании простого блога на sinatra" data-gatsby-head="true"/><meta property="og:title" content="О чём поёт Sinatra" data-gatsby-head="true"/><meta property="og:description" content="Повествование о создании простого блога на sinatra" data-gatsby-head="true"/><meta property="og:type" content="website" data-gatsby-head="true"/><meta property="og:image" content="https://www.unix-lab.org/sinatra.jpg" data-gatsby-head="true"/><meta name="twitter:card" content="summary_large_image" data-gatsby-head="true"/><meta name="twitter:site" content="@octowed" data-gatsby-head="true"/><meta name="twitter:creator" content="@octowed" data-gatsby-head="true"/><meta name="twitter:title" content="О чём поёт Sinatra" data-gatsby-head="true"/><meta name="twitter:description" content="Повествование о создании простого блога на sinatra" data-gatsby-head="true"/><meta name="twitter:image" content="https://www.unix-lab.org/sinatra.jpg" data-gatsby-head="true"/><style data-href="/styles.28a11c2c77d6ee440702.css" data-identity="gatsby-global-css">@import url(https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap);*,:after,:before{box-sizing:border-box}:root{-moz-tab-size:4;tab-size:4}html{-webkit-text-size-adjust:100%;line-height:1.15}body{margin:0}hr{height:0}abbr[title]{text-decoration:underline dotted}b,strong{font-weight:bolder}code,kbd,pre,samp{font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;font-size:1em}small{font-size:80%}sub,sup{font-size:75%}button,input,optgroup,select,textarea{font-family:inherit;font-size:100%;line-height:1.15;margin:0}button,select{text-transform:none}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{padding:.35em .75em .625em}legend{padding:0}progress{vertical-align:baseline}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}summary{display:list-item}:root{--hslPercent:0%;--textColor:#3f3f3f;--bgColor:#fff;--bgTags:#f7f7f7;--sidebarColor:#e8e8e8;--textSmoothColor:hsl(0,0%,calc(74.9% + var(var(--hslPercent))));--yellowColor:#ffd01b;--redColor:#c31;--linkColor:#70a0b0;--linkStyle:"none";--vikingColor:#34adc5;--iconColor:rgba(0,0,0,.8);--bodyBgColor:#dfdbe5;--borderColor:#dfdbe5;--shadow:0 0 1px rgba(0,0,180,.1),0 0 1px rgb(0 0 80/6%),0 2px 2px rgb(0 0 80/6%),0 2px 2px rgb(0 0 80/6%),0 1px 1px rgb(0 0 80/1%),0 8px 8px rgb(0 0 80/6%)}.inverted{--hslPercent:20%;--textColor:#a9a9b3;--bgColor:#1d2026;--bgTags:rgba(0,0,0,.5);--sidebarColor:#18171c;--iconColor:hsla(0,0%,100%,.8);--bodyBgColor:#1d2026;--borderColor:hsla(0,0%,100%,.2);--linkColor:#a9a9b3;--linkStyle:underline}@media (prefers-color-scheme:dark){:root{--hslPercent:20%;--textColor:#a9a9b3;--bgColor:#1d2026;--bgTags:rgba(0,0,0,.5);--sidebarColor:#18171c;--iconColor:hsla(0,0%,100%,.8);--bodyBgColor:#1d2026;--borderColor:hsla(0,0%,100%,.2);--linkColor:#a9a9b3;--linkStyle:underline}.inverted{--hslPercent:0%;--textColor:#3f3f3f;--bgColor:#fff;--bgTags:#f7f7f7;--sidebarColor:#e8e8e8;--iconColor:rgba(0,0,0,.8);--bodyBgColor:#dfdbe5;--borderColor:#dfdbe5;--linkColor:#70a0b0;--linkStyle:"none"}}@font-face{font-display:swap;font-family:Philosopher;font-style:normal;font-weight:700;src:url(/fonts/Philosopher_ru.woff2) format("woff2");unicode-range:u+0400-045f,u+0490-0491,u+04b0-04b1,u+2116}@font-face{font-display:swap;font-family:Philosopher;font-style:normal;font-weight:700;src:url(/fonts/Philosopher_en.woff2) format("woff2");unicode-range:u+00??,u+0131,u+0152-0153,u+02bb-02bc,u+02c6,u+02da,u+02dc,u+2000-206f,u+2074,u+20ac,u+2122,u+2191,u+2193,u+2212,u+2215,u+feff,u+fffd}h1,h2,h3,h4,h5,h6{font-family:Philosopher,-apple-system,BlinkMacSystemFont,Segoe UI,Arial,sans-serif;font-weight:700}html{font-size:16px;line-height:21px}body{font-family:Inter,-apple-system,BlinkMacSystemFont,Segoe UI,Arial,sans-serif;font-size:1rem;font-weight:400;line-height:1.5rem}h1,h2,h3,h4,h5,h6{margin-bottom:10px;margin-top:2rem}h1{font-size:2.8125rem;line-height:3.9375rem}h2{font-size:2rem}h2,h3{line-height:2.625rem}h3{font-size:1.4375rem}h4{line-height:1.3125rem}h4,h5{font-size:1rem}h5{font-size:.8rem;line-height:1.3125rem}blockquote,ol,p,table,ul{margin-bottom:1.3125rem;margin-top:0}ol ol,ol ul,ul ol,ul ul{margin-bottom:0;margin-top:0}.hr,hr{border:1px solid;margin:-1px 0}a,b,code,em,i,small,strong{line-height:1.3}sub,sup{line-height:0;position:relative;vertical-align:baseline}sup{top:-.5em}sub{bottom:-.25em}#___gatsby{overflow:hidden}.layout{background-color:var(--bgColor);display:flex;flex-direction:column;justify-content:space-between;max-width:1200px;min-height:100vh;padding:1rem 0 0}.page{margin:60px auto 0;width:90%}.articles{list-style:none;margin:0;padding:0}.gatsby-highlight{margin-bottom:2.5rem}@media (min-width:640px){.articles{align-items:flex-end;display:flex;flex-flow:row wrap;justify-content:space-between}.articles li{width:25%}}@media (min-width:960px){.layout{box-shadow:1px 0 3px var(--textSmoothColor);margin:2rem;min-height:auto}.gatsby-highlight{max-width:860px}}@media (min-width:1300px){.layout{margin:2rem auto}}.footer-module--footer--03d8a{display:flex;flex-flow:row wrap;justify-content:center;margin-top:5rem;min-height:50px;padding:1rem 0}.footer-module--footer__link--22faa{display:block}.footer-module--footer--03d8a a[target=_blank]:after{content:""}.footer-module--footer__link--22faa svg{height:15px;width:86px}.footer-module--footer__link--22faa:nth-child(2) svg{height:20px}@media (min-width:640px){.footer-module--footer__link--22faa svg{width:125px}}.gatsby-code-button-buffer{background-color:#f5f5f5;height:18px;position:absolute;right:2px;top:0;width:18px}.gatsby-code-button-buffer svg{height:16px;width:16px}body{-webkit-font-smoothing:antialiased;background-color:var(--bgColor);color:var(--textColor);text-rendering:optimizelegibility}.hidden{display:none}a{color:var(--linkColor);text-decoration:none}a:hover{text-decoration:underline}a[target=_blank]{margin-right:3px}a[target=_blank]:after{content:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNSIgaGVpZ2h0PSIxNSIgYXJpYS1oaWRkZW49InRydWUiIGNsYXNzPSJwcmVmaXhfX2ljb24gcHJlZml4X19pY29uX2V4dGVybmFsIiB2aWV3Qm94PSIwIDAgMTAwIDEwMCI+PHBhdGggZmlsbD0iI2FhYSIgZD0iTTE4LjggODUuMWg1NmMyLjIgMCA0LTEuOCA0LTR2LTMyaC04djI4aC00OHYtNDhoMjh2LThoLTMyYy0yLjIgMC00IDEuOC00IDR2NTZjMCAyLjIgMS44IDQgNCA0eiIvPjxwb2x5Z29uIGZpbGw9IiNhYWEiIHBvaW50cz0iNDUuNyA0OC43IDUxLjMgNTQuMyA3Ny4yIDI4LjUgNzcuMiAzNy4yIDg1LjIgMzcuMiA4NS4yIDE0LjkgNjIuOCAxNC45IDYyLjggMjIuOSA3MS41IDIyLjkiLz48L3N2Zz4=);margin-left:3px}table,td,th{border:1px solid var(--textSmoothColor);padding:10px}table{border-collapse:collapse;border-color:transparent;display:block;margin:0 auto;overflow-x:auto;width:100%}@media screen and (min-width:640px){table{border-color:var(--textSmoothColor);border-radius:5px;display:table;margin:40px 0}}blockquote{background-color:var(--bgTags);border-left:2px solid var(--redColor);margin:0 0 1rem;padding:1em 1em 1em 2em;position:relative}blockquote p{margin-bottom:1em;margin-top:0}blockquote:before{content:'"';font-size:2em;left:.3em;line-height:2em;position:absolute;top:0}@media screen and (min-width:768px){blockquote{font-size:1.5rem;line-height:1.3;margin-right:auto;max-width:860px}}button{background:none;border:none;line-height:0;padding:0}.button{align-items:center;background-color:transparent;border:1px solid var(--borderColor);color:var(--textColor);display:inline-flex;font-size:11px;height:100%;letter-spacing:.5px;line-height:1;outline:none;padding:20px 3rem;position:relative;text-decoration:none;text-transform:uppercase}.button_link{border:0;padding:1rem}.button_small{padding:10px 3rem}.button__icon{display:inline-flex;height:15px;margin-left:10px;position:relative;width:15px}.button__icon:after,.button__icon:before{background:var(--textColor);content:"";height:1px;position:absolute;top:50%;width:6px}.button__icon:before{left:2.5px;transform:rotate(45deg)}.button__icon:after{right:2.5px;transform:rotate(-45deg)}iframe,video{height:auto;margin-bottom:1rem;max-width:800px;min-height:300px;width:100%}body{background-color:var(--bodyBgColor)}.header{align-items:center;display:grid;grid-template-columns:3fr 48px 40px 40px;justify-content:flex-end;margin:0 auto;padding:1rem 0;position:relative;width:90%}.header__logo{margin-right:auto}.header__tags{display:none!important}.header__tagsSwitcher{outline:none}.header__tagsSwitcher svg{height:22px;width:30px}@media (min-width:640px){.header{grid-template-columns:60px 2fr 30px 30px;margin:0 auto}.header__tags{display:flex!important}.header__tagsSwitcher{display:none}}.logo{display:flex;height:40px;width:40px}.logo:hover{transform:scale(1.1)}a.next-prev-module--link--3ae6f{border-color:var(--textColor);border-style:dotted;border-width:1px 0;color:var(--textColor);padding:5px 15px;text-decoration:none!important}a.next-prev-module--link--3ae6f:hover{border-style:dashed}.next-prev-module--link__separator--e12da{background-color:var(--textColor);border-radius:50%;display:inline-block;height:6px;margin-left:10px;margin-right:10px;width:6px}.next-prev-module--link__title--a796e{color:var(--textColor);display:block;font-size:1em;font-weight:700;margin-top:10px}.next-prev-module--links--d62c5{align-items:center;display:flex;flex-wrap:row wrap;margin:2rem 0}.searchBlock{display:flex}.searchBlock_active{position:absolute;right:0;top:1rem;width:calc(100% - 1rem);z-index:10}.searchForm{opacity:1;pointer-events:all;position:relative;width:100%}.searchForm_hidden{opacity:0;pointer-events:none;width:0}.searchForm__input{appearance:none;background:var(--bgColor);border:1px solid var(--textColor);border-radius:20px;color:var(--textColor);font-size:16px;line-height:1.2;outline:none;padding:.5rem 40px .5rem 1rem;position:relative;width:100%;z-index:10}.searchForm_hidden input{opacity:0;width:0}.searchForm__button{cursor:pointer;margin:auto;outline:none;width:30px}.searchForm__button_close{background-color:var(--textColor);border-radius:50%;height:28px;padding:4px;position:absolute;right:4px;top:4px;width:28px;z-index:11}.searchForm__button_close svg{fill:var(--bgColor)}.searchForm__list{background-color:var(--bgColor);list-style:none;padding:5px 0 5px 10px;position:absolute;right:-5px;top:45px;width:100%;z-index:11}.searchForm__list a{color:var(--textColor);display:inline-block;font-size:14px;padding:.5rem 0}.searchForm__list a:hover{text-decoration:underline}@media (min-width:460px){.searchBlock_active,.searchForm{width:300px}.searchForm_hidden{width:0}.searchForm__button_close{right:4px}.searchForm__list{width:300px}}@media (min-width:640px){.searchBlock{top:inherit}}.tags-module--tags--512d6{align-items:center;display:flex;flex-flow:row wrap;list-style:none;margin:0;padding:0}.tags-module--tags--512d6 a{background-color:#333;border-radius:3px;color:#fff;font-size:10px;letter-spacing:.5px;margin:1px 1px 3px;padding:8px 10px;text-decoration:none;text-transform:uppercase;transition:all .3s cubic-bezier(.4,.01,.165,.99)}.tags-module--tags--512d6 li{margin:7px 0}.tags-module--tags--512d6 li:not(:last-child){margin-right:5px}.tags-module--tags--512d6 a:hover{background-color:#bfbfbf;text-decoration:none}.tags-module--tags_page--6ce9e li{margin:0 0 35px}.tags-module--tags_page--6ce9e a{font-size:1.2rem;padding:.8rem 1.5rem}.tags-module--tags_header--f87a8{grid-row:2;margin:10px auto}@media (min-width:640px){.tags-module--tags_header--f87a8{grid-column:2;grid-row:1;margin:10px}}summary::-webkit-details-marker{display:none}.toc-module--details--fda91{margin:1rem auto 2rem}.toc-module--list--5acce{list-style:none;margin-top:1rem;padding-left:0}.toc-module--list__item--75273{margin-bottom:.5rem}.page__content a{text-decoration:var(--linkStyle)}.page__content a:hover{text-decoration:underline}.article__header{border-bottom:1px solid var(--borderColor);border-top:1px solid var(--borderColor);display:flex;margin-bottom:1rem;max-width:960px}.article__header_inList{display:block}.article__box{align-items:center;display:flex;flex-flow:row wrap;padding-bottom:1rem}.article__image{background-color:#708090;background-position:50%;background-repeat:no-repeat;background-size:cover;clip-path:polygon(25% 0,100% 0,100% 100%,0 100%);display:flex;min-height:200px;width:100%}.article__image_inList{clip-path:polygon(0 0,90% 0,100% 100%,10% 100%);filter:none}.article__image_inList:hover{filter:saturate(60%)}.article__title{font-size:26px;line-height:1.2;margin:1rem 0;width:100%}.article_inList .article__title{font-family:Roboto,-apple-system,BlinkMacSystemFont,Segoe UI,Arial,sans-serif;font-size:.9rem;margin-bottom:0}.article_inList .article__date{font-size:.8rem;margin-left:0}.articles li:first-child .article__image{height:340px}.articles li:nth-child(2) .article__image{height:280px}.article__tag{color:var(--textColor);font-size:.9rem;letter-spacing:-.00879776em;margin-right:10px}.article__tag,.article__tag:hover{text-decoration:none}.article__tag:hover span{background-color:var(--bgTags)}.article__tag span{border:1px solid var(--borderColor);padding:5px 15px}.article__date{font-size:.9rem}.comments{margin-bottom:2rem}.article .gatsby-resp-image-wrapper{box-shadow:var(--shadow);margin:1.5rem 0}@media (min-width:620px){.article{margin-left:60px}.article_inList{margin-left:0}.article__title{font-size:32px}}@media (min-width:960px){.article__title{font-size:42px}.article h2,.article h3,.article h4,.article h5,.article h6,.article ol,.article p,.article ul,.comments{max-width:620px}.article .gatsby-resp-image-wrapper{margin-left:0!important;width:760px}.article table{width:860px}}@media (min-width:1200px){.article .gatsby-resp-image-wrapper{width:860px}}.tip-module--tip--f7b96{border:1px solid #42b983;border-left-width:.5rem;margin:1rem 0;padding:1rem 1.5rem}.tip-module--heading--d9f2b{font-weight:700;margin-bottom:.5rem}.tip-module--warning--6d7c1{border-color:coral}.tip-module--danger--0857a{border-color:crimson}@media (min-width:960px){.tip-module--tip--f7b96{max-width:620px}}.tabs-module--tabs--0e384{perspective:300px}.tabs-module--tab__buttons--cdbc9{border-bottom:1px solid var(--vikingColor);display:inline-flex;overflow-x:auto;width:100%}.tabs-module--tab__button--5cfcd{background-color:transparent;border:none;border:1px solid var(--vikingColor);border-bottom:none;color:var(--textColor);cursor:pointer;display:block;outline:none;padding:1rem;transition:background-color .3s;white-space:nowrap}.tabs-module--tab__button--5cfcd:not(:last-child){margin-right:5px}.tabs-module--tab__button_active--9de04{background-color:var(--vikingColor);color:#fff}.tabs-module--tab_single--ccb24{line-height:1.4em;opacity:0;padding:1.5rem 0 1rem;pointer-events:none;position:absolute;transform:rotateX(-20deg);transform-origin:top center;z-index:0}.tabs-module--tab_single_active--3ae69{pointer-events:inherit}@media (min-width:960px){.tabs-module--tab__buttons--cdbc9{width:auto}}.icon{fill:var(--iconColor);cursor:pointer}.icon_mail,.icon_telegram,.icon_twitter{fill:var(--textColor);margin:0 10px}.icon_search,.icon_theme{height:22px;width:22px}.theme-switcher-module--themeSwitcher--032b9{cursor:pointer;margin:auto;outline:none;width:30px}._404-module--not_found--8156c{align-items:center;display:flex;flex-direction:column}._404-module--title--80dc8{font-size:5rem;margin-bottom:1rem}.taglist-module--page--417be{margin:0 auto;max-width:960px}.taglist-module--title--674b9{margin:0}.taglist-module--wrapper--0a364{align-items:center;display:flex;flex-flow:row wrap;margin-bottom:2rem}.taglist-module--tags--29a31{margin:0;padding:0}.taglist-module--tag--faafd{list-style-type:none;padding:.5rem;position:relative}.taglist-module--tag--faafd a{color:var(--textColor);text-decoration:none}.taglist-module--tag--faafd a:hover{text-decoration:underline}@media screen and (min-width:640px){.taglist-module--tags--29a31{display:grid;grid-template-columns:repeat(auto-fit,minmax(50%,1fr))}.taglist-module--tag--faafd{border-bottom:1px solid rgba(0,96,160,.15)}}:root{--codeBgColor:#fbfdff;--codeSaturation:0%;--codeColor:#505362}.inverted{--codeBgColor:#282c34;--codeColor:#bfbfbf;--codeSaturation:30%;--aga:hsl(255,255,50%)}@media (prefers-color-scheme:dark){:root{--codeBgColor:#282c34;--codeColor:#bfbfbf;--codeSaturation:30%}.inverted{--codeBgColor:#fbfdff;--codeColor:#505362;--codeSaturation:0%}}.gatsby-highlight{border-radius:4px;box-shadow:var(--shadow);overflow:auto;position:relative}@media (min-width:960px){.gatsby-highlight{max-width:860px}}.gatsby-highlight pre{margin-bottom:0;margin-top:0}code[class*=language-],pre[class*=language-]{word-wrap:normal;background:none;color:var(--codeColor);font-family:Consolas,Liberation Mono,Menlo,Courier,monospace;font-size:.85rem;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;text-align:left;white-space:pre;word-break:normal;word-spacing:normal}pre[class*=language-]{overflow:auto;padding:1em}pre>code[class*=language-]{font-size:.8rem}:not(pre)>code[class*=language-],pre[class*=language-]{background:#fff;background:var(--codeBgColor)}:not(pre)>code[class*=language-]{border-radius:.3em;padding:.1em;white-space:normal}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#a0a1a7}.token.operator,.token.punctuation{color:var(--codeColor)}.token.selector,.token.tag{color:hsl(209,30%,calc(45% + var(--codeSaturation)))}.token.attr-name,.token.boolean,.token.constant,.token.deleted,.token.number,.token.property,.token.symbol{color:hsl(19,64%,calc(45% + var(--codeSaturation)))}.token.attr-value,.token.builtin,.token.char,.token.inserted,.token.string{color:hsl(79,38%,calc(37% + var(--codeSaturation)))}.language-css .token.string,.style .token.string,.token.entity,.token.operator,.token.url{color:hsl(187,44%,calc(49% + var(--codeSaturation)))}.token.function{color:hsl(207,70%,calc(45% + var(--codeSaturation)))}.token.atrule,.token.important,.token.keyword,.token.regex,.token.variable{color:hsl(286,45%,calc(50% + var(--codeSaturation)))}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}pre.line-numbers{counter-reset:linenumber;padding-left:3.8em}pre.line-numbers,pre.line-numbers>code{position:relative}.line-numbers .line-numbers-rows{border-right:0;font-size:100%;left:-3.8em;letter-spacing:-1px;pointer-events:none;position:absolute;top:0;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;width:3em}.line-numbers-rows>span{counter-increment:linenumber;display:block;pointer-events:none}.line-numbers-rows>span:before{color:#b5b9c2;content:counter(linenumber);display:block;padding-right:.8em;text-align:right}.gatsby-highlight[data-language]:before{border-radius:0 0 4px 4px;color:#36313d;display:none;font-size:.75rem;letter-spacing:.075em;line-height:1;padding:.25rem .5rem;position:absolute;right:1.5rem;text-align:right;text-transform:uppercase;top:0}@media screen and (min-width:640px){.gatsby-highlight[data-language]:before{display:block}}.gatsby-highlight[data-language=javascript]:before,.gatsby-highlight[data-language=js]:before,.gatsby-highlight[data-language=jsx]:before{background:#ffd01b;color:#36313d}.gatsby-highlight[data-language=javascript]:before,.gatsby-highlight[data-language=js]:before,.gatsby-highlight[data-language=jsx]:before{content:"js"}.gatsby-highlight[data-language=jsx]:before{background:#61dafb;content:"jsx"}.gatsby-highlight[data-language=ts]:before,.gatsby-highlight[data-language=tsx]:before,.gatsby-highlight[data-language=typescript]:before{background:#294e80;color:#fff}.gatsby-highlight[data-language=ts]:before,.gatsby-highlight[data-language=typescript]:before{content:"ts"}.gatsby-highlight[data-language=tsx]:before{content:"tsx"}.gatsby-highlight[data-language=html]:before{background:#005a9c;color:#fff;content:"html"}.gatsby-highlight[data-language=xml]:before{background:#00749c;color:#fff;content:"xml"}.gatsby-highlight[data-language=php]:before{background:#69c;color:#fff;content:"php"}.gatsby-highlight[data-language=css]:before{background:#ff9800;content:"css"}.gatsby-highlight[data-language=c]:before,.gatsby-highlight[data-language=mdx]:before{background:#f9ac00;font-weight:400}.gatsby-highlight[data-language=c]:before{content:"c"}.gatsby-highlight[data-language=mdx]:before{content:"mdx"}.gatsby-highlight[data-language=bash]:before,.gatsby-highlight[data-language=conf]:before,.gatsby-highlight[data-language=markdown]:before,.gatsby-highlight[data-language=sh]:before,.gatsby-highlight[data-language=shell]:before{background:silver}.gatsby-highlight[data-language=bash]:before,.gatsby-highlight[data-language=sh]:before{content:"bash"}.gatsby-highlight[data-language=shell]:before{content:"shell"}.gatsby-highlight[data-language=sh]:before{content:"conf"}.gatsby-highlight[data-language=markdown]:before{content:"md"}.gatsby-highlight[data-language=json5]:before,.gatsby-highlight[data-language=json]:before{background:linen;color:#36313d;content:"json"}.gatsby-highlight[data-language=diff]:before{background:#e6ffed;content:"diff"}.gatsby-highlight[data-language=text]:before{background:transparent;content:""}.gatsby-highlight[data-language=sass]:before,.gatsby-highlight[data-language=yaml]:before{background:#ffa8df}.gatsby-highlight[data-language=yaml]:before{content:"yaml"}.gatsby-highlight[data-language=sass]:before{content:"sass"}.gatsby-highlight[data-language=rb]:before,.gatsby-highlight[data-language=ruby]:before{background:#cc342d;color:#fff;content:"rb"}.gatsby-highlight[data-language=erb]:before{background:#de7768;color:#fff;content:"erb"}.gatsby-highlight[data-language=tex]:before{background:#de6894;color:#fff;content:"tex"}.gatsby-highlight[data-language=graphql]:before{background:#e10098;color:#fff;content:"GraphQL"}.gatsby-highlight[data-language=lisp]:before{background:#7f5ab6;color:#fff;content:"lisp"}.gatsby-highlight[data-language=vue]:before{background:#4fc08d;color:#fff;content:"vue"}.gatsby-highlight[data-language=py]:before,.gatsby-highlight[data-language=python]:before{background:#093;color:#fff;content:"py"}.gatsby-highlight[data-language=django]:before{background:#44b78b;color:#fff;content:"html"}</style><link rel="icon" href="/favicon-32x32.png?v=811a7931fba03b4e9798857dcaf98dd9" type="image/png"/><link rel="manifest" href="/manifest.webmanifest" crossorigin="anonymous"/><link rel="apple-touch-icon" sizes="48x48" href="/icons/icon-48x48.png?v=811a7931fba03b4e9798857dcaf98dd9"/><link rel="apple-touch-icon" sizes="72x72" href="/icons/icon-72x72.png?v=811a7931fba03b4e9798857dcaf98dd9"/><link rel="apple-touch-icon" sizes="96x96" href="/icons/icon-96x96.png?v=811a7931fba03b4e9798857dcaf98dd9"/><link rel="apple-touch-icon" sizes="144x144" href="/icons/icon-144x144.png?v=811a7931fba03b4e9798857dcaf98dd9"/><link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192x192.png?v=811a7931fba03b4e9798857dcaf98dd9"/><link rel="apple-touch-icon" sizes="256x256" href="/icons/icon-256x256.png?v=811a7931fba03b4e9798857dcaf98dd9"/><link rel="apple-touch-icon" sizes="384x384" href="/icons/icon-384x384.png?v=811a7931fba03b4e9798857dcaf98dd9"/><link rel="apple-touch-icon" sizes="512x512" href="/icons/icon-512x512.png?v=811a7931fba03b4e9798857dcaf98dd9"/><style type="text/css">
    .anchor.before {
      position: absolute;
      top: 0;
      left: 0;
      transform: translateX(-100%);
      padding-right: 4px;
    }
    .anchor.after {
      display: inline-block;
      padding-left: 4px;
    }
    h1 .anchor svg,
    h2 .anchor svg,
    h3 .anchor svg,
    h4 .anchor svg,
    h5 .anchor svg,
    h6 .anchor svg {
      visibility: hidden;
    }
    h1:hover .anchor svg,
    h2:hover .anchor svg,
    h3:hover .anchor svg,
    h4:hover .anchor svg,
    h5:hover .anchor svg,
    h6:hover .anchor svg,
    h1 .anchor:focus svg,
    h2 .anchor:focus svg,
    h3 .anchor:focus svg,
    h4 .anchor:focus svg,
    h5 .anchor:focus svg,
    h6 .anchor:focus svg {
      visibility: visible;
    }
  </style><script>
    document.addEventListener("DOMContentLoaded", function(event) {
      var hash = window.decodeURI(location.hash.replace('#', ''))
      if (hash !== '') {
        var element = document.getElementById(hash)
        if (element) {
          var scrollTop = window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop
          var clientTop = document.documentElement.clientTop || document.body.clientTop || 0
          var offset = element.getBoundingClientRect().top + scrollTop - clientTop
          // Wait for the browser to finish rendering before scrolling.
          setTimeout((function() {
            window.scrollTo(0, offset - 0)
          }), 0)
        }
      }
    })
  </script><link rel="sitemap" type="application/xml" href="/sitemap-index.xml"/><title data-gatsby-head="true">О чём поёт Sinatra</title><link rel="preload" as="font" type="font/woff2" href="/fonts/Philosopher_ru.woff2" crossorigin="anonymous" data-gatsby-head="true"/><link rel="preload" as="font" type="font/woff2" href="/fonts/Philosopher_en.woff2" crossorigin="anonymous" data-gatsby-head="true"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><svg width="0" height="0" class="hidden" preserveAspectRatio="xMidYMid meet"><symbol viewBox="0 0 470 146" xmlns="http://www.w3.org/2000/svg" id="email"><path d="M50.98 145.758c11.915 0 22.56-3.353 31.934-10.059 9.375-6.706 16.667-16.21 21.875-28.515L81.156 95.758c-3.45 6.575-7.633 11.588-12.549 15.039-4.915 3.45-10.237 5.176-15.966 5.176-6.12 0-11.296-2.344-15.528-7.032-4.231-4.687-6.347-10.481-6.347-17.382 0-6.771 2.148-12.484 6.445-17.14 4.297-4.654 9.505-6.981 15.625-6.981 1.953 0 3.841.276 5.664.83 1.823.553 3.58 1.383 5.273 2.49L37.797 88.824l12.012 18.164 47.949-32.617C92.615 64.215 86.039 56.484 78.03 51.178c-8.008-5.306-17.024-7.96-27.05-7.96-6.706 0-13.07 1.27-19.092 3.81-6.022 2.538-11.377 6.184-16.065 10.937-4.883 4.948-8.577 10.514-11.084 16.7C2.234 80.848.98 87.424.98 94.39c0 6.966 1.254 13.541 3.76 19.726 2.507 6.185 6.201 11.751 11.084 16.7 4.688 4.817 10.075 8.512 16.162 11.083 6.088 2.572 12.419 3.858 18.994 3.858zM145.414 144V86.969c0-4.037 1.204-7.373 3.613-10.01 2.41-2.637 5.47-3.955 9.18-3.955 3.776 0 6.901 1.318 9.375 3.955s3.711 5.973 3.711 10.01V144h30.566V86.969c0-4.037 1.237-7.373 3.711-10.01 2.474-2.637 5.567-3.955 9.278-3.955 3.71 0 6.77 1.318 9.18 3.955 2.408 2.637 3.613 5.973 3.613 10.01V144h30.761V91.754c0-14.844-3.971-26.677-11.914-35.498-7.942-8.822-18.49-13.233-31.64-13.233-5.078 0-10.091 1.123-15.04 3.37-4.947 2.246-9.407 5.452-13.378 9.619-3.841-4.232-8.252-7.455-13.233-9.668-4.98-2.214-10.302-3.32-15.967-3.32-12.565 0-22.77 4.46-30.615 13.378-7.845 8.92-11.767 20.703-11.767 35.352V144h30.566zm175.781 1.367c1.953 0 4.07-.13 6.348-.39a82.914 82.914 0 0 0 7.227-1.172v-32.422c-3.06.976-5.534 1.66-7.422 2.05-1.888.391-3.549.587-4.98.587-5.925 0-10.597-1.79-14.014-5.372-3.418-3.58-5.127-8.398-5.127-14.453 0-5.86 1.627-10.595 4.882-14.209 3.256-3.613 7.487-5.42 12.696-5.42 6.315 0 11.067 1.856 14.257 5.567 3.19 3.71 4.786 9.212 4.786 16.504V144h30.957v-42.093c-.018-8.632-.36-14.963-1.026-18.991-.683-4.134-1.806-7.894-3.369-11.28-4.036-8.853-10.091-15.836-18.164-20.947-8.073-5.11-17.09-7.666-27.05-7.666-14.454 0-26.368 4.818-35.743 14.454-9.375 9.635-14.062 21.875-14.062 36.718 0 14.844 4.687 27.084 14.062 36.72 9.375 9.634 21.29 14.452 35.742 14.452zm82.618-108.984c5.013 0 9.293-1.774 12.841-5.322 3.548-3.549 5.323-7.83 5.323-12.842 0-5.013-1.775-9.278-5.323-12.793-3.548-3.516-7.828-5.274-12.841-5.274-5.014 0-9.294 1.758-12.842 5.274-3.548 3.515-5.323 7.78-5.323 12.793 0 5.013 1.775 9.293 5.323 12.842 3.548 3.548 7.828 5.322 12.841 5.322zM419.632 144V44.977h-31.64V144h31.64zm50 0V4.156h-31.64V144h31.64z"></path></symbol><symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 172 169" id="site-logo"><path d="M76.193 52.127V0h-47.86c-7.38.722-12.673 2.264-15.879 4.626C6.572 8.96 5.91 9.49 2.738 15.754.514 20.145-.355 25.21.13 30.949v137.56h144.352c4.745-.263 8.35-.862 10.816-1.795 3.7-1.399 3.834-2.369 6.541-4.769 1.806-1.6 3.23-3.58 4.274-5.94l2.642-5.698a28.541 28.541 0 0 0 3.043-12.824V0h-75.5v52.127h20.748v64.805h-61.89V52.127h21.037z" fill-rule="evenodd"></path></symbol><symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384.97 384.97" id="menu"><path d="M12.03 120.303h360.909c6.641 0 12.03-5.39 12.03-12.03 0-6.641-5.39-12.03-12.03-12.03H12.03c-6.641 0-12.03 5.39-12.03 12.03s5.39 12.03 12.03 12.03zm360.909 60.152H12.03c-6.641 0-12.03 5.39-12.03 12.03s5.39 12.03 12.03 12.03h360.909c6.641 0 12.03-5.39 12.03-12.03s-5.389-12.03-12.03-12.03zm0 84.212H132.333c-6.641 0-12.03 5.39-12.03 12.03 0 6.641 5.39 12.03 12.03 12.03h240.606c6.641 0 12.03-5.39 12.03-12.03.001-6.641-5.389-12.03-12.03-12.03z"></path></symbol><symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 22 22" id="search"><path d="M14.906 16.32a8 8 0 1 1 1.414-1.414l3.751 3.751-1.414 1.414-3.751-3.751zM10 16a6 6 0 1 0 0-12 6 6 0 0 0 0 12z"></path></symbol><symbol viewBox="0 0 784 185" xmlns="http://www.w3.org/2000/svg" id="telegram" preserveAspectRatio="xMidYMid meet"><path d="M56.16 140v-29.2H42c-3.841 0-6.527-.715-8.057-2.148-1.53-1.432-2.295-3.906-2.295-7.422V69.98H56.16V40.977H31.648v-24.22H.594v82.227c0 14.128 3.564 24.496 10.693 31.104 7.129 6.608 18.246 9.912 33.35 9.912H56.16zm61.23 1.758c11.915 0 22.56-3.353 31.934-10.059 9.375-6.706 16.667-16.21 21.875-28.515l-23.633-11.426c-3.45 6.575-7.633 11.588-12.548 15.039-4.916 3.45-10.238 5.176-15.967 5.176-6.12 0-11.296-2.344-15.528-7.032-4.231-4.687-6.347-10.481-6.347-17.382 0-6.771 2.148-12.484 6.445-17.14 4.297-4.654 9.505-6.981 15.625-6.981 1.953 0 3.841.276 5.664.83 1.823.553 3.58 1.383 5.274 2.49l-25.977 18.066 12.012 18.164 47.949-32.617c-5.143-10.156-11.719-17.887-19.727-23.193-8.007-5.306-17.024-7.96-27.05-7.96-6.706 0-13.07 1.27-19.092 3.81-6.022 2.538-11.377 6.184-16.065 10.937-4.882 4.948-8.577 10.514-11.084 16.7-2.506 6.184-3.76 12.76-3.76 19.726 0 6.966 1.254 13.541 3.76 19.726 2.507 6.185 6.202 11.751 11.084 16.7 4.688 4.817 10.075 8.512 16.162 11.083 6.088 2.572 12.42 3.858 18.995 3.858zM213.876 140V.156h-31.64V140h31.64zm64.16 1.758c11.914 0 22.559-3.353 31.934-10.059 9.375-6.706 16.666-16.21 21.875-28.515L308.21 91.758c-3.45 6.575-7.634 11.588-12.549 15.039-4.915 3.45-10.238 5.176-15.967 5.176-6.12 0-11.295-2.344-15.527-7.032-4.232-4.687-6.348-10.481-6.348-17.382 0-6.771 2.149-12.484 6.446-17.14 4.296-4.654 9.505-6.981 15.625-6.981 1.953 0 3.84.276 5.664.83 1.823.553 3.58 1.383 5.273 2.49l-25.976 18.066 12.011 18.164 47.95-32.617c-5.144-10.156-11.72-17.887-19.727-23.193-8.008-5.306-17.025-7.96-27.05-7.96-6.707 0-13.07 1.27-19.093 3.81-6.022 2.538-11.377 6.184-16.064 10.937-4.883 4.948-8.578 10.514-11.084 16.7-2.507 6.184-3.76 12.76-3.76 19.726 0 6.966 1.253 13.541 3.76 19.726 2.506 6.185 6.201 11.751 11.084 16.7 4.687 4.817 10.075 8.512 16.162 11.083 6.087 2.572 12.419 3.858 18.994 3.858zm108.692 42.676c16.406 0 29.036-4.346 37.89-13.038 8.854-8.69 13.281-21.012 13.281-36.962v-35.84c0-8.985-.341-15.544-1.025-19.678-.684-4.134-1.807-7.894-3.37-11.28-4.036-8.919-10.058-15.917-18.065-20.995-8.008-5.078-16.993-7.618-26.954-7.618-14.323 0-26.204 4.802-35.644 14.405-9.44 9.603-14.16 21.728-14.16 36.377 0 14.648 4.67 26.741 14.013 36.279 9.343 9.538 21.208 14.307 35.596 14.307 1.888 0 3.955-.13 6.201-.391 2.246-.26 4.77-.651 7.569-1.172v-31.445c-3.06.976-5.534 1.66-7.422 2.05-1.888.391-3.548.587-4.98.587-5.925 0-10.596-1.79-14.014-5.372-3.418-3.58-5.127-8.398-5.127-14.453 0-5.86 1.627-10.595 4.882-14.209 3.256-3.613 7.487-5.42 12.696-5.42 6.25 0 10.954 1.84 14.111 5.518 3.158 3.678 4.736 9.196 4.736 16.553v36.523c0 10.352-1.757 17.318-5.273 20.899-3.516 3.58-9.896 5.37-19.14 5.37-4.623 0-9.473-.455-14.551-1.367-5.079-.911-10.45-2.278-16.114-4.101v30.078a149.995 149.995 0 0 0 17.383 3.272c5.86.748 11.686 1.123 17.48 1.123zM485.262 140v-37.207c0-11.263 2.49-19.385 7.47-24.365 4.98-4.98 13.103-7.471 24.366-7.471h1.367v-29.98h-3.711c-7.682 0-13.997 1.188-18.945 3.564-4.948 2.376-8.985 6.136-12.11 11.28V40.976h-28.613V140h30.176zm88.476 1.367c1.953 0 4.07-.13 6.348-.39a82.914 82.914 0 0 0 7.226-1.172v-32.422c-3.06.976-5.533 1.66-7.421 2.05-1.888.391-3.549.587-4.98.587-5.925 0-10.597-1.79-14.015-5.372-3.417-3.58-5.126-8.398-5.126-14.453 0-5.86 1.627-10.595 4.882-14.209 3.256-3.613 7.487-5.42 12.696-5.42 6.315 0 11.067 1.856 14.257 5.567 3.19 3.71 4.786 9.212 4.786 16.504V140h30.957V98.594c0-8.985-.342-15.544-1.026-19.678-.683-4.134-1.806-7.894-3.369-11.28-4.036-8.853-10.091-15.836-18.164-20.947-8.073-5.11-17.09-7.666-27.05-7.666-14.454 0-26.368 4.818-35.743 14.454-9.375 9.635-14.062 21.875-14.062 36.718 0 14.844 4.687 27.084 14.062 36.72 9.375 9.634 21.29 14.452 35.742 14.452zM670.125 140V82.969c0-4.037 1.204-7.373 3.613-10.01 2.41-2.637 5.469-3.955 9.18-3.955 3.776 0 6.901 1.318 9.375 3.955s3.71 5.973 3.71 10.01V140h30.567V82.969c0-4.037 1.237-7.373 3.711-10.01 2.474-2.637 5.567-3.955 9.278-3.955 3.71 0 6.77 1.318 9.18 3.955 2.408 2.637 3.613 5.973 3.613 10.01V140h30.761V87.754c0-14.844-3.971-26.677-11.914-35.498-7.942-8.822-18.49-13.233-31.64-13.233-5.079 0-10.092 1.123-15.04 3.37-4.947 2.246-9.407 5.452-13.378 9.619-3.842-4.232-8.252-7.455-13.233-9.668-4.98-2.214-10.303-3.32-15.967-3.32-12.565 0-22.77 4.46-30.615 13.378-7.845 8.92-11.767 20.703-11.767 35.352V140h30.566z"></path></symbol><symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 22 22" id="theme"><circle cx="10" cy="10" r="8"></circle><circle cx="10" cy="10" r="6"></circle></symbol><symbol viewBox="0 0 597 146" xmlns="http://www.w3.org/2000/svg" id="twitter" preserveAspectRatio="xMidYMid meet"><path d="M56.16 144v-29.2H42c-3.841 0-6.527-.715-8.057-2.148-1.53-1.432-2.295-3.906-2.295-7.422V73.98H56.16V44.977H31.648v-24.22H.594v82.227c0 14.128 3.564 24.496 10.693 31.104 7.129 6.608 18.246 9.912 33.35 9.912H56.16zm115.625 1.758c12.63 0 22.852-4.427 30.664-13.281 7.813-8.855 11.719-20.606 11.719-35.254V44.977h-30.566v57.03c0 4.037-1.221 7.341-3.663 9.913-2.441 2.572-5.55 3.857-9.326 3.857-3.71 0-6.77-1.285-9.18-3.857-2.408-2.572-3.613-5.876-3.613-9.912V44.977h-30.76v57.03c0 4.037-1.205 7.341-3.614 9.913s-5.501 3.857-9.277 3.857c-3.711 0-6.803-1.285-9.277-3.857-2.474-2.572-3.711-5.876-3.711-9.912V44.977H70.613v52.246c0 14.843 3.972 26.644 11.914 35.4 7.943 8.757 18.49 13.135 31.641 13.135 5.143 0 10.156-1.107 15.039-3.32 4.883-2.214 9.277-5.372 13.184-9.473 3.776 4.167 8.186 7.34 13.232 9.521 5.046 2.181 10.433 3.272 16.162 3.272zm75.586-109.375c5.013 0 9.294-1.774 12.842-5.322 3.548-3.549 5.322-7.83 5.322-12.842 0-5.013-1.774-9.278-5.322-12.793C256.665 1.91 252.384.152 247.37.152c-5.013 0-9.294 1.758-12.842 5.274-3.548 3.515-5.322 7.78-5.322 12.793 0 5.013 1.774 9.293 5.322 12.842 3.548 3.548 7.83 5.322 12.842 5.322zM263.191 144V44.977h-31.64V144h31.64zm73.34 0v-29.2h-14.16c-3.841 0-6.527-.715-8.057-2.148-1.53-1.432-2.294-3.906-2.294-7.422V73.98h24.511V44.977H312.02v-24.22h-31.055v82.227c0 14.128 3.564 24.496 10.693 31.104 7.13 6.608 18.246 9.912 33.35 9.912h11.523zm70.41 0v-29.2h-14.16c-3.84 0-6.526-.715-8.056-2.148-1.53-1.432-2.295-3.906-2.295-7.422V73.98h24.511V44.977H382.43v-24.22h-31.055v82.227c0 14.128 3.564 24.496 10.693 31.104 7.13 6.608 18.246 9.912 33.35 9.912h11.523zm61.23 1.758c11.915 0 22.56-3.353 31.934-10.059 9.375-6.706 16.667-16.21 21.875-28.515l-23.632-11.426c-3.45 6.575-7.634 11.588-12.55 15.039-4.915 3.45-10.237 5.176-15.966 5.176-6.12 0-11.296-2.344-15.527-7.032-4.232-4.687-6.348-10.481-6.348-17.382 0-6.771 2.148-12.484 6.445-17.14 4.297-4.654 9.506-6.981 15.625-6.981 1.953 0 3.841.276 5.664.83 1.823.553 3.581 1.383 5.274 2.49l-25.977 18.066L467 106.988l47.95-32.617c-5.144-10.156-11.72-17.887-19.727-23.193-8.008-5.306-17.025-7.96-27.051-7.96-6.706 0-13.07 1.27-19.092 3.81-6.022 2.538-11.377 6.184-16.064 10.937-4.883 4.948-8.578 10.514-11.084 16.7-2.507 6.184-3.76 12.76-3.76 19.726 0 6.966 1.253 13.541 3.76 19.726 2.506 6.185 6.2 11.751 11.084 16.7 4.687 4.817 10.074 8.512 16.162 11.083 6.087 2.572 12.418 3.858 18.994 3.858zm95.02-1.758v-37.207c0-11.263 2.49-19.385 7.471-24.365 4.98-4.98 13.102-7.471 24.365-7.471h1.368v-29.98h-3.711c-7.683 0-13.998 1.188-18.946 3.564-4.948 2.376-8.984 6.136-12.11 11.28V44.976h-28.612V144h30.175z"></path></symbol></svg><div class="layout"><header class="header"><a class="logo header__logo" aria-label="Домой" href="/"><svg class="icon icon_logo" width="40" height="40" preserveAspectRatio="xMinYMax meet"><use xlink:href="#site-logo"></use></svg></a><ul class="tags-module--tags--512d6 tags-module--tags_header--f87a8 header__tags"><li><a href="/tags/tex/">TeX</a></li><li><a href="/tags/backend/">backend</a></li><li><a href="/tags/editors/">editors</a></li><li><a href="/tags/frontend/">frontend</a></li><li><a href="/tags/linux/">linux</a></li><li><a href="/tags/mobile/">mobile</a></li><li><a href="/tags/random/">random</a></li></ul><button type="button" class="header__tagsSwitcher" aria-label="Меню"><svg class="icon icon_menu"><use xlink:href="#menu"></use></svg></button><button type="button" class="theme-switcher-module--themeSwitcher--032b9" aria-label="Изменить тему"><svg class="icon icon_theme"><use xlink:href="#theme"></use></svg></button><div class="searchBlock "><form class="searchForm searchForm_hidden" action="#"><input class="searchForm__input" placeholder="Найти запись" aria-label="Поиск" value=""/></form><button type="button" class="searchForm__button " aria-label="Поиск"><svg class="icon icon_search"><use xlink:href="#search"></use></svg></button></div></header><main class="page"><article class="article"><header class="article__header"><div class="article__box"><h1 class="article__title">О чём поёт Sinatra</h1><a class="article__tag" href="/tags/backend/"><span>backend</span></a><span class="article__date">11 марта 2014</span></div><div class="article__image" style="background-image:url(
/static/ea2cdbcbfa3adddc3b79114d710f4848/62859/sinatra.webp);background-color:#282828"></div></header><ul class="toc-module--list--5acce"><li class="toc-module--list__item--75273" style="margin-left:11px"><a href="#введение">Введение</a></li><li class="toc-module--list__item--75273" style="margin-left:11px"><a href="#первые-шаги">П ервые шаги</a></li><li class="toc-module--list__item--75273" style="margin-left:11px"><a href="#миграции">Миграции</a></li><li class="toc-module--list__item--75273" style="margin-left:11px"><a href="#играем-с-tux&#x27;ом">Играем с tux&#x27;ом</a></li><li class="toc-module--list__item--75273" style="margin-left:11px"><a href="#crud">CRUD</a></li><li class="toc-module--list__item--75273" style="margin-left:11px"><a href="#валидация">Валидация</a></li><li class="toc-module--list__item--75273" style="margin-left:11px"><a href="#отложенные-публикации">Отложенные публикации</a><ul class="toc-module--list__item--75273"><li class="toc-module--list__item--75273" style="margin-left:16px"><a href="#миграция">Миграция</a></li><li class="toc-module--list__item--75273" style="margin-left:16px"><a href="#вывод-публикаций">Вывод публикаций</a></li></ul></li><li class="toc-module--list__item--75273" style="margin-left:11px"><a href="#отображение-дат">Отображение дат</a></li><li class="toc-module--list__item--75273" style="margin-left:11px"><a href="#markdown-и-архив-публикаций">Markdown и архив публикаций</a></li><li class="toc-module--list__item--75273" style="margin-left:11px"><a href="#развёртывание-приложения-на-heroku">Развёртывание приложения на Heroku</a></li><li class="toc-module--list__item--75273" style="margin-left:11px"><a href="#послесловие">Послесловие</a></li></ul><div class="page__content"><p>В продолжение темы о публикациях, способах их создания и размещения. На этот раз
попробуем приготовить основу блога, базирующегося на sinatra.</p>
<h2 id="введение" style="position:relative"><a href="#%D0%B2%D0%B2%D0%B5%D0%B4%D0%B5%D0%BD%D0%B8%D0%B5" aria-label="введение permalink" class="anchor before"><span><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></span></a>Введение</h2>
<p><em>Sinatra</em> — DSL (Domain Specific language, предметно-специфичный язык),
использующий интерфейс для разработки веб приложений <em>Rack</em>. Хотя в некоторых
источниках его гордо именуют веб-фреймворком, на официальном сайте можно
встретить следующую формулировку:</p>
<blockquote>
<p>Sinatra is a DSL for quickly creating web applications in Ruby with minimal
effort</p>
<p>Sinatra это DSL для быстрого создания веб-приложений на Ruby с минимальными усилиями</p>
</blockquote>
<p>В природе имеются и полноценные фреймворки, базирующиеся на sinatra. Padrino, например.</p>
<p>Увы, об истории создания самого Sinatra миру неизвестно ничего, кроме того факта, что
разработал его некий Blake Mizerany из солнечного штата Калифорния.</p>
<h2 id="первые-шаги" style="position:relative"><a href="#%D0%BF%D0%B5%D1%80%D0%B2%D1%8B%D0%B5-%D1%88%D0%B0%D0%B3%D0%B8" aria-label="первые шаги permalink" class="anchor before"><span><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></span></a>Первые шаги</h2>
<p>Для начала установим необходимый минимум зависимостей и поприветствуем мир. Для
сего несложного действа нам потребуется создать несколько файлов. Вот они:</p>
<span><div class="gatsby-highlight" data-language="shell"><pre class="language-shell"><code class="language-shell">$ <span class="token function">mkdir</span> sinatra <span class="token operator">&amp;&amp;</span> <span class="token builtin class-name">cd</span> sinatra
$ <span class="token function">touch</span> main.rb config.ru Gemfile</code></pre></div></span>
<p>При помощи <span><code class="language-text">main.rb</code></span> мы будем взывать к самому sinatra, <span><code class="language-text">config.ru</code></span> понадобится
нам для запуска нашего минималистичного веб-сервера, а в <span><code class="language-text">Gemfile</code></span> будут
сосредоточены те джемы, которые потребуются для запуска всего этого хозяйства.</p>
<span><div class="gatsby-highlight" data-language="ruby"><pre class="language-ruby"><code class="language-ruby"><span class="token comment"># main.rb</span>

<span class="token keyword">require</span> <span class="token string-literal"><span class="token string">'sinatra'</span></span> <span class="token comment"># подгрузить sinatra</span>
<span class="token comment"># sinatra имеет модульную структуру</span>
<span class="token comment"># что позволяет включать лишь необходимое:</span>
<span class="token comment"># require 'sinatra/base'</span>
<span class="token comment"># вывести на главной странице приветствие</span>
get <span class="token string-literal"><span class="token string">'/'</span></span> <span class="token keyword">do</span>
  <span class="token string-literal"><span class="token string">"&lt;h2>Hello!&lt;/h2>"</span></span>
<span class="token keyword">end</span></code></pre></div></span>
<p>Дальше заглянем в файл с нашими джемами:</p>
<span><div class="gatsby-highlight" data-language="ruby"><pre class="language-ruby"><code class="language-ruby"><span class="token comment"># Gemfile</span>

source <span class="token string-literal"><span class="token string">'https://rubygems.org'</span></span> <span class="token comment"># откуда брать gem'ы</span>
ruby <span class="token string-literal"><span class="token string">'2.1.0'</span></span> <span class="token comment"># версия руби</span>

gem <span class="token string-literal"><span class="token string">'sinatra'</span></span>
gem <span class="token string-literal"><span class="token string">'rake'</span></span></code></pre></div></span>
<p>Можно установить эти джемы вручную или же при помощи <span><code class="language-text">bundle</code></span>, ежели таковой у
вас уже имеется:</p>
<span><div class="gatsby-highlight" data-language="shell"><pre class="language-shell"><code class="language-shell">$ gem <span class="token function">install</span> my_gem <span class="token comment"># ручная установка джемов</span>
$ bundle <span class="token function">install</span> <span class="token comment"># рекомендуемый способ, bundle будет читать ваш Gemfile</span></code></pre></div></span>
<p>Чтобы при установке пакетов не ставить документацию к ним можно создать в домашнем каталоге файл <span><code class="language-text">~/.gemrc</code></span> с таким содержанием:</p>
<span><div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash"><span class="token comment"># ~/.gemrc</span>
gem: --no-rdoc --no-ri</code></pre></div></span>
<p>Осталось главное: запустить наше приветствие. Сделаем это, обратившись к
<span><code class="language-text">config.ru</code></span>:</p>
<span><div class="gatsby-highlight" data-language="ruby"><pre class="language-ruby"><code class="language-ruby"><span class="token comment">#\ -w -p 4000 # указать желаемый порт</span>

<span class="token keyword">require</span> <span class="token string-literal"><span class="token string">'./main.rb'</span></span> <span class="token comment"># подгрузить main.rb</span>
run Sinatra<span class="token double-colon punctuation">::</span>Application <span class="token comment"># запустить приложение</span></code></pre></div></span>
<p>Отныне по адресу <a href="http://localhost:4000" target="_blank" rel="nofollow">http://localhost:4000</a> доступна наша первая страничка. Введите
в консоли команду <span><code class="language-text">rackup</code></span>, чтобы запустить сервер разработки WEBrick и
убедиться в этом.</p>
<h2 id="миграции" style="position:relative"><a href="#%D0%BC%D0%B8%D0%B3%D1%80%D0%B0%D1%86%D0%B8%D0%B8" aria-label="миграции permalink" class="anchor before"><span><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></span></a>Миграции</h2>
<p>Для удобства вынесем некоторые элементы из корня в другие каталоги, после чего
структура приложения будет выглядеть следующим образом:</p>
<span><div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">sinatra
├── app
│   ├── helpers.rb
│   ├── models.rb
│   └── routes.rb
├── config
│   ├── constants.rb
│   └── environments.rb
├── config.ru
├── Gemfile
├── main.rb
├── public
│   ├── favicon.ico
│   ├── images
│   │   ├── logo.png
│   └── style.css
├── Rakefile
└── views
    ├── index.erb
    └── layout.erb</code></pre></div></span>
<p>Подключим наши новообразованные файлы:</p>
<span><div class="gatsby-highlight" data-language="ruby"><pre class="language-ruby"><code class="language-ruby"><span class="token comment"># main.rb</span>
<span class="token comment"># -*- coding: utf-8 -*-</span>

<span class="token keyword">require</span> <span class="token string-literal"><span class="token string">'sinatra'</span></span>
<span class="token keyword">require</span> <span class="token string-literal"><span class="token string">'sinatra/activerecord'</span></span>
<span class="token keyword">require</span> <span class="token string-literal"><span class="token string">'redcarpet'</span></span>

<span class="token variable">$LOAD_PATH</span><span class="token punctuation">.</span>unshift<span class="token punctuation">(</span><span class="token builtin">File</span><span class="token punctuation">.</span>dirname<span class="token punctuation">(</span>__FILE__<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string-literal"><span class="token string">'/app'</span></span><span class="token punctuation">)</span>
<span class="token keyword">require</span> <span class="token string-literal"><span class="token string">'models'</span></span>  <span class="token comment"># здесь живут модели</span>
<span class="token keyword">require</span> <span class="token string-literal"><span class="token string">'routes'</span></span>  <span class="token comment"># маршруты</span>
<span class="token keyword">require</span> <span class="token string-literal"><span class="token string">'helpers'</span></span> <span class="token comment"># и хелперы</span>

<span class="token variable">$LOAD_PATH</span><span class="token punctuation">.</span>unshift<span class="token punctuation">(</span><span class="token builtin">File</span><span class="token punctuation">.</span>dirname<span class="token punctuation">(</span>__FILE__<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string-literal"><span class="token string">'/config'</span></span><span class="token punctuation">)</span>
<span class="token keyword">require</span> <span class="token string-literal"><span class="token string">'environments'</span></span> <span class="token comment"># настройки конфигурации</span>
<span class="token keyword">require</span> <span class="token string-literal"><span class="token string">'constants'</span></span>    <span class="token comment"># константы</span>

<span class="token comment"># или короче</span>
<span class="token comment"># Dir.glob('./{app,config}/*.rb').each {|file| require file}</span></code></pre></div></span>
<p>Теперь все пути станем прописывать в файле <span><code class="language-text">routes.rb</code></span></p>
<span><div class="gatsby-highlight" data-language="ruby"><pre class="language-ruby"><code class="language-ruby"><span class="token comment"># -*- coding: utf-8 -*-</span>
<span class="token comment"># app/routes.rb</span>

get <span class="token string-literal"><span class="token string">'/'</span></span> <span class="token keyword">do</span>
  <span class="token variable">@title</span> <span class="token operator">=</span> <span class="token string-literal"><span class="token string">'Заголовок индексной страницы'</span></span>
  erb <span class="token symbol">:index</span>
<span class="token keyword">end</span></code></pre></div></span>
<p>В отдельном файле хранятся такие вещи как заголовок и url сайта:</p>
<span><div class="gatsby-highlight" data-language="ruby"><pre class="language-ruby"><code class="language-ruby"><span class="token comment"># config/constants.rb</span>
<span class="token comment"># -*- coding: utf-8 -*-</span>

<span class="token constant">SITE_NAME</span> <span class="token operator">=</span> <span class="token string-literal"><span class="token string">'Mysite'</span></span>
<span class="token constant">SITE_URL</span> <span class="token operator">=</span> <span class="token string-literal"><span class="token string">'http://0.0.0.0:4000'</span></span>
<span class="token constant">SITE_SUBTITLE</span> <span class="token operator">=</span> <span class="token string-literal"><span class="token string">'IT Blog'</span></span></code></pre></div></span>
<p>Для того, чтобы убедиться в работоспособности приложения изменим
«вьюху»:</p>
<span><div class="gatsby-highlight" data-language="erb"><pre class="language-erb"><code class="language-erb"><span class="token erb language-erb"><span class="token delimiter punctuation">&lt;%</span><span class="token ruby language-ruby"><span class="token comment"># /views/layout.erb </span></span><span class="token delimiter punctuation">%></span></span>

<span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>en<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>utf-8<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>

  <span class="token erb language-erb"><span class="token delimiter punctuation">&lt;%</span><span class="token ruby language-ruby"> <span class="token keyword">if</span> <span class="token variable">@title</span>  </span><span class="token delimiter punctuation">%></span></span>
    <span class="token erb language-erb"><span class="token delimiter punctuation">&lt;%</span><span class="token ruby language-ruby"><span class="token comment"># /вывести заголовок страницы и имя сайта </span></span><span class="token delimiter punctuation">%></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span><span class="token erb language-erb"><span class="token delimiter punctuation">&lt;%=</span><span class="token ruby language-ruby"> <span class="token variable">@title</span> <span class="token operator">+</span> <span class="token string-literal"><span class="token string">" | </span><span class="token interpolation"><span class="token delimiter punctuation">#{</span><span class="token content"><span class="token constant">SITE_NAME</span></span><span class="token delimiter punctuation">}</span></span><span class="token string">"</span></span> </span><span class="token delimiter punctuation">%></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span>
  <span class="token erb language-erb"><span class="token delimiter punctuation">&lt;%</span><span class="token ruby language-ruby"> <span class="token keyword">else</span> </span><span class="token delimiter punctuation">%></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">></span></span><span class="token erb language-erb"><span class="token delimiter punctuation">&lt;%=</span><span class="token ruby language-ruby"><span class="token string-literal"><span class="token string">"</span><span class="token interpolation"><span class="token delimiter punctuation">#{</span><span class="token content"><span class="token constant">SITE_NAME</span></span><span class="token delimiter punctuation">}</span></span><span class="token string">"</span></span> </span><span class="token delimiter punctuation">%></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">></span></span>
  <span class="token erb language-erb"><span class="token delimiter punctuation">&lt;%</span><span class="token ruby language-ruby"> <span class="token keyword">end</span> </span><span class="token delimiter punctuation">%></span></span>

  <span class="token erb language-erb"><span class="token delimiter punctuation">&lt;%</span><span class="token ruby language-ruby"> <span class="token keyword">if</span> <span class="token variable">@summary</span> </span><span class="token delimiter punctuation">%></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>description<span class="token punctuation">"</span></span> <span class="token attr-name">content</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token erb language-erb"><span class="token delimiter punctuation">&lt;%=</span><span class="token ruby language-ruby"> <span class="token variable">@summary</span> <span class="token operator">||</span> <span class="token variable">@post</span><span class="token punctuation">.</span>summary </span><span class="token delimiter punctuation">%></span></span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
  <span class="token erb language-erb"><span class="token delimiter punctuation">&lt;%</span><span class="token ruby language-ruby"> <span class="token keyword">end</span> </span><span class="token delimiter punctuation">%></span></span>

  <span class="token erb language-erb"><span class="token delimiter punctuation">&lt;%</span><span class="token ruby language-ruby"><span class="token comment"># путь к иконке из public </span></span><span class="token delimiter punctuation">%></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>icon<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/favicon.ico<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>image/x-icon<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>shortcut icon<span class="token punctuation">"</span></span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/favicon.ico<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>image/x-icon<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>

  <span class="token erb language-erb"><span class="token delimiter punctuation">&lt;%</span><span class="token ruby language-ruby"><span class="token comment"># путь к css из public </span></span><span class="token delimiter punctuation">%></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/style.css<span class="token punctuation">"</span></span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>stylesheet<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text/css<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>main</span><span class="token punctuation">></span></span>
        <span class="token erb language-erb"><span class="token delimiter punctuation">&lt;%=</span><span class="token ruby language-ruby"> <span class="token keyword">yield</span> </span><span class="token delimiter punctuation">%></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>main</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">></span></span></code></pre></div></span>
<p>Sinatra поддерживает встроенные шаблоны. Так, вы можете разбить
главный шаблон на более мелкие и подключать их отдельно:</p>
<span><div class="gatsby-highlight" data-language="erb"><pre class="language-erb"><code class="language-erb"><span class="token erb language-erb"><span class="token delimiter punctuation">&lt;%=</span><span class="token ruby language-ruby"> erb <span class="token operator">:</span><span class="token string-literal"><span class="token string">'includes/footer'</span></span><span class="token punctuation">,</span> <span class="token symbol">:layout</span> <span class="token operator">=></span> <span class="token boolean">false</span> </span><span class="token delimiter punctuation">%></span></span></code></pre></div></span>
<p>Как мы увидим впоследствии, при открытии страницы <span><code class="language-text">index</code></span> заголовки должны
измениться на указанные нами.</p>
<p>Но что же с моделью? Все наши записи мы будем хранить в базе данных,
осуществлять же доступ к оной нам поможет
<a href="http://rusrails.ru/active-record-query-interface" target="_blank" rel="nofollow">ActiveRecord</a>.</p>
<p>Для начала убедимся, что с базой данных не возникнет проблем. Изменим настройки
нескольких файлов:</p>
<p>Установка связи с ActiveRecord:</p>
<span><div class="gatsby-highlight" data-language="ruby"><pre class="language-ruby"><code class="language-ruby"><span class="token comment"># config/environments.rb</span>
<span class="token comment"># настройки при разработке приложения</span>

configure <span class="token symbol">:development</span> <span class="token keyword">do</span>
 set <span class="token symbol">:database</span><span class="token punctuation">,</span> <span class="token string-literal"><span class="token string">'sqlite3:///dev.db'</span></span>
 set <span class="token symbol">:show_exceptions</span><span class="token punctuation">,</span> <span class="token boolean">true</span>
<span class="token keyword">end</span>

<span class="token comment"># настройки для production-окружения</span>
configure <span class="token symbol">:production</span> <span class="token keyword">do</span>
 db <span class="token operator">=</span> <span class="token constant">URI</span><span class="token punctuation">.</span>parse<span class="token punctuation">(</span><span class="token constant">ENV</span><span class="token punctuation">[</span><span class="token string-literal"><span class="token string">'DATABASE_URL'</span></span><span class="token punctuation">]</span> <span class="token operator">||</span> <span class="token string-literal"><span class="token string">'postgres:///localhost/mydb'</span></span><span class="token punctuation">)</span>

 ActiveRecord<span class="token double-colon punctuation">::</span>Base<span class="token punctuation">.</span>establish_connection<span class="token punctuation">(</span>
   <span class="token symbol">:adapter</span>  <span class="token operator">=></span> db<span class="token punctuation">.</span>scheme <span class="token operator">==</span> <span class="token string-literal"><span class="token string">'postgres'</span></span> <span class="token operator">?</span> <span class="token string-literal"><span class="token string">'postgresql'</span></span> <span class="token operator">:</span> db<span class="token punctuation">.</span>scheme<span class="token punctuation">,</span>
   <span class="token symbol">:host</span>     <span class="token operator">=></span> db<span class="token punctuation">.</span>host<span class="token punctuation">,</span>
   <span class="token symbol">:username</span> <span class="token operator">=></span> db<span class="token punctuation">.</span>user<span class="token punctuation">,</span>
   <span class="token symbol">:password</span> <span class="token operator">=></span> db<span class="token punctuation">.</span>password<span class="token punctuation">,</span>
   <span class="token symbol">:database</span> <span class="token operator">=></span> db<span class="token punctuation">.</span>path<span class="token punctuation">[</span><span class="token number">1.</span><span class="token punctuation">.</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
   <span class="token symbol">:encoding</span> <span class="token operator">=></span> <span class="token string-literal"><span class="token string">'utf8'</span></span>
 <span class="token punctuation">)</span>
<span class="token keyword">end</span></code></pre></div></span>
<p>Таким образом в разных окружениях (development &amp; production) будут
использоваться разные базы данных. Также вносятся поправки в другие файлы:</p>
<span><div class="gatsby-highlight" data-language="ruby"><pre class="language-ruby"><code class="language-ruby"><span class="token comment"># Rakefile</span>
<span class="token keyword">require</span> <span class="token string-literal"><span class="token string">'./main'</span></span>
<span class="token keyword">require</span> <span class="token string-literal"><span class="token string">'sinatra/activerecord/rake'</span></span>

<span class="token comment"># app/models.rb</span>
<span class="token keyword">class</span> <span class="token class-name">Post</span> <span class="token operator">&lt;</span> ActiveRecord<span class="token double-colon punctuation">::</span>Base
<span class="token keyword">end</span></code></pre></div></span>
<p>Ниже приводится полное содержимое джемфайла.</p>
<span><div class="gatsby-highlight" data-language="ruby"><pre class="language-ruby"><code class="language-ruby"><span class="token comment"># -*- coding: utf-8 -*-</span>
<span class="token comment"># Gemfile</span>

source <span class="token string-literal"><span class="token string">'https://rubygems.org'</span></span>
ruby <span class="token string-literal"><span class="token string">'2.1.0'</span></span>

gem <span class="token string-literal"><span class="token string">'sinatra'</span></span>
gem <span class="token string-literal"><span class="token string">'redcarpet'</span></span>
gem <span class="token string-literal"><span class="token string">'pygments.rb'</span></span>
gem <span class="token string-literal"><span class="token string">'activerecord'</span></span>
gem <span class="token string-literal"><span class="token string">'sinatra-activerecord'</span></span>

group <span class="token symbol">:development</span> <span class="token keyword">do</span>
  gem <span class="token string-literal"><span class="token string">'shotgun'</span></span>
  gem <span class="token string-literal"><span class="token string">'tux'</span></span>
  gem <span class="token string-literal"><span class="token string">'sqlite3'</span></span>
<span class="token keyword">end</span>

group <span class="token symbol">:production</span> <span class="token keyword">do</span>
  gem <span class="token string-literal"><span class="token string">'pg'</span></span>
<span class="token keyword">end</span>

group <span class="token symbol">:test</span> <span class="token keyword">do</span>
  gem <span class="token string-literal"><span class="token string">'rspec'</span></span>
<span class="token keyword">end</span></code></pre></div></span>
<p>Доустановить недостающие зависимости без установки джемов для production-окружения
можно командой</p>
<span><div class="gatsby-highlight" data-language="shell"><pre class="language-shell"><code class="language-shell">$ bundle <span class="token function">install</span> <span class="token parameter variable">--without</span> production</code></pre></div></span>
<p>Теперь создадим саму миграцию: если говорить просто, это такая штука, при помощи
которой мы можем менять схему нашей БД. Сейчас нам важно, что миграции весьма
удобны для тестового наполнения базы данных.</p>
<span><div class="gatsby-highlight" data-language="shell"><pre class="language-shell"><code class="language-shell">$ rake <span class="token parameter variable">-T</span> <span class="token punctuation">(</span>отобразить справку по возможным действиям<span class="token punctuation">)</span>
$ rake db:create_migration <span class="token assign-left variable">NAME</span><span class="token operator">=</span>create_post <span class="token punctuation">(</span>создать миграцию<span class="token punctuation">)</span></code></pre></div></span>
<p>Если всё прошло успешно, в корневом каталоге проекта появится подкаталог <span><code class="language-text">db</code></span>,
содержащий миграцию вида <span><code class="language-text">db/migrate/xxx_create_post.rb</code></span>. Изменим её:</p>
<span><div class="gatsby-highlight" data-language="ruby"><pre class="language-ruby"><code class="language-ruby"><span class="token comment"># db/migrate/xxx_create_post.rb</span>
<span class="token comment"># -*- coding: utf-8 -*-</span>

<span class="token keyword">class</span> <span class="token class-name">CreatePost</span> <span class="token operator">&lt;</span> ActiveRecord<span class="token double-colon punctuation">::</span>Migration
  <span class="token keyword">def</span> <span class="token method-definition"><span class="token keyword">self</span><span class="token punctuation">.</span><span class="token function">up</span></span>
    <span class="token comment"># создание таблицы с заданными полями</span>
    create_table <span class="token symbol">:posts</span> <span class="token keyword">do</span> <span class="token operator">|</span>post<span class="token operator">|</span>
      post<span class="token punctuation">.</span>string   <span class="token symbol">:title</span>
      post<span class="token punctuation">.</span>text     <span class="token symbol">:content</span>
      post<span class="token punctuation">.</span>timestamps
    <span class="token keyword">end</span>

    <span class="token comment"># тестовые записи</span>
    Post<span class="token punctuation">.</span>create<span class="token punctuation">(</span><span class="token symbol">title</span><span class="token operator">:</span> <span class="token string-literal"><span class="token string">"Example Post"</span></span><span class="token punctuation">,</span>
                <span class="token symbol">content</span><span class="token operator">:</span> <span class="token string-literal"><span class="token string">"Content of my first post"</span></span><span class="token punctuation">)</span>
    Post<span class="token punctuation">.</span>create<span class="token punctuation">(</span><span class="token symbol">title</span><span class="token operator">:</span> <span class="token string-literal"><span class="token string">"Second Post"</span></span><span class="token punctuation">,</span>
                <span class="token symbol">content</span><span class="token operator">:</span> <span class="token string-literal"><span class="token string">"Content of my second post"</span></span><span class="token punctuation">)</span>
  <span class="token keyword">end</span>
  <span class="token keyword">def</span> <span class="token method-definition"><span class="token keyword">self</span><span class="token punctuation">.</span><span class="token function">down</span></span>
    <span class="token comment"># откатить миграцию (rake:db rollback)</span>
    drop_table <span class="token symbol">:posts</span>
  <span class="token keyword">end</span>
<span class="token keyword">end</span></code></pre></div></span>
<p>Осталось лишь запустить миграцию, после чего в каталоге <span><code class="language-text">db</code></span> автоматически
появится файл <span><code class="language-text">schema.rb</code></span>:</p>
<span><div class="gatsby-highlight" data-language="shell"><pre class="language-shell"><code class="language-shell">$ rake db:migrate</code></pre></div></span>
<p>А в корневом каталоге должен появиться файл <span><code class="language-text">dev.db</code></span>, представляющий собой базу
с созданной в ней (указанной в миграции) таблицей.</p>
<h2 id="играем-с-tuxом" style="position:relative"><a href="#%D0%B8%D0%B3%D1%80%D0%B0%D0%B5%D0%BC-%D1%81-tux%D0%BE%D0%BC" aria-label="играем с tuxом permalink" class="anchor before"><span><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></span></a>Играем с tux&#x27;ом</h2>
<p>Внимательный читатель наверняка заметил, что мы установили несколько новых
джемов: tux, shotgun. Второй из них теперь можно запускать вместо команды
<span><code class="language-text">rackup</code></span> — при внесении любых изменений вам не потребуется перезапускать
сервер, shotgun сделает всю рутинную работу за вас.</p>
<p>Первый из упомянутых джем окажет посильную помощь при разработке приложений на
sinatra. Это консольная программа, являющаяся связующим звеном между
разработчиком и sinatra-приложением. Давайте поиграем с ней.</p>
<span><div class="gatsby-highlight" data-language="shell"><pre class="language-shell"><code class="language-shell">$ tux
Loading development environment <span class="token punctuation">(</span>Rack <span class="token number">1.2</span><span class="token punctuation">)</span>
<span class="token operator">>></span> a <span class="token operator">=</span> Post.all <span class="token punctuation">(</span>получить все посты<span class="token punctuation">)</span>
<span class="token punctuation">[</span>DEBUG -- <span class="token builtin class-name">:</span> Post Load <span class="token punctuation">(</span><span class="token number">2</span>.0ms<span class="token punctuation">)</span>  SELECT <span class="token string">"posts"</span>.* FROM <span class="token string">"posts"</span>
<span class="token operator">=</span><span class="token operator">></span> <span class="token comment">#&lt;ActiveRecord::Relation</span>
<span class="token punctuation">[</span><span class="token comment">#&lt;Post id: 1, title: "What is sinatra?"]></span>
<span class="token punctuation">..</span>. вывод сокращён <span class="token punctuation">..</span>.
<span class="token operator">>></span> a.count <span class="token punctuation">(</span>количество постов<span class="token punctuation">)</span>
DEBUG -- <span class="token builtin class-name">:</span> <span class="token punctuation">(</span><span class="token number">0</span>.4ms<span class="token punctuation">)</span>  SELECT COUNT<span class="token punctuation">(</span>*<span class="token punctuation">)</span> FROM <span class="token string">"posts"</span>
<span class="token operator">=</span><span class="token operator">></span> <span class="token number">4</span>
<span class="token operator">>></span> a.first <span class="token punctuation">(</span>получить данные первого поста<span class="token punctuation">)</span>
<span class="token operator">=</span><span class="token operator">></span> <span class="token comment">#&lt;Post id: 1, title: "What is sinatra?" content: "Sinatra is..."></span>
<span class="token operator">>></span> a.first.title <span class="token punctuation">(</span>заголовок первого поста<span class="token punctuation">)</span>
<span class="token operator">=</span><span class="token operator">></span> <span class="token string">"What is sinatra?"</span>
<span class="token operator">>></span> a.first.id <span class="token punctuation">(</span>его идентификатор<span class="token punctuation">)</span>
<span class="token operator">=</span><span class="token operator">></span> <span class="token number">1</span>
<span class="token operator">>></span> a.last.content<span class="token punctuation">(</span>тело последнего поста<span class="token punctuation">)</span>
<span class="token operator">=</span><span class="token operator">></span> <span class="token string">"Oh, my last post!"</span></code></pre></div></span>
<p>Надеюсь, читатель убедился в небесполезности tux&#x27;а: прежде, чем писать новую
функциональность можно немного потестировать её в консоли.</p>
<h2 id="crud" style="position:relative"><a href="#crud" aria-label="crud permalink" class="anchor before"><span><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></span></a>CRUD</h2>
<p>Дабы наконец развлечься каким-то практическим эффектом от содеянного
ранее, займёмся написанием маршрутов и шаблонов: нужно ведь отобразить ту
информацию, которую мы имеем. А заодно узнаем, что скрывается под аббревиатурой
CRUD.</p>
<p>CRUD — так именуются четыре базовые функции для работы с данными и Sinatra
вполне поддерживает их все.</p>
<table><thead><tr><th>сокращение</th><th>значение</th><th>sinatra</th></tr></thead><tbody><tr><td><strong>C</strong></td><td>create</td><td>put</td></tr><tr><td><strong>R</strong></td><td>read</td><td>get</td></tr><tr><td><strong>U</strong></td><td>update</td><td>post</td></tr><tr><td><strong>D</strong></td><td>destroy</td><td>delete</td></tr></tbody></table>
<p>Ниже приводится пример создаваемых маршрутов сразу с комментариями.</p>
<span><div class="gatsby-highlight" data-language="ruby"><pre class="language-ruby"><code class="language-ruby"><span class="token comment"># -*- coding: utf-8 -*-</span>
<span class="token comment"># app/routes.rb</span>

<span class="token comment"># получить главную страницу</span>
<span class="token comment"># отобрать последние 10 постов</span>
get <span class="token string-literal"><span class="token string">'/'</span></span> <span class="token keyword">do</span>
  <span class="token comment"># сортировка и указание лимита</span>
  <span class="token variable">@posts</span> <span class="token operator">=</span> Post<span class="token punctuation">.</span>order<span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"created_at DESC"</span></span><span class="token punctuation">)</span><span class="token punctuation">.</span>limit<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>
  <span class="token comment"># для отображения взять /views/index.erb</span>
  erb <span class="token symbol">:index</span>
<span class="token keyword">end</span>

<span class="token comment"># получить отдельный пост по его ID</span>
get <span class="token string-literal"><span class="token string">'/posts/:id/'</span></span> <span class="token keyword">do</span>
  <span class="token comment"># найти пост</span>
  <span class="token variable">@post</span> <span class="token operator">=</span> Post<span class="token punctuation">.</span>find<span class="token punctuation">(</span>params<span class="token punctuation">[</span><span class="token symbol">:id</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token variable">@title</span> <span class="token operator">=</span> <span class="token variable">@post</span><span class="token punctuation">.</span>title
  <span class="token variable">@content</span> <span class="token operator">=</span> <span class="token variable">@post</span><span class="token punctuation">.</span>content
  erb <span class="token operator">:</span><span class="token string-literal"><span class="token string">'posts/show'</span></span>
<span class="token keyword">end</span>

<span class="token comment"># отобразить форму для создания нового поста</span>
get <span class="token string-literal"><span class="token string">'/posts/new'</span></span> <span class="token keyword">do</span>
  <span class="token variable">@title</span> <span class="token operator">=</span> <span class="token string-literal"><span class="token string">'Create new post'</span></span>
  erb <span class="token operator">:</span><span class="token string-literal"><span class="token string">'posts/create'</span></span>
<span class="token keyword">end</span>

<span class="token comment"># взять параметры из формы и сохранить пост</span>
post <span class="token string-literal"><span class="token string">'/posts/new'</span></span> <span class="token keyword">do</span>
  params<span class="token punctuation">.</span>delete <span class="token string-literal"><span class="token string">'submit'</span></span>
  <span class="token variable">@post</span> <span class="token operator">=</span> Post<span class="token punctuation">.</span>create<span class="token punctuation">(</span>params<span class="token punctuation">)</span>

  <span class="token keyword">if</span> <span class="token variable">@post</span><span class="token punctuation">.</span>save
    redirect to <span class="token string-literal"><span class="token string">'/'</span></span>
  <span class="token keyword">else</span>
    <span class="token string-literal"><span class="token string">'Post was not save'</span></span>
  <span class="token keyword">end</span>
<span class="token keyword">end</span>

<span class="token comment"># страница about</span>
<span class="token comment"># запись вида ('/about/?') позволит</span>
<span class="token comment"># обращаться как к странице /about</span>
<span class="token comment"># так и к странице /about/</span>
get <span class="token punctuation">(</span><span class="token string-literal"><span class="token string">'/about/?'</span></span><span class="token punctuation">)</span> <span class="token keyword">do</span>
  <span class="token variable">@title</span> <span class="token operator">=</span> <span class="token string-literal"><span class="token string">'About me'</span></span>
  erb <span class="token symbol">:about</span>
<span class="token keyword">end</span>

<span class="token comment"># если страница не найдена</span>
not_found <span class="token keyword">do</span>
  <span class="token variable">@title</span> <span class="token operator">=</span> <span class="token string-literal"><span class="token string">'Page not found'</span></span>
  <span class="token comment"># создайте для неё шаблон 404.erb</span>
  erb <span class="token operator">:</span><span class="token string-literal"><span class="token string">'404'</span></span>
<span class="token keyword">end</span>

<span class="token comment"># обработка ошибки сервера</span>
error <span class="token keyword">do</span>
  <span class="token variable">@error</span> <span class="token operator">=</span> request<span class="token punctuation">.</span>env<span class="token punctuation">[</span><span class="token string-literal"><span class="token string">'sinatra_error'</span></span><span class="token punctuation">]</span><span class="token punctuation">.</span>name
  erb <span class="token operator">:</span><span class="token string-literal"><span class="token string">'500'</span></span>
<span class="token keyword">end</span></code></pre></div></span>
<p>Надеюсь, комментарии смогли дать какое-то представление о маршрутизации в
sinatra. Дальше напишем шаблоны страниц, содержимое которых будет динамическим.</p>
<p>На главной странице отобразим список последних десяти публикаций, снабдим каждую
запись ссылкой на её полную версию.</p>
<span><div class="gatsby-highlight" data-language="erb"><pre class="language-erb"><code class="language-erb"><span class="token erb language-erb"><span class="token delimiter punctuation">&lt;%</span><span class="token ruby language-ruby"><span class="token comment"># views/index.erb </span></span><span class="token delimiter punctuation">%></span></span>

<span class="token erb language-erb"><span class="token delimiter punctuation">&lt;%</span><span class="token ruby language-ruby"> <span class="token variable">@posts</span><span class="token punctuation">.</span><span class="token keyword">each</span> <span class="token keyword">do</span> <span class="token operator">|</span>post<span class="token operator">|</span> </span><span class="token delimiter punctuation">%></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/posts/<span class="token erb language-erb"><span class="token delimiter punctuation">&lt;%=</span><span class="token ruby language-ruby"> post<span class="token punctuation">.</span>id </span><span class="token delimiter punctuation">%></span></span>/<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token erb language-erb"><span class="token delimiter punctuation">&lt;%=</span><span class="token ruby language-ruby"> post<span class="token punctuation">.</span>title </span><span class="token delimiter punctuation">%></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>
<span class="token erb language-erb"><span class="token delimiter punctuation">&lt;%</span><span class="token ruby language-ruby"> <span class="token keyword">end</span> </span><span class="token delimiter punctuation">%></span></span></code></pre></div></span>
<p>Страница отдельного поста будет отображать его заголовок и тело.</p>
<span><div class="gatsby-highlight" data-language="erb"><pre class="language-erb"><code class="language-erb"><span class="token erb language-erb"><span class="token delimiter punctuation">&lt;%</span><span class="token ruby language-ruby"><span class="token comment"># views/posts/show.erb </span></span><span class="token delimiter punctuation">%></span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">></span></span><span class="token erb language-erb"><span class="token delimiter punctuation">&lt;%=</span><span class="token ruby language-ruby"> <span class="token variable">@post</span><span class="token punctuation">.</span>title </span><span class="token delimiter punctuation">%></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span><span class="token erb language-erb"><span class="token delimiter punctuation">&lt;%=</span><span class="token ruby language-ruby"> <span class="token variable">@post</span><span class="token punctuation">.</span>created_at </span><span class="token delimiter punctuation">%></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>
<span class="token erb language-erb"><span class="token delimiter punctuation">&lt;%=</span><span class="token ruby language-ruby"> <span class="token variable">@post</span><span class="token punctuation">.</span>content </span><span class="token delimiter punctuation">%></span></span></code></pre></div></span>
<p>Для ручного добавления новых статей нам понадобится форма.</p>
<span><div class="gatsby-highlight" data-language="erb"><pre class="language-erb"><code class="language-erb"><span class="token erb language-erb"><span class="token delimiter punctuation">&lt;%</span><span class="token ruby language-ruby"><span class="token comment"># views/posts/create.erb </span></span><span class="token delimiter punctuation">%></span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>post<span class="token punctuation">"</span></span> <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/posts/new<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span> <span class="token attr-name">for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>title<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>strong</span><span class="token punctuation">></span></span>Post title:<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>strong</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>title<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>title<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">width</span><span class="token punctuation">:</span> 250px<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">></span></span>

  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span> <span class="token attr-name">for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>content<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Post content:<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>strong</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>textarea</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>content<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>content<span class="token punctuation">"</span></span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">height</span><span class="token punctuation">:</span> 250px<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>textarea</span><span class="token punctuation">></span></span>

  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>submit<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Create post<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">></span></span></code></pre></div></span>
<p>Теперь можно запустить shotgun, проверить как отображаются
«мигрированные» публикации, а также, добавив к адресу главной
страницы <span><code class="language-text">posts/new</code></span>, создать новый пост вручную.</p>
<p>После того, как читатель получил удовлетворение от первых успехов своих,
переведя дух, предлагается ему дальнейшее следование CDRU: научимся изменять и
удалять данные.</p>
<p><strong>Изменение/Обновление</strong></p>
<p>Для изменения уже существующих публикаций заведём соответствующие этим
намерениям маршруты и страницу.</p>
<span><div class="gatsby-highlight" data-language="ruby"><pre class="language-ruby"><code class="language-ruby"><span class="token comment"># app/routes.rb</span>
<span class="token comment"># получаем страницу с формой редактирования</span>
get <span class="token string-literal"><span class="token string">'/posts/:id/edit/'</span></span> <span class="token keyword">do</span>
  <span class="token variable">@title</span> <span class="token operator">=</span> <span class="token string-literal"><span class="token string">'Update post'</span></span>
  <span class="token variable">@post</span> <span class="token operator">=</span> Post<span class="token punctuation">.</span>find<span class="token punctuation">(</span>params<span class="token punctuation">[</span><span class="token symbol">:id</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
  erb <span class="token operator">:</span><span class="token string-literal"><span class="token string">'posts/edit'</span></span>
<span class="token keyword">end</span>

<span class="token comment"># обновляем данные</span>
put <span class="token string-literal"><span class="token string">'/posts/:id/edit/'</span></span> <span class="token keyword">do</span>
  <span class="token variable">@post</span> <span class="token operator">=</span> Post<span class="token punctuation">.</span>find<span class="token punctuation">(</span>params<span class="token punctuation">[</span><span class="token symbol">:id</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token keyword">if</span> <span class="token variable">@post</span><span class="token punctuation">.</span>update_attributes<span class="token punctuation">(</span>params<span class="token punctuation">[</span><span class="token symbol">:post</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    redirect to <span class="token string-literal"><span class="token string">'/'</span></span>
  <span class="token keyword">else</span>
    erb <span class="token operator">:</span><span class="token string-literal"><span class="token string">'posts/edit'</span></span>
  <span class="token keyword">end</span>
<span class="token keyword">end</span></code></pre></div></span>
<p>Вот как может выглядеть сама формочка:</p>
<span><div class="gatsby-highlight" data-language="erb"><pre class="language-erb"><code class="language-erb"><span class="token erb language-erb"><span class="token delimiter punctuation">&lt;%</span><span class="token ruby language-ruby"><span class="token comment"># views/posts/edit.erb </span></span><span class="token delimiter punctuation">%></span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h3</span><span class="token punctuation">></span></span>Edit<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h3</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/posts/<span class="token erb language-erb"><span class="token delimiter punctuation">&lt;%=</span><span class="token ruby language-ruby"> <span class="token variable">@post</span><span class="token punctuation">.</span>id </span><span class="token delimiter punctuation">%></span></span>/delete/<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>delete this post<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/posts/<span class="token erb language-erb"><span class="token delimiter punctuation">&lt;%=</span><span class="token ruby language-ruby"> <span class="token variable">@post</span><span class="token punctuation">.</span>id </span><span class="token delimiter punctuation">%></span></span>/edit/<span class="token punctuation">"</span></span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>post<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>_method<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>hidden<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>put<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>

  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span> <span class="token attr-name">for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>title<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Title:<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>text<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>post[title]<span class="token punctuation">"</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>title<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token erb language-erb"><span class="token delimiter punctuation">&lt;%=</span><span class="token ruby language-ruby"> <span class="token variable">@post</span><span class="token punctuation">.</span>title </span><span class="token delimiter punctuation">%></span></span><span class="token punctuation">"</span></span><span class="token punctuation">></span></span>

  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span> <span class="token attr-name">for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>content<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>strong</span><span class="token punctuation">></span></span>Post content:<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>textarea</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>content<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>post[content]<span class="token punctuation">"</span></span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">height</span><span class="token punctuation">:</span> 250px<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">></span></span><span class="token erb language-erb"><span class="token delimiter punctuation">&lt;%=</span><span class="token ruby language-ruby"> <span class="token variable">@post</span><span class="token punctuation">.</span>content </span><span class="token delimiter punctuation">%></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>textarea</span><span class="token punctuation">></span></span>

  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">itype</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>submit<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Save<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">></span></span></code></pre></div></span>
<p>Теперь попробуйте обновить какую-либо статью и приступайте к последнему таинству
— удалению.</p>
<p><strong>Удаление</strong></p>
<p>Дальнейшее повествование описывает создание маршрутов и страницы, на которую станем
перенаправлять пользователя, дабы убедиться действительно ли жаждет он
расстаться со своими материалами. Поехали.</p>
<span><div class="gatsby-highlight" data-language="ruby"><pre class="language-ruby"><code class="language-ruby"><span class="token comment"># app/routes.rb</span>
<span class="token comment"># получить страницу</span>
get <span class="token string-literal"><span class="token string">'/posts/:id/delete/'</span></span> <span class="token keyword">do</span>
  <span class="token variable">@title</span> <span class="token operator">=</span> <span class="token string-literal"><span class="token string">'Confirm deletion of article #</span><span class="token interpolation"><span class="token delimiter punctuation">#{</span><span class="token content">params<span class="token punctuation">[</span><span class="token symbol">:id</span><span class="token punctuation">]</span></span><span class="token delimiter punctuation">}</span></span><span class="token string">'</span></span>
  <span class="token variable">@post</span> <span class="token operator">=</span> Post<span class="token punctuation">.</span>find<span class="token punctuation">(</span>params<span class="token punctuation">[</span><span class="token symbol">:id</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
  erb <span class="token operator">:</span><span class="token string-literal"><span class="token string">'posts/delete'</span></span>
<span class="token keyword">end</span>

<span class="token comment"># удалить публикацию</span>
delete <span class="token string-literal"><span class="token string">'/posts/:id/'</span></span> <span class="token keyword">do</span>
  Post<span class="token punctuation">.</span>find<span class="token punctuation">(</span>params<span class="token punctuation">[</span><span class="token symbol">:id</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span>destroy
  redirect to <span class="token string-literal"><span class="token string">'/'</span></span>
<span class="token keyword">end</span></code></pre></div></span>
<p>Ни в каких формах мы более не нуждаемся, хотя неплохо было бы уточнить
действительно ли пост должен быть удалён:</p>
<span><div class="gatsby-highlight" data-language="erb"><pre class="language-erb"><code class="language-erb"><span class="token erb language-erb"><span class="token delimiter punctuation">&lt;%</span><span class="token ruby language-ruby"><span class="token comment"># views/posts/delete.erb </span></span><span class="token delimiter punctuation">%></span></span>

<span class="token erb language-erb"><span class="token delimiter punctuation">&lt;%</span><span class="token ruby language-ruby"> <span class="token keyword">if</span> <span class="token variable">@post</span> </span><span class="token delimiter punctuation">%></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>Are you sure?<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>form</span> <span class="token attr-name">action</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/posts/<span class="token erb language-erb"><span class="token delimiter punctuation">&lt;%=</span><span class="token ruby language-ruby"> <span class="token variable">@post</span><span class="token punctuation">.</span>id </span><span class="token delimiter punctuation">%></span></span>/<span class="token punctuation">"</span></span> <span class="token attr-name">method</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>post<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>hidden<span class="token punctuation">"</span></span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>_method<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>delete<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>submit<span class="token punctuation">"</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Yes, Delete It!<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token erb language-erb"><span class="token delimiter punctuation">&lt;%=</span><span class="token ruby language-ruby"><span class="token string-literal"><span class="token string">"</span><span class="token interpolation"><span class="token delimiter punctuation">#{</span><span class="token content"><span class="token constant">SITE_URL</span></span><span class="token delimiter punctuation">}</span></span><span class="token string">"</span></span></span><span class="token delimiter punctuation">%></span></span>/posts/<span class="token erb language-erb"><span class="token delimiter punctuation">&lt;%=</span><span class="token ruby language-ruby"> <span class="token variable">@post</span><span class="token punctuation">.</span>id </span><span class="token delimiter punctuation">%></span></span>/<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Cancel<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>form</span><span class="token punctuation">></span></span>
<span class="token erb language-erb"><span class="token delimiter punctuation">&lt;%</span><span class="token ruby language-ruby"> <span class="token keyword">else</span> </span><span class="token delimiter punctuation">%></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>Post not found.<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>
<span class="token erb language-erb"><span class="token delimiter punctuation">&lt;%</span><span class="token ruby language-ruby"> <span class="token keyword">end</span> </span><span class="token delimiter punctuation">%></span></span></code></pre></div></span>
<p>Прежде, чем двинуться дальше, рекомендуется ещё немного поэкспериментировать с
этим.</p>
<h2 id="валидация" style="position:relative"><a href="#%D0%B2%D0%B0%D0%BB%D0%B8%D0%B4%D0%B0%D1%86%D0%B8%D1%8F" aria-label="валидация permalink" class="anchor before"><span><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></span></a>Валидация</h2>
<p>Пришло время существенно улучшить наше приложение и воспользоваться ещё одной
особенностью, данной нам ActiveRecord: валидацией данных. Иметь валидные данные
— значит иметь проверенные данные. Например, очень важно, чтобы при
создании новой публикации она не осталась безымянной. Статья просто обязана
иметь заголовок!</p>
<p>Что же, сделаем так, чтобы невозможно было этот самый заголовок пропустить (в
противном случае данные не будут сохранены в базе). Обратимся к уже подзабытому
файлу с моделью.</p>
<span><div class="gatsby-highlight" data-language="ruby"><pre class="language-ruby"><code class="language-ruby"><span class="token comment"># app/models.rb</span>
<span class="token keyword">class</span> <span class="token class-name">Post</span> <span class="token operator">&lt;</span> ActiveRecord<span class="token double-colon punctuation">::</span>Base
  <span class="token comment"># заголовок с максимальной длиной в 100 символов!</span>
  validates <span class="token symbol">:title</span><span class="token punctuation">,</span> <span class="token symbol">presence</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token symbol">length</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token symbol">maximum</span><span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">}</span>
  validates <span class="token symbol">:content</span><span class="token punctuation">,</span> <span class="token symbol">presence</span><span class="token operator">:</span> <span class="token boolean">true</span>
<span class="token keyword">end</span></code></pre></div></span>
<p>Сейчас попробуйте сохранить новый пост без указания заголовка или с длиной,
превышающей сотню символов. При попытке сохранения вы должны получить ошибку, а
объект не будет сохранён в БД.</p>
<h2 id="отложенные-публикации" style="position:relative"><a href="#%D0%BE%D1%82%D0%BB%D0%BE%D0%B6%D0%B5%D0%BD%D0%BD%D1%8B%D0%B5-%D0%BF%D1%83%D0%B1%D0%BB%D0%B8%D0%BA%D0%B0%D1%86%D0%B8%D0%B8" aria-label="отложенные публикации permalink" class="anchor before"><span><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></span></a>Отложенные публикации</h2>
<p>С основополагающими принципами немного разобрались. Следующим шагом будет
простенькое добавление отложенных публикаций. Для этого прежде всего следует
изменить миграцию.</p>
<h3 id="миграция" style="position:relative"><a href="#%D0%BC%D0%B8%D0%B3%D1%80%D0%B0%D1%86%D0%B8%D1%8F" aria-label="миграция permalink" class="anchor before"><span><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></span></a>Миграция</h3>
<p>Добавление всего одного параметра даты, который при написании статьи вводится вручную и
призван обозначать время публикации этой самой статьи:</p>
<span><div class="gatsby-highlight" data-language="ruby"><pre class="language-ruby"><code class="language-ruby"><span class="token comment"># db/migrate/xxx_create_post.rb</span>
<span class="token keyword">class</span> <span class="token class-name">CreatePost</span> <span class="token operator">&lt;</span> ActiveRecord<span class="token double-colon punctuation">::</span>Migration
  <span class="token keyword">def</span> <span class="token method-definition"><span class="token keyword">self</span><span class="token punctuation">.</span><span class="token function">up</span></span>
    create_table <span class="token symbol">:posts</span> <span class="token keyword">do</span> <span class="token operator">|</span>t<span class="token operator">|</span>
      t<span class="token punctuation">.</span>date     <span class="token symbol">:published_at</span>
    <span class="token keyword">end</span>
    Post<span class="token punctuation">.</span>create<span class="token punctuation">(</span>
      <span class="token symbol">title</span><span class="token operator">:</span> <span class="token string-literal"><span class="token string">"Who I am?"</span></span><span class="token punctuation">,</span>
      <span class="token symbol">published_at</span><span class="token operator">:</span> <span class="token string-literal"><span class="token string">"2086-03-05"</span></span><span class="token punctuation">,</span>
      <span class="token symbol">content</span><span class="token operator">:</span> <span class="token string-literal"><span class="token string">"You don't show me!"</span></span><span class="token punctuation">)</span>
  <span class="token keyword">end</span>
<span class="token keyword">end</span></code></pre></div></span>
<p>После этого необходимо прогуляться в сторону модели:</p>
<span><div class="gatsby-highlight" data-language="ruby"><pre class="language-ruby"><code class="language-ruby"><span class="token comment"># app/models.rb</span>
<span class="token keyword">class</span> <span class="token class-name">Post</span> <span class="token operator">&lt;</span> ActiveRecord<span class="token double-colon punctuation">::</span>Base
  scope <span class="token symbol">:published_at</span><span class="token punctuation">,</span> lambda <span class="token punctuation">{</span> where<span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"published_at &lt;= ?"</span></span><span class="token punctuation">,</span> <span class="token builtin">Time</span><span class="token punctuation">.</span>now<span class="token punctuation">)</span> <span class="token punctuation">}</span>
  validates <span class="token symbol">:published_at</span><span class="token punctuation">,</span> <span class="token symbol">presence</span><span class="token operator">:</span> <span class="token boolean">true</span>
<span class="token keyword">end</span></code></pre></div></span>
<p>Поскольку данные пока не представляют собой никакой ценности (их попросту нет),
для вступления в силу принятых изменений можно сделать ход конём:</p>
<span><div class="gatsby-highlight" data-language="shell"><pre class="language-shell"><code class="language-shell">$ rake db:rollback
$ rake db:migrate</code></pre></div></span>
<p>Это откат прошлой миграции и создание новой. Все созданные вручную записи будут потеряны.</p>
<h3 id="вывод-публикаций" style="position:relative"><a href="#%D0%B2%D1%8B%D0%B2%D0%BE%D0%B4-%D0%BF%D1%83%D0%B1%D0%BB%D0%B8%D0%BA%D0%B0%D1%86%D0%B8%D0%B9" aria-label="вывод публикаций permalink" class="anchor before"><span><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></span></a>Вывод публикаций</h3>
<p>Что же, настало время обратиться к маршрутам и там, где это нужно, указать новую
выборку. Например, при выводе публикаций на главной странице:</p>
<span><div class="gatsby-highlight" data-language="ruby"><pre class="language-ruby"><code class="language-ruby"><span class="token comment"># app/routes.rb</span>
get <span class="token string-literal"><span class="token string">'/'</span></span> <span class="token keyword">do</span>
  <span class="token variable">@summary</span> <span class="token operator">=</span> <span class="token string-literal"><span class="token string">'Blog description'</span></span>
  <span class="token comment"># отображать только опубликованные статьи</span>
  <span class="token variable">@posts</span> <span class="token operator">=</span> Post<span class="token punctuation">.</span>published_at<span class="token punctuation">.</span>limit<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>
  erb <span class="token symbol">:index</span>
<span class="token keyword">end</span></code></pre></div></span>
<p>Это не единственный (и, возможно, не самый лучший) способ создать отложенные
публикации, но первый, что пришёл в голову.</p>
<h2 id="отображение-дат" style="position:relative"><a href="#%D0%BE%D1%82%D0%BE%D0%B1%D1%80%D0%B0%D0%B6%D0%B5%D0%BD%D0%B8%D0%B5-%D0%B4%D0%B0%D1%82" aria-label="отображение дат permalink" class="anchor before"><span><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></span></a>Отображение дат</h2>
<p>Если читатель проделал на практике все шаги вплоть до этого момента, он мог
заметить, что формат даты нельзя назвать «человекопонятным». Пришло
время узнать зачем в sinatra используются хелперы.</p>
<span><div class="gatsby-highlight" data-language="ruby"><pre class="language-ruby"><code class="language-ruby"><span class="token comment"># app/helpers.rb</span>

helpers <span class="token keyword">do</span>
  <span class="token keyword">def</span> <span class="token method-definition"><span class="token function">pretty_date</span></span><span class="token punctuation">(</span>time<span class="token punctuation">)</span>
    <span class="token comment"># форматируем дату</span>
    time<span class="token punctuation">.</span>strftime<span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"%d %b %Y"</span></span><span class="token punctuation">)</span>
  <span class="token keyword">end</span>
<span class="token keyword">end</span></code></pre></div></span>
<p>Теперь там, где это представляется необходимым, следует использовать подобную
конструкцию для вывода симпатичных дат:</p>
<span><div class="gatsby-highlight" data-language="erb"><pre class="language-erb"><code class="language-erb"><span class="token erb language-erb"><span class="token delimiter punctuation">&lt;%</span><span class="token ruby language-ruby"><span class="token comment"># views/posts/show.erb </span></span><span class="token delimiter punctuation">%></span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">></span></span><span class="token erb language-erb"><span class="token delimiter punctuation">&lt;%=</span><span class="token ruby language-ruby"> <span class="token variable">@post</span><span class="token punctuation">.</span>title </span><span class="token delimiter punctuation">%></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span><span class="token erb language-erb"><span class="token delimiter punctuation">&lt;%=</span><span class="token ruby language-ruby"> pretty_date<span class="token punctuation">(</span><span class="token variable">@post</span><span class="token punctuation">.</span>published_at<span class="token punctuation">)</span> </span><span class="token delimiter punctuation">%></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span></code></pre></div></span>
<h2 id="markdown-и-архив-публикаций" style="position:relative"><a href="#markdown-%D0%B8-%D0%B0%D1%80%D1%85%D0%B8%D0%B2-%D0%BF%D1%83%D0%B1%D0%BB%D0%B8%D0%BA%D0%B0%D1%86%D0%B8%D0%B9" aria-label="markdown и архив публикаций permalink" class="anchor before"><span><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></span></a>Markdown и архив публикаций</h2>
<p>На самом деле, эти вещи уже были описаны ранее.</p>
<p>Для того, чтобы получить возможность писать статью при помощи markdown-разметки,
а сохранять и отображать её в виде html, достаточно взять блок кода из второго
примера, где используется <a href="/posts/rails-markdown/">before_save</a>. Код этот
помещается в <span><code class="language-text">app/models.rb</code></span>, в шаблоне вывода публикации ничего править не
нужно.</p>
<p>То же самое с созданием архива. Один из способов описан в публикации об
<a href="/posts/rails-archive/">упорядочивании записей в rails</a>. С
нашей организацией проекта это будет выглядеть не совсем так:</p>
<span><div class="gatsby-highlight" data-language="ruby"><pre class="language-ruby"><code class="language-ruby"><span class="token comment"># app/routes.rb</span>
<span class="token comment"># Archive</span>

<span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token string-literal"><span class="token string">'/archive/?'</span></span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token string-literal"><span class="token string">'/posts/?'</span></span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token keyword">each</span> <span class="token keyword">do</span> <span class="token operator">|</span>route<span class="token operator">|</span>
  get route <span class="token keyword">do</span>
    <span class="token variable">@posts</span> <span class="token operator">=</span> Post<span class="token punctuation">.</span>published_at
    <span class="token variable">@posts_by_year</span> <span class="token operator">=</span> Post<span class="token punctuation">.</span>published_at<span class="token punctuation">.</span>order<span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"published_at ASC"</span></span><span class="token punctuation">)</span><span class="token punctuation">.</span>limit<span class="token punctuation">(</span><span class="token number">300</span><span class="token punctuation">)</span><span class="token punctuation">.</span>group_by <span class="token punctuation">{</span> <span class="token operator">|</span>post<span class="token operator">|</span> post<span class="token punctuation">.</span>published_at<span class="token punctuation">.</span>beginning_of_year <span class="token punctuation">}</span>
    <span class="token variable">@title</span> <span class="token operator">=</span> <span class="token string-literal"><span class="token string">'Archive'</span></span>
    erb <span class="token symbol">:archive</span>
  <span class="token keyword">end</span>
<span class="token keyword">end</span></code></pre></div></span>
<p>Вывод страниц:</p>
<span><div class="gatsby-highlight" data-language="erb"><pre class="language-erb"><code class="language-erb"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">></span></span><span class="token erb language-erb"><span class="token delimiter punctuation">&lt;%=</span><span class="token ruby language-ruby"> <span class="token variable">@title</span> </span><span class="token delimiter punctuation">%></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">></span></span>

<span class="token erb language-erb"><span class="token delimiter punctuation">&lt;%</span><span class="token ruby language-ruby"> <span class="token variable">@posts_by_year</span><span class="token punctuation">.</span><span class="token keyword">each</span> <span class="token keyword">do</span> <span class="token operator">|</span>year<span class="token punctuation">,</span> posts<span class="token operator">|</span> </span><span class="token delimiter punctuation">%></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span><span class="token punctuation">></span></span><span class="token erb language-erb"><span class="token delimiter punctuation">&lt;%=</span><span class="token ruby language-ruby"> <span class="token string-literal"><span class="token string">"</span><span class="token interpolation"><span class="token delimiter punctuation">#{</span><span class="token content">year<span class="token punctuation">.</span>strftime<span class="token punctuation">(</span><span class="token string-literal"><span class="token string">'%Y'</span></span><span class="token punctuation">)</span></span><span class="token delimiter punctuation">}</span></span><span class="token string">"</span></span> </span><span class="token delimiter punctuation">%></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dl</span><span class="token punctuation">></span></span>
    <span class="token erb language-erb"><span class="token delimiter punctuation">&lt;%</span><span class="token ruby language-ruby"> <span class="token keyword">for</span> post <span class="token keyword">in</span> posts </span><span class="token delimiter punctuation">%></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dd</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/posts/<span class="token erb language-erb"><span class="token delimiter punctuation">&lt;%=</span><span class="token ruby language-ruby"> post<span class="token punctuation">.</span>id </span><span class="token delimiter punctuation">%></span></span>/<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token erb language-erb"><span class="token delimiter punctuation">&lt;%=</span><span class="token ruby language-ruby"> post<span class="token punctuation">.</span>title </span><span class="token delimiter punctuation">%></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span>
       <span class="token erb language-erb"><span class="token delimiter punctuation">&lt;%=</span><span class="token ruby language-ruby"> pretty_date<span class="token punctuation">(</span>post<span class="token punctuation">.</span>published_at<span class="token punctuation">)</span> </span><span class="token delimiter punctuation">%></span></span>
      <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dd</span><span class="token punctuation">></span></span>
    <span class="token erb language-erb"><span class="token delimiter punctuation">&lt;%</span><span class="token ruby language-ruby"> <span class="token keyword">end</span> </span><span class="token delimiter punctuation">%></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dl</span><span class="token punctuation">></span></span>
<span class="token erb language-erb"><span class="token delimiter punctuation">&lt;%</span><span class="token ruby language-ruby"> <span class="token keyword">end</span> </span><span class="token delimiter punctuation">%></span></span></code></pre></div></span>
<p>Эффект обеспечен тот же самый.</p>
<h2 id="развёртывание-приложения-на-heroku" style="position:relative"><a href="#%D1%80%D0%B0%D0%B7%D0%B2%D1%91%D1%80%D1%82%D1%8B%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5-%D0%BF%D1%80%D0%B8%D0%BB%D0%BE%D0%B6%D0%B5%D0%BD%D0%B8%D1%8F-%D0%BD%D0%B0-heroku" aria-label="развёртывание приложения на heroku permalink" class="anchor before"><span><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></span></a>Развёртывание приложения на Heroku</h2>
<p>Прежде всего следует удостовериться, что файлы <span><code class="language-text">Gemfile</code></span> и <span><code class="language-text">config.ru</code></span> расположены в
корне проекта, который вы собираетесь развёртывать. Затем создать аккаунт на
<span><code class="language-text">heroku.com</code></span> и установить <a href="https://toolbelt.heroku.com/" target="_blank" rel="nofollow">Heroku Toolbelt</a>:</p>
<span><div class="gatsby-highlight" data-language="shell"><pre class="language-shell"><code class="language-shell">$ <span class="token function">wget</span> -qO- https://toolbelt.heroku.com/install.sh <span class="token operator">|</span> <span class="token function">sh</span>
$ <span class="token builtin class-name">echo</span> <span class="token string">'PATH="/usr/local/heroku/bin:$PATH"'</span> <span class="token operator">>></span> ~/.profile
$ heroku login</code></pre></div></span>
<p>После чего сделать из нашего каталога git-репозиторий:</p>
<span><div class="gatsby-highlight" data-language="shell"><pre class="language-shell"><code class="language-shell">$ <span class="token function">git</span> init
$ <span class="token function">git</span> <span class="token function">add</span> <span class="token builtin class-name">.</span>
$ <span class="token function">git</span> commit <span class="token parameter variable">-am</span> <span class="token string">'initial commit'</span>
$ heroku create
$ <span class="token function">git</span> push heroku master
$ heroku run rake <span class="token parameter variable">--trace</span> db:migrate</code></pre></div></span>
<blockquote>
<p>Чтобы указать какую-то определённую миграцию используйте db:migrate
VERSION=xxx</p>
</blockquote>
<blockquote>
<p>Если что-то пошло не так, посмотрите логи командой heroku logs</p>
</blockquote>
<p>Надо также заметить, что строка, указывающая порт в <span><code class="language-text">config.ru</code></span> должна быть в
обязательном порядке удалена перед деплоем на heroku.</p>
<h2 id="послесловие" style="position:relative"><a href="#%D0%BF%D0%BE%D1%81%D0%BB%D0%B5%D1%81%D0%BB%D0%BE%D0%B2%D0%B8%D0%B5" aria-label="послесловие permalink" class="anchor before"><span><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></span></a>Послесловие</h2>
<p>Сегодня было раскрыто многое из того, что можно сделать с помощью sinatra, но
ещё больше осталось за кадром. Как кэшировать страницы, как защитить админку,
что можно использовать кроме ActiveRecord, какой может быть архитектура
приложения (а она имеет полное право разительно отличаться от того, что было представлено в заметке),
как генерировать rss-ленту, как тестировать приложение. Ответы на эти и другие вопросы следует искать прежде всего в
следующих источниках:</p>
<ul>
<li><a href="http://www.sinatrarb.com/" target="_blank" rel="nofollow">http://www.sinatrarb.com/</a></li>
<li><a href="http://recipes.sinatrarb.com/" target="_blank" rel="nofollow">http://recipes.sinatrarb.com/</a></li>
<li><a href="http://rspec.info/" target="_blank" rel="nofollow">http://rspec.info/</a></li>
</ul><div class="next-prev-module--links--d62c5"><a class="next-prev-module--link--3ae6f" href="/posts/ebup-latex/"><span>Конвертируем ePub из LaTeX</span></a><span class="next-prev-module--link__separator--e12da"></span><a class="next-prev-module--link--3ae6f" href="/posts/tikz/"><span>Структурирование данных с TikZ</span></a></div></div><div class="comments"><button class="button">Комментарии<span class="button__icon"></span></button><div id="disqus_thread"></div></div></article></main><footer class="footer-module--footer--03d8a"><a href="https://twitter.com/octowed" class="footer-module--footer__link--22faa" rel="nofollow noopener noreferrer" target="_blank" aria-label="Твиттер"><svg class="icon icon_twitter"><use xlink:href="#twitter"></use></svg></a><a href="https://t-do.ru/redvi9" class="footer-module--footer__link--22faa" rel="nofollow noopener noreferrer" target="_blank" aria-label="Телеграм"><svg class="icon icon_telegram"><use xlink:href="#telegram"></use></svg></a><a href="mailto:liberty195@gmail.com" class="footer-module--footer__link--22faa" rel="nofollow noopener noreferrer" target="_blank" aria-label="Почта"><svg class="icon icon_mail"><use xlink:href="#email"></use></svg></a></footer></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/posts/sinatra/";/*]]>*/</script><!-- slice-start id="_gatsby-scripts-1" -->
          <script
            id="gatsby-chunk-mapping"
          >
            window.___chunkMapping="{\"app\":[\"/app-b05bbfbd6f04ab26f1a1.js\"],\"component---src-pages-404-tsx\":[\"/component---src-pages-404-tsx-dad6d8e6c9d0b64f9b3a.js\"],\"component---src-pages-index-tsx\":[\"/component---src-pages-index-tsx-b79f2baf4ff90a64a1f1.js\"],\"component---src-pages-posts-js\":[\"/component---src-pages-posts-js-565dd2f5f7934642f014.js\"],\"component---src-pages-tags-js\":[\"/component---src-pages-tags-js-88d92c91303a4d191b94.js\"],\"component---src-templates-post-template-tsx-content-file-path-content-2012-12-04-dwm-index-mdx\":[\"/component---src-templates-post-template-tsx-content-file-path-content-2012-12-04-dwm-index-mdx-da10028ed80e24dff569.js\"],\"component---src-templates-post-template-tsx-content-file-path-content-2013-05-16-gentoo-update-index-mdx\":[\"/component---src-templates-post-template-tsx-content-file-path-content-2013-05-16-gentoo-update-index-mdx-a82216119f8ac9c6492a.js\"],\"component---src-templates-post-template-tsx-content-file-path-content-2013-09-14-tex-hyperref-hyperref-mdx\":[\"/component---src-templates-post-template-tsx-content-file-path-content-2013-09-14-tex-hyperref-hyperref-mdx-cc3604bc43cacb45f861.js\"],\"component---src-templates-post-template-tsx-content-file-path-content-2021-04-16-gatsby-gatsby-mdx\":[\"/component---src-templates-post-template-tsx-content-file-path-content-2021-04-16-gatsby-gatsby-mdx-ed027fe2cb3214431713.js\"],\"component---src-templates-post-template-tsx-content-file-path-content-2023-07-02-ts-utility-types-ts-utility-types-mdx\":[\"/component---src-templates-post-template-tsx-content-file-path-content-2023-07-02-ts-utility-types-ts-utility-types-mdx-2fdba1f056f08db99446.js\"],\"component---src-templates-post-template-tsx-content-file-path-content-2023-07-03-hash-colors-hash-colors-mdx\":[\"/component---src-templates-post-template-tsx-content-file-path-content-2023-07-03-hash-colors-hash-colors-mdx-6d6747a362fe4faf61b9.js\"],\"component---src-templates-post-template-tsx-content-file-path-content-achilles-index-mdx\":[\"/component---src-templates-post-template-tsx-content-file-path-content-achilles-index-mdx-fed1040053e956f42ffa.js\"],\"component---src-templates-post-template-tsx-content-file-path-content-adb-wifi-adb-wifi-mdx\":[\"/component---src-templates-post-template-tsx-content-file-path-content-adb-wifi-adb-wifi-mdx-93e5c8d34236a4519bd8.js\"],\"component---src-templates-post-template-tsx-content-file-path-content-chroot-index-mdx\":[\"/component---src-templates-post-template-tsx-content-file-path-content-chroot-index-mdx-fe2595f276b28645d1f3.js\"],\"component---src-templates-post-template-tsx-content-file-path-content-cp-1251-to-utf-8-index-mdx\":[\"/component---src-templates-post-template-tsx-content-file-path-content-cp-1251-to-utf-8-index-mdx-3b67ffdaaafd1e035e47.js\"],\"component---src-templates-post-template-tsx-content-file-path-content-css-blur-index-mdx\":[\"/component---src-templates-post-template-tsx-content-file-path-content-css-blur-index-mdx-f2e1bdee38bf6090aa5f.js\"],\"component---src-templates-post-template-tsx-content-file-path-content-debian-kernel-index-mdx\":[\"/component---src-templates-post-template-tsx-content-file-path-content-debian-kernel-index-mdx-cd5ca3dbe18e68f77ded.js\"],\"component---src-templates-post-template-tsx-content-file-path-content-debian-wheezy-index-mdx\":[\"/component---src-templates-post-template-tsx-content-file-path-content-debian-wheezy-index-mdx-19ff95e8b793ba59f905.js\"],\"component---src-templates-post-template-tsx-content-file-path-content-django-first-steps-django-first-steps-mdx\":[\"/component---src-templates-post-template-tsx-content-file-path-content-django-first-steps-django-first-steps-mdx-fa9b9ceb327bb6f4042f.js\"],\"component---src-templates-post-template-tsx-content-file-path-content-django-pagination-django-pagination-mdx\":[\"/component---src-templates-post-template-tsx-content-file-path-content-django-pagination-django-pagination-mdx-6d15cee3f8306c76cec9.js\"],\"component---src-templates-post-template-tsx-content-file-path-content-elegant-design-index-mdx\":[\"/component---src-templates-post-template-tsx-content-file-path-content-elegant-design-index-mdx-58a340283de6a90b5b33.js\"],\"component---src-templates-post-template-tsx-content-file-path-content-emacs-dired-emacs-dired-mdx\":[\"/component---src-templates-post-template-tsx-content-file-path-content-emacs-dired-emacs-dired-mdx-7ab62b131d7d60bfb73d.js\"],\"component---src-templates-post-template-tsx-content-file-path-content-emacs-emacs-mdx\":[\"/component---src-templates-post-template-tsx-content-file-path-content-emacs-emacs-mdx-78638920b8b38e4a7503.js\"],\"component---src-templates-post-template-tsx-content-file-path-content-emacs-ide-emacs-ide-mdx\":[\"/component---src-templates-post-template-tsx-content-file-path-content-emacs-ide-emacs-ide-mdx-e7cbbebedac22ab0fd75.js\"],\"component---src-templates-post-template-tsx-content-file-path-content-emacs-snippets-emacs-snippets-mdx\":[\"/component---src-templates-post-template-tsx-content-file-path-content-emacs-snippets-emacs-snippets-mdx-066ef0e9e5e6047fe873.js\"],\"component---src-templates-post-template-tsx-content-file-path-content-gentoo-2-index-mdx\":[\"/component---src-templates-post-template-tsx-content-file-path-content-gentoo-2-index-mdx-920ce0793fbdfbb71fec.js\"],\"component---src-templates-post-template-tsx-content-file-path-content-get-absolute-url-get-absolute-url-mdx\":[\"/component---src-templates-post-template-tsx-content-file-path-content-get-absolute-url-get-absolute-url-mdx-746a9f5160eae9d8873c.js\"],\"component---src-templates-post-template-tsx-content-file-path-content-js-this-js-this-mdx\":[\"/component---src-templates-post-template-tsx-content-file-path-content-js-this-js-this-mdx-a52121b730946ab4cbb5.js\"],\"component---src-templates-post-template-tsx-content-file-path-content-linux-acpi-index-mdx\":[\"/component---src-templates-post-template-tsx-content-file-path-content-linux-acpi-index-mdx-7d8f41077978686a2721.js\"],\"component---src-templates-post-template-tsx-content-file-path-content-linux-arch-users-arch-users-mdx\":[\"/component---src-templates-post-template-tsx-content-file-path-content-linux-arch-users-arch-users-mdx-a76c8056ade5fb42fed7.js\"],\"component---src-templates-post-template-tsx-content-file-path-content-linux-backup-index-mdx\":[\"/component---src-templates-post-template-tsx-content-file-path-content-linux-backup-index-mdx-f595468ea0e52ade0143.js\"],\"component---src-templates-post-template-tsx-content-file-path-content-linux-command-index-mdx\":[\"/component---src-templates-post-template-tsx-content-file-path-content-linux-command-index-mdx-3be86729ea46edaad8e2.js\"],\"component---src-templates-post-template-tsx-content-file-path-content-linux-fbsplash-index-mdx\":[\"/component---src-templates-post-template-tsx-content-file-path-content-linux-fbsplash-index-mdx-915c662e5015ce3d5763.js\"],\"component---src-templates-post-template-tsx-content-file-path-content-linux-grub-2-index-mdx\":[\"/component---src-templates-post-template-tsx-content-file-path-content-linux-grub-2-index-mdx-eaeddecd9c2cbe3e0ace.js\"],\"component---src-templates-post-template-tsx-content-file-path-content-linux-install-gentoo-index-mdx\":[\"/component---src-templates-post-template-tsx-content-file-path-content-linux-install-gentoo-index-mdx-eb1979cce2c5cbae6c2b.js\"],\"component---src-templates-post-template-tsx-content-file-path-content-linux-kernel-v-3-index-mdx\":[\"/component---src-templates-post-template-tsx-content-file-path-content-linux-kernel-v-3-index-mdx-4ec444463fa86d22652e.js\"],\"component---src-templates-post-template-tsx-content-file-path-content-linux-lamp-index-mdx\":[\"/component---src-templates-post-template-tsx-content-file-path-content-linux-lamp-index-mdx-9e52be395eee881ac2ca.js\"],\"component---src-templates-post-template-tsx-content-file-path-content-linux-mplayer-index-mdx\":[\"/component---src-templates-post-template-tsx-content-file-path-content-linux-mplayer-index-mdx-977e2b7e9a8f955618e3.js\"],\"component---src-templates-post-template-tsx-content-file-path-content-linux-ntpd-index-mdx\":[\"/component---src-templates-post-template-tsx-content-file-path-content-linux-ntpd-index-mdx-aa1a68227d0a8a392983.js\"],\"component---src-templates-post-template-tsx-content-file-path-content-linux-openbox-index-mdx\":[\"/component---src-templates-post-template-tsx-content-file-path-content-linux-openbox-index-mdx-5772347a10393d9838b1.js\"],\"component---src-templates-post-template-tsx-content-file-path-content-linux-screencast-index-mdx\":[\"/component---src-templates-post-template-tsx-content-file-path-content-linux-screencast-index-mdx-2562778b416fc5866ffa.js\"],\"component---src-templates-post-template-tsx-content-file-path-content-linux-sound-linux-sound-mdx\":[\"/component---src-templates-post-template-tsx-content-file-path-content-linux-sound-linux-sound-mdx-fce96dd28370ae6e5fa4.js\"],\"component---src-templates-post-template-tsx-content-file-path-content-macos-commands-macos-commands-mdx\":[\"/component---src-templates-post-template-tsx-content-file-path-content-macos-commands-macos-commands-mdx-d2a09289de7e792d0d1f.js\"],\"component---src-templates-post-template-tsx-content-file-path-content-nano-nano-mdx\":[\"/component---src-templates-post-template-tsx-content-file-path-content-nano-nano-mdx-7f8a9f0d1ffe043b9b59.js\"],\"component---src-templates-post-template-tsx-content-file-path-content-nestjs-start-nestjs-start-mdx\":[\"/component---src-templates-post-template-tsx-content-file-path-content-nestjs-start-nestjs-start-mdx-f61d25537276fd440a48.js\"],\"component---src-templates-post-template-tsx-content-file-path-content-npm-build-index-mdx\":[\"/component---src-templates-post-template-tsx-content-file-path-content-npm-build-index-mdx-27217d5f71dedb56db41.js\"],\"component---src-templates-post-template-tsx-content-file-path-content-pull-request-index-mdx\":[\"/component---src-templates-post-template-tsx-content-file-path-content-pull-request-index-mdx-30c33358f5af597fdbba.js\"],\"component---src-templates-post-template-tsx-content-file-path-content-pydict-pydict-mdx\":[\"/component---src-templates-post-template-tsx-content-file-path-content-pydict-pydict-mdx-ab725a832278697925d9.js\"],\"component---src-templates-post-template-tsx-content-file-path-content-python-gui-python-gui-mdx\":[\"/component---src-templates-post-template-tsx-content-file-path-content-python-gui-python-gui-mdx-0bf0d21d419c084bfc0c.js\"],\"component---src-templates-post-template-tsx-content-file-path-content-python-sort-sort-mdx\":[\"/component---src-templates-post-template-tsx-content-file-path-content-python-sort-sort-mdx-51f0d043a9c6fd67d21b.js\"],\"component---src-templates-post-template-tsx-content-file-path-content-qemu-index-mdx\":[\"/component---src-templates-post-template-tsx-content-file-path-content-qemu-index-mdx-2122ed611102df5b2037.js\"],\"component---src-templates-post-template-tsx-content-file-path-content-rails-archive-index-mdx\":[\"/component---src-templates-post-template-tsx-content-file-path-content-rails-archive-index-mdx-1e2d9dc4e69d154da112.js\"],\"component---src-templates-post-template-tsx-content-file-path-content-rails-markdown-index-mdx\":[\"/component---src-templates-post-template-tsx-content-file-path-content-rails-markdown-index-mdx-ff24a5e98c8af591ba76.js\"],\"component---src-templates-post-template-tsx-content-file-path-content-rails-slug-url-index-mdx\":[\"/component---src-templates-post-template-tsx-content-file-path-content-rails-slug-url-index-mdx-77777673445b2303bac1.js\"],\"component---src-templates-post-template-tsx-content-file-path-content-react-dynamic-component-tagname-index-mdx\":[\"/component---src-templates-post-template-tsx-content-file-path-content-react-dynamic-component-tagname-index-mdx-d1ea3ee0d286fa2ad069.js\"],\"component---src-templates-post-template-tsx-content-file-path-content-react-jsx-render-index-mdx\":[\"/component---src-templates-post-template-tsx-content-file-path-content-react-jsx-render-index-mdx-c56facea8460ecc29d36.js\"],\"component---src-templates-post-template-tsx-content-file-path-content-react-native-custom-fonts-index-mdx\":[\"/component---src-templates-post-template-tsx-content-file-path-content-react-native-custom-fonts-index-mdx-b6d1ecb5bfc80b013e7d.js\"],\"component---src-templates-post-template-tsx-content-file-path-content-react-native-icons-index-mdx\":[\"/component---src-templates-post-template-tsx-content-file-path-content-react-native-icons-index-mdx-719fb5ef2bb554b5f0a0.js\"],\"component---src-templates-post-template-tsx-content-file-path-content-react-render-props-react-render-props-mdx\":[\"/component---src-templates-post-template-tsx-content-file-path-content-react-render-props-react-render-props-mdx-c7dc23646358e81e74d0.js\"],\"component---src-templates-post-template-tsx-content-file-path-content-react-timers-react-timers-mdx\":[\"/component---src-templates-post-template-tsx-content-file-path-content-react-timers-react-timers-mdx-e372a898ef08f2dc563c.js\"],\"component---src-templates-post-template-tsx-content-file-path-content-recursive-component-recursive-component-mdx\":[\"/component---src-templates-post-template-tsx-content-file-path-content-recursive-component-recursive-component-mdx-b956c5871f619ef2ed6d.js\"],\"component---src-templates-post-template-tsx-content-file-path-content-redux-saga-redux-saga-mdx\":[\"/component---src-templates-post-template-tsx-content-file-path-content-redux-saga-redux-saga-mdx-0156f88ce029e915b59f.js\"],\"component---src-templates-post-template-tsx-content-file-path-content-responsive-menu-index-mdx\":[\"/component---src-templates-post-template-tsx-content-file-path-content-responsive-menu-index-mdx-0c0999b091ebeb0d445e.js\"],\"component---src-templates-post-template-tsx-content-file-path-content-rn-dark-mode-rn-dark-mode-mdx\":[\"/component---src-templates-post-template-tsx-content-file-path-content-rn-dark-mode-rn-dark-mode-mdx-1dca07b02021085b6887.js\"],\"component---src-templates-post-template-tsx-content-file-path-content-rn-maps-rn-maps-mdx\":[\"/component---src-templates-post-template-tsx-content-file-path-content-rn-maps-rn-maps-mdx-08e267f85eb7ef4a8972.js\"],\"component---src-templates-post-template-tsx-content-file-path-content-rn-mobile-splash-screen-mobile-splash-screen-mdx\":[\"/component---src-templates-post-template-tsx-content-file-path-content-rn-mobile-splash-screen-mobile-splash-screen-mdx-40b13c34cb82c9c4b544.js\"],\"component---src-templates-post-template-tsx-content-file-path-content-rn-settings-rn-settings-mdx\":[\"/component---src-templates-post-template-tsx-content-file-path-content-rn-settings-rn-settings-mdx-7af45cffe6d282d54dad.js\"],\"component---src-templates-post-template-tsx-content-file-path-content-rn-toolkit-rn-toolkit-mdx\":[\"/component---src-templates-post-template-tsx-content-file-path-content-rn-toolkit-rn-toolkit-mdx-c3927ec2b9ca70281d56.js\"],\"component---src-templates-post-template-tsx-content-file-path-content-rn-without-android-studio-rn-without-android-studio-mdx\":[\"/component---src-templates-post-template-tsx-content-file-path-content-rn-without-android-studio-rn-without-android-studio-mdx-798fc67eb323bd4c0479.js\"],\"component---src-templates-post-template-tsx-content-file-path-content-ruby-archives-in-jekyll-index-mdx\":[\"/component---src-templates-post-template-tsx-content-file-path-content-ruby-archives-in-jekyll-index-mdx-047dcbcfa93445bba18a.js\"],\"component---src-templates-post-template-tsx-content-file-path-content-ruby-jekyll-index-mdx\":[\"/component---src-templates-post-template-tsx-content-file-path-content-ruby-jekyll-index-mdx-9335f95454e634038bd3.js\"],\"component---src-templates-post-template-tsx-content-file-path-content-ruby-rvm-index-mdx\":[\"/component---src-templates-post-template-tsx-content-file-path-content-ruby-rvm-index-mdx-c4c4d71e3921089f030b.js\"],\"component---src-templates-post-template-tsx-content-file-path-content-ruby-sinatra-index-mdx\":[\"/component---src-templates-post-template-tsx-content-file-path-content-ruby-sinatra-index-mdx-a443f9769d480ee89051.js\"],\"component---src-templates-post-template-tsx-content-file-path-content-sass-controls-index-mdx\":[\"/component---src-templates-post-template-tsx-content-file-path-content-sass-controls-index-mdx-9e7ff15f6c24f59bf7b4.js\"],\"component---src-templates-post-template-tsx-content-file-path-content-ssh-keys-index-mdx\":[\"/component---src-templates-post-template-tsx-content-file-path-content-ssh-keys-index-mdx-5207097eb2857e356a4c.js\"],\"component---src-templates-post-template-tsx-content-file-path-content-tex-ebup-latex-epub-latex-md\":[\"/component---src-templates-post-template-tsx-content-file-path-content-tex-ebup-latex-epub-latex-md-c25b19f865fca24ff1f8.js\"],\"component---src-templates-post-template-tsx-content-file-path-content-texreview-texreview-mdx\":[\"/component---src-templates-post-template-tsx-content-file-path-content-texreview-texreview-mdx-8b5d9c563048efe8481c.js\"],\"component---src-templates-post-template-tsx-content-file-path-content-tikz-tikz-mdx\":[\"/component---src-templates-post-template-tsx-content-file-path-content-tikz-tikz-mdx-9dd488512e68b132f95e.js\"],\"component---src-templates-post-template-tsx-content-file-path-content-title-latex-title-latex-mdx\":[\"/component---src-templates-post-template-tsx-content-file-path-content-title-latex-title-latex-mdx-d62f7a9645f4d9eb6e00.js\"],\"component---src-templates-post-template-tsx-content-file-path-content-udev-index-mdx\":[\"/component---src-templates-post-template-tsx-content-file-path-content-udev-index-mdx-34bbd61cbb752d1dc6f2.js\"],\"component---src-templates-post-template-tsx-content-file-path-content-whois-whois-mdx\":[\"/component---src-templates-post-template-tsx-content-file-path-content-whois-whois-mdx-6b15be52bd2f8ce1a766.js\"],\"component---src-templates-tag-template-tsx\":[\"/component---src-templates-tag-template-tsx-41c1dc64612956e85124.js\"]}";
          </script>
        <script>window.___webpackCompilationHash="564798658944e73b73c6";</script><script src="/webpack-runtime-580fb7172f783dce07c9.js" async></script><script src="/framework-35077be2a200ce034dbf.js" async></script><script src="/app-b05bbfbd6f04ab26f1a1.js" async></script><!-- slice-end id="_gatsby-scripts-1" --></body></html>