<!DOCTYPE html><html lang="ru"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta name="yandex-verification" content="494a81ecb0e796d6"/><meta name="theme-color" content="#DFDBE5"/><meta name="description" content="Мультиязычный блог и генератор статики gatsby" data-gatsby-head="true"/><meta property="og:title" content="Великолепный Gatsby.js" data-gatsby-head="true"/><meta property="og:description" content="Мультиязычный блог и генератор статики gatsby" data-gatsby-head="true"/><meta property="og:type" content="website" data-gatsby-head="true"/><meta property="og:image" content="https://www.unix-lab.org/gatsby.jpg" data-gatsby-head="true"/><meta name="twitter:card" content="summary_large_image" data-gatsby-head="true"/><meta name="twitter:site" content="@octowed" data-gatsby-head="true"/><meta name="twitter:creator" content="@octowed" data-gatsby-head="true"/><meta name="twitter:title" content="Великолепный Gatsby.js" data-gatsby-head="true"/><meta name="twitter:description" content="Мультиязычный блог и генератор статики gatsby" data-gatsby-head="true"/><meta name="twitter:image" content="https://www.unix-lab.org/gatsby.jpg" data-gatsby-head="true"/><style data-href="/styles.28a11c2c77d6ee440702.css" data-identity="gatsby-global-css">@import url(https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap);*,:after,:before{box-sizing:border-box}:root{-moz-tab-size:4;tab-size:4}html{-webkit-text-size-adjust:100%;line-height:1.15}body{margin:0}hr{height:0}abbr[title]{text-decoration:underline dotted}b,strong{font-weight:bolder}code,kbd,pre,samp{font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;font-size:1em}small{font-size:80%}sub,sup{font-size:75%}button,input,optgroup,select,textarea{font-family:inherit;font-size:100%;line-height:1.15;margin:0}button,select{text-transform:none}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{padding:.35em .75em .625em}legend{padding:0}progress{vertical-align:baseline}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}summary{display:list-item}:root{--hslPercent:0%;--textColor:#3f3f3f;--bgColor:#fff;--bgTags:#f7f7f7;--sidebarColor:#e8e8e8;--textSmoothColor:hsl(0,0%,calc(74.9% + var(var(--hslPercent))));--yellowColor:#ffd01b;--redColor:#c31;--linkColor:#70a0b0;--linkStyle:"none";--vikingColor:#34adc5;--iconColor:rgba(0,0,0,.8);--bodyBgColor:#dfdbe5;--borderColor:#dfdbe5;--shadow:0 0 1px rgba(0,0,180,.1),0 0 1px rgb(0 0 80/6%),0 2px 2px rgb(0 0 80/6%),0 2px 2px rgb(0 0 80/6%),0 1px 1px rgb(0 0 80/1%),0 8px 8px rgb(0 0 80/6%)}.inverted{--hslPercent:20%;--textColor:#a9a9b3;--bgColor:#1d2026;--bgTags:rgba(0,0,0,.5);--sidebarColor:#18171c;--iconColor:hsla(0,0%,100%,.8);--bodyBgColor:#1d2026;--borderColor:hsla(0,0%,100%,.2);--linkColor:#a9a9b3;--linkStyle:underline}@media (prefers-color-scheme:dark){:root{--hslPercent:20%;--textColor:#a9a9b3;--bgColor:#1d2026;--bgTags:rgba(0,0,0,.5);--sidebarColor:#18171c;--iconColor:hsla(0,0%,100%,.8);--bodyBgColor:#1d2026;--borderColor:hsla(0,0%,100%,.2);--linkColor:#a9a9b3;--linkStyle:underline}.inverted{--hslPercent:0%;--textColor:#3f3f3f;--bgColor:#fff;--bgTags:#f7f7f7;--sidebarColor:#e8e8e8;--iconColor:rgba(0,0,0,.8);--bodyBgColor:#dfdbe5;--borderColor:#dfdbe5;--linkColor:#70a0b0;--linkStyle:"none"}}@font-face{font-display:swap;font-family:Philosopher;font-style:normal;font-weight:700;src:url(/fonts/Philosopher_ru.woff2) format("woff2");unicode-range:u+0400-045f,u+0490-0491,u+04b0-04b1,u+2116}@font-face{font-display:swap;font-family:Philosopher;font-style:normal;font-weight:700;src:url(/fonts/Philosopher_en.woff2) format("woff2");unicode-range:u+00??,u+0131,u+0152-0153,u+02bb-02bc,u+02c6,u+02da,u+02dc,u+2000-206f,u+2074,u+20ac,u+2122,u+2191,u+2193,u+2212,u+2215,u+feff,u+fffd}h1,h2,h3,h4,h5,h6{font-family:Philosopher,-apple-system,BlinkMacSystemFont,Segoe UI,Arial,sans-serif;font-weight:700}html{font-size:16px;line-height:21px}body{font-family:Inter,-apple-system,BlinkMacSystemFont,Segoe UI,Arial,sans-serif;font-size:1rem;font-weight:400;line-height:1.5rem}h1,h2,h3,h4,h5,h6{margin-bottom:10px;margin-top:2rem}h1{font-size:2.8125rem;line-height:3.9375rem}h2{font-size:2rem}h2,h3{line-height:2.625rem}h3{font-size:1.4375rem}h4{line-height:1.3125rem}h4,h5{font-size:1rem}h5{font-size:.8rem;line-height:1.3125rem}blockquote,ol,p,table,ul{margin-bottom:1.3125rem;margin-top:0}ol ol,ol ul,ul ol,ul ul{margin-bottom:0;margin-top:0}.hr,hr{border:1px solid;margin:-1px 0}a,b,code,em,i,small,strong{line-height:1.3}sub,sup{line-height:0;position:relative;vertical-align:baseline}sup{top:-.5em}sub{bottom:-.25em}#___gatsby{overflow:hidden}.layout{background-color:var(--bgColor);display:flex;flex-direction:column;justify-content:space-between;max-width:1200px;min-height:100vh;padding:1rem 0 0}.page{margin:60px auto 0;width:90%}.articles{list-style:none;margin:0;padding:0}.gatsby-highlight{margin-bottom:2.5rem}@media (min-width:640px){.articles{align-items:flex-end;display:flex;flex-flow:row wrap;justify-content:space-between}.articles li{width:25%}}@media (min-width:960px){.layout{box-shadow:1px 0 3px var(--textSmoothColor);margin:2rem;min-height:auto}.gatsby-highlight{max-width:860px}}@media (min-width:1300px){.layout{margin:2rem auto}}.footer-module--footer--03d8a{display:flex;flex-flow:row wrap;justify-content:center;margin-top:5rem;min-height:50px;padding:1rem 0}.footer-module--footer__link--22faa{display:block}.footer-module--footer--03d8a a[target=_blank]:after{content:""}.footer-module--footer__link--22faa svg{height:15px;width:86px}.footer-module--footer__link--22faa:nth-child(2) svg{height:20px}@media (min-width:640px){.footer-module--footer__link--22faa svg{width:125px}}.gatsby-code-button-buffer{background-color:#f5f5f5;height:18px;position:absolute;right:2px;top:0;width:18px}.gatsby-code-button-buffer svg{height:16px;width:16px}body{-webkit-font-smoothing:antialiased;background-color:var(--bgColor);color:var(--textColor);text-rendering:optimizelegibility}.hidden{display:none}a{color:var(--linkColor);text-decoration:none}a:hover{text-decoration:underline}a[target=_blank]{margin-right:3px}a[target=_blank]:after{content:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxNSIgaGVpZ2h0PSIxNSIgYXJpYS1oaWRkZW49InRydWUiIGNsYXNzPSJwcmVmaXhfX2ljb24gcHJlZml4X19pY29uX2V4dGVybmFsIiB2aWV3Qm94PSIwIDAgMTAwIDEwMCI+PHBhdGggZmlsbD0iI2FhYSIgZD0iTTE4LjggODUuMWg1NmMyLjIgMCA0LTEuOCA0LTR2LTMyaC04djI4aC00OHYtNDhoMjh2LThoLTMyYy0yLjIgMC00IDEuOC00IDR2NTZjMCAyLjIgMS44IDQgNCA0eiIvPjxwb2x5Z29uIGZpbGw9IiNhYWEiIHBvaW50cz0iNDUuNyA0OC43IDUxLjMgNTQuMyA3Ny4yIDI4LjUgNzcuMiAzNy4yIDg1LjIgMzcuMiA4NS4yIDE0LjkgNjIuOCAxNC45IDYyLjggMjIuOSA3MS41IDIyLjkiLz48L3N2Zz4=);margin-left:3px}table,td,th{border:1px solid var(--textSmoothColor);padding:10px}table{border-collapse:collapse;border-color:transparent;display:block;margin:0 auto;overflow-x:auto;width:100%}@media screen and (min-width:640px){table{border-color:var(--textSmoothColor);border-radius:5px;display:table;margin:40px 0}}blockquote{background-color:var(--bgTags);border-left:2px solid var(--redColor);margin:0 0 1rem;padding:1em 1em 1em 2em;position:relative}blockquote p{margin-bottom:1em;margin-top:0}blockquote:before{content:'"';font-size:2em;left:.3em;line-height:2em;position:absolute;top:0}@media screen and (min-width:768px){blockquote{font-size:1.5rem;line-height:1.3;margin-right:auto;max-width:860px}}button{background:none;border:none;line-height:0;padding:0}.button{align-items:center;background-color:transparent;border:1px solid var(--borderColor);color:var(--textColor);display:inline-flex;font-size:11px;height:100%;letter-spacing:.5px;line-height:1;outline:none;padding:20px 3rem;position:relative;text-decoration:none;text-transform:uppercase}.button_link{border:0;padding:1rem}.button_small{padding:10px 3rem}.button__icon{display:inline-flex;height:15px;margin-left:10px;position:relative;width:15px}.button__icon:after,.button__icon:before{background:var(--textColor);content:"";height:1px;position:absolute;top:50%;width:6px}.button__icon:before{left:2.5px;transform:rotate(45deg)}.button__icon:after{right:2.5px;transform:rotate(-45deg)}iframe,video{height:auto;margin-bottom:1rem;max-width:800px;min-height:300px;width:100%}body{background-color:var(--bodyBgColor)}.header{align-items:center;display:grid;grid-template-columns:3fr 48px 40px 40px;justify-content:flex-end;margin:0 auto;padding:1rem 0;position:relative;width:90%}.header__logo{margin-right:auto}.header__tags{display:none!important}.header__tagsSwitcher{outline:none}.header__tagsSwitcher svg{height:22px;width:30px}@media (min-width:640px){.header{grid-template-columns:60px 2fr 30px 30px;margin:0 auto}.header__tags{display:flex!important}.header__tagsSwitcher{display:none}}.logo{display:flex;height:40px;width:40px}.logo:hover{transform:scale(1.1)}a.next-prev-module--link--3ae6f{border-color:var(--textColor);border-style:dotted;border-width:1px 0;color:var(--textColor);padding:5px 15px;text-decoration:none!important}a.next-prev-module--link--3ae6f:hover{border-style:dashed}.next-prev-module--link__separator--e12da{background-color:var(--textColor);border-radius:50%;display:inline-block;height:6px;margin-left:10px;margin-right:10px;width:6px}.next-prev-module--link__title--a796e{color:var(--textColor);display:block;font-size:1em;font-weight:700;margin-top:10px}.next-prev-module--links--d62c5{align-items:center;display:flex;flex-wrap:row wrap;margin:2rem 0}.searchBlock{display:flex}.searchBlock_active{position:absolute;right:0;top:1rem;width:calc(100% - 1rem);z-index:10}.searchForm{opacity:1;pointer-events:all;position:relative;width:100%}.searchForm_hidden{opacity:0;pointer-events:none;width:0}.searchForm__input{appearance:none;background:var(--bgColor);border:1px solid var(--textColor);border-radius:20px;color:var(--textColor);font-size:16px;line-height:1.2;outline:none;padding:.5rem 40px .5rem 1rem;position:relative;width:100%;z-index:10}.searchForm_hidden input{opacity:0;width:0}.searchForm__button{cursor:pointer;margin:auto;outline:none;width:30px}.searchForm__button_close{background-color:var(--textColor);border-radius:50%;height:28px;padding:4px;position:absolute;right:4px;top:4px;width:28px;z-index:11}.searchForm__button_close svg{fill:var(--bgColor)}.searchForm__list{background-color:var(--bgColor);list-style:none;padding:5px 0 5px 10px;position:absolute;right:-5px;top:45px;width:100%;z-index:11}.searchForm__list a{color:var(--textColor);display:inline-block;font-size:14px;padding:.5rem 0}.searchForm__list a:hover{text-decoration:underline}@media (min-width:460px){.searchBlock_active,.searchForm{width:300px}.searchForm_hidden{width:0}.searchForm__button_close{right:4px}.searchForm__list{width:300px}}@media (min-width:640px){.searchBlock{top:inherit}}.tags-module--tags--512d6{align-items:center;display:flex;flex-flow:row wrap;list-style:none;margin:0;padding:0}.tags-module--tags--512d6 a{background-color:#333;border-radius:3px;color:#fff;font-size:10px;letter-spacing:.5px;margin:1px 1px 3px;padding:8px 10px;text-decoration:none;text-transform:uppercase;transition:all .3s cubic-bezier(.4,.01,.165,.99)}.tags-module--tags--512d6 li{margin:7px 0}.tags-module--tags--512d6 li:not(:last-child){margin-right:5px}.tags-module--tags--512d6 a:hover{background-color:#bfbfbf;text-decoration:none}.tags-module--tags_page--6ce9e li{margin:0 0 35px}.tags-module--tags_page--6ce9e a{font-size:1.2rem;padding:.8rem 1.5rem}.tags-module--tags_header--f87a8{grid-row:2;margin:10px auto}@media (min-width:640px){.tags-module--tags_header--f87a8{grid-column:2;grid-row:1;margin:10px}}summary::-webkit-details-marker{display:none}.toc-module--details--fda91{margin:1rem auto 2rem}.toc-module--list--5acce{list-style:none;margin-top:1rem;padding-left:0}.toc-module--list__item--75273{margin-bottom:.5rem}.page__content a{text-decoration:var(--linkStyle)}.page__content a:hover{text-decoration:underline}.article__header{border-bottom:1px solid var(--borderColor);border-top:1px solid var(--borderColor);display:flex;margin-bottom:1rem;max-width:960px}.article__header_inList{display:block}.article__box{align-items:center;display:flex;flex-flow:row wrap;padding-bottom:1rem}.article__image{background-color:#708090;background-position:50%;background-repeat:no-repeat;background-size:cover;clip-path:polygon(25% 0,100% 0,100% 100%,0 100%);display:flex;min-height:200px;width:100%}.article__image_inList{clip-path:polygon(0 0,90% 0,100% 100%,10% 100%);filter:none}.article__image_inList:hover{filter:saturate(60%)}.article__title{font-size:26px;line-height:1.2;margin:1rem 0;width:100%}.article_inList .article__title{font-family:Roboto,-apple-system,BlinkMacSystemFont,Segoe UI,Arial,sans-serif;font-size:.9rem;margin-bottom:0}.article_inList .article__date{font-size:.8rem;margin-left:0}.articles li:first-child .article__image{height:340px}.articles li:nth-child(2) .article__image{height:280px}.article__tag{color:var(--textColor);font-size:.9rem;letter-spacing:-.00879776em;margin-right:10px}.article__tag,.article__tag:hover{text-decoration:none}.article__tag:hover span{background-color:var(--bgTags)}.article__tag span{border:1px solid var(--borderColor);padding:5px 15px}.article__date{font-size:.9rem}.comments{margin-bottom:2rem}.article .gatsby-resp-image-wrapper{box-shadow:var(--shadow);margin:1.5rem 0}@media (min-width:620px){.article{margin-left:60px}.article_inList{margin-left:0}.article__title{font-size:32px}}@media (min-width:960px){.article__title{font-size:42px}.article h2,.article h3,.article h4,.article h5,.article h6,.article ol,.article p,.article ul,.comments{max-width:620px}.article .gatsby-resp-image-wrapper{margin-left:0!important;width:760px}.article table{width:860px}}@media (min-width:1200px){.article .gatsby-resp-image-wrapper{width:860px}}.tip-module--tip--f7b96{border:1px solid #42b983;border-left-width:.5rem;margin:1rem 0;padding:1rem 1.5rem}.tip-module--heading--d9f2b{font-weight:700;margin-bottom:.5rem}.tip-module--warning--6d7c1{border-color:coral}.tip-module--danger--0857a{border-color:crimson}@media (min-width:960px){.tip-module--tip--f7b96{max-width:620px}}.tabs-module--tabs--0e384{perspective:300px}.tabs-module--tab__buttons--cdbc9{border-bottom:1px solid var(--vikingColor);display:inline-flex;overflow-x:auto;width:100%}.tabs-module--tab__button--5cfcd{background-color:transparent;border:none;border:1px solid var(--vikingColor);border-bottom:none;color:var(--textColor);cursor:pointer;display:block;outline:none;padding:1rem;transition:background-color .3s;white-space:nowrap}.tabs-module--tab__button--5cfcd:not(:last-child){margin-right:5px}.tabs-module--tab__button_active--9de04{background-color:var(--vikingColor);color:#fff}.tabs-module--tab_single--ccb24{line-height:1.4em;opacity:0;padding:1.5rem 0 1rem;pointer-events:none;position:absolute;transform:rotateX(-20deg);transform-origin:top center;z-index:0}.tabs-module--tab_single_active--3ae69{pointer-events:inherit}@media (min-width:960px){.tabs-module--tab__buttons--cdbc9{width:auto}}.icon{fill:var(--iconColor);cursor:pointer}.icon_mail,.icon_telegram,.icon_twitter{fill:var(--textColor);margin:0 10px}.icon_search,.icon_theme{height:22px;width:22px}.theme-switcher-module--themeSwitcher--032b9{cursor:pointer;margin:auto;outline:none;width:30px}._404-module--not_found--8156c{align-items:center;display:flex;flex-direction:column}._404-module--title--80dc8{font-size:5rem;margin-bottom:1rem}.taglist-module--page--417be{margin:0 auto;max-width:960px}.taglist-module--title--674b9{margin:0}.taglist-module--wrapper--0a364{align-items:center;display:flex;flex-flow:row wrap;margin-bottom:2rem}.taglist-module--tags--29a31{margin:0;padding:0}.taglist-module--tag--faafd{list-style-type:none;padding:.5rem;position:relative}.taglist-module--tag--faafd a{color:var(--textColor);text-decoration:none}.taglist-module--tag--faafd a:hover{text-decoration:underline}@media screen and (min-width:640px){.taglist-module--tags--29a31{display:grid;grid-template-columns:repeat(auto-fit,minmax(50%,1fr))}.taglist-module--tag--faafd{border-bottom:1px solid rgba(0,96,160,.15)}}:root{--codeBgColor:#fbfdff;--codeSaturation:0%;--codeColor:#505362}.inverted{--codeBgColor:#282c34;--codeColor:#bfbfbf;--codeSaturation:30%;--aga:hsl(255,255,50%)}@media (prefers-color-scheme:dark){:root{--codeBgColor:#282c34;--codeColor:#bfbfbf;--codeSaturation:30%}.inverted{--codeBgColor:#fbfdff;--codeColor:#505362;--codeSaturation:0%}}.gatsby-highlight{border-radius:4px;box-shadow:var(--shadow);overflow:auto;position:relative}@media (min-width:960px){.gatsby-highlight{max-width:860px}}.gatsby-highlight pre{margin-bottom:0;margin-top:0}code[class*=language-],pre[class*=language-]{word-wrap:normal;background:none;color:var(--codeColor);font-family:Consolas,Liberation Mono,Menlo,Courier,monospace;font-size:.85rem;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;text-align:left;white-space:pre;word-break:normal;word-spacing:normal}pre[class*=language-]{overflow:auto;padding:1em}pre>code[class*=language-]{font-size:.8rem}:not(pre)>code[class*=language-],pre[class*=language-]{background:#fff;background:var(--codeBgColor)}:not(pre)>code[class*=language-]{border-radius:.3em;padding:.1em;white-space:normal}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#a0a1a7}.token.operator,.token.punctuation{color:var(--codeColor)}.token.selector,.token.tag{color:hsl(209,30%,calc(45% + var(--codeSaturation)))}.token.attr-name,.token.boolean,.token.constant,.token.deleted,.token.number,.token.property,.token.symbol{color:hsl(19,64%,calc(45% + var(--codeSaturation)))}.token.attr-value,.token.builtin,.token.char,.token.inserted,.token.string{color:hsl(79,38%,calc(37% + var(--codeSaturation)))}.language-css .token.string,.style .token.string,.token.entity,.token.operator,.token.url{color:hsl(187,44%,calc(49% + var(--codeSaturation)))}.token.function{color:hsl(207,70%,calc(45% + var(--codeSaturation)))}.token.atrule,.token.important,.token.keyword,.token.regex,.token.variable{color:hsl(286,45%,calc(50% + var(--codeSaturation)))}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}pre.line-numbers{counter-reset:linenumber;padding-left:3.8em}pre.line-numbers,pre.line-numbers>code{position:relative}.line-numbers .line-numbers-rows{border-right:0;font-size:100%;left:-3.8em;letter-spacing:-1px;pointer-events:none;position:absolute;top:0;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;width:3em}.line-numbers-rows>span{counter-increment:linenumber;display:block;pointer-events:none}.line-numbers-rows>span:before{color:#b5b9c2;content:counter(linenumber);display:block;padding-right:.8em;text-align:right}.gatsby-highlight[data-language]:before{border-radius:0 0 4px 4px;color:#36313d;display:none;font-size:.75rem;letter-spacing:.075em;line-height:1;padding:.25rem .5rem;position:absolute;right:1.5rem;text-align:right;text-transform:uppercase;top:0}@media screen and (min-width:640px){.gatsby-highlight[data-language]:before{display:block}}.gatsby-highlight[data-language=javascript]:before,.gatsby-highlight[data-language=js]:before,.gatsby-highlight[data-language=jsx]:before{background:#ffd01b;color:#36313d}.gatsby-highlight[data-language=javascript]:before,.gatsby-highlight[data-language=js]:before,.gatsby-highlight[data-language=jsx]:before{content:"js"}.gatsby-highlight[data-language=jsx]:before{background:#61dafb;content:"jsx"}.gatsby-highlight[data-language=ts]:before,.gatsby-highlight[data-language=tsx]:before,.gatsby-highlight[data-language=typescript]:before{background:#294e80;color:#fff}.gatsby-highlight[data-language=ts]:before,.gatsby-highlight[data-language=typescript]:before{content:"ts"}.gatsby-highlight[data-language=tsx]:before{content:"tsx"}.gatsby-highlight[data-language=html]:before{background:#005a9c;color:#fff;content:"html"}.gatsby-highlight[data-language=xml]:before{background:#00749c;color:#fff;content:"xml"}.gatsby-highlight[data-language=php]:before{background:#69c;color:#fff;content:"php"}.gatsby-highlight[data-language=css]:before{background:#ff9800;content:"css"}.gatsby-highlight[data-language=c]:before,.gatsby-highlight[data-language=mdx]:before{background:#f9ac00;font-weight:400}.gatsby-highlight[data-language=c]:before{content:"c"}.gatsby-highlight[data-language=mdx]:before{content:"mdx"}.gatsby-highlight[data-language=bash]:before,.gatsby-highlight[data-language=conf]:before,.gatsby-highlight[data-language=markdown]:before,.gatsby-highlight[data-language=sh]:before,.gatsby-highlight[data-language=shell]:before{background:silver}.gatsby-highlight[data-language=bash]:before,.gatsby-highlight[data-language=sh]:before{content:"bash"}.gatsby-highlight[data-language=shell]:before{content:"shell"}.gatsby-highlight[data-language=sh]:before{content:"conf"}.gatsby-highlight[data-language=markdown]:before{content:"md"}.gatsby-highlight[data-language=json5]:before,.gatsby-highlight[data-language=json]:before{background:linen;color:#36313d;content:"json"}.gatsby-highlight[data-language=diff]:before{background:#e6ffed;content:"diff"}.gatsby-highlight[data-language=text]:before{background:transparent;content:""}.gatsby-highlight[data-language=sass]:before,.gatsby-highlight[data-language=yaml]:before{background:#ffa8df}.gatsby-highlight[data-language=yaml]:before{content:"yaml"}.gatsby-highlight[data-language=sass]:before{content:"sass"}.gatsby-highlight[data-language=rb]:before,.gatsby-highlight[data-language=ruby]:before{background:#cc342d;color:#fff;content:"rb"}.gatsby-highlight[data-language=erb]:before{background:#de7768;color:#fff;content:"erb"}.gatsby-highlight[data-language=tex]:before{background:#de6894;color:#fff;content:"tex"}.gatsby-highlight[data-language=graphql]:before{background:#e10098;color:#fff;content:"GraphQL"}.gatsby-highlight[data-language=lisp]:before{background:#7f5ab6;color:#fff;content:"lisp"}.gatsby-highlight[data-language=vue]:before{background:#4fc08d;color:#fff;content:"vue"}.gatsby-highlight[data-language=py]:before,.gatsby-highlight[data-language=python]:before{background:#093;color:#fff;content:"py"}.gatsby-highlight[data-language=django]:before{background:#44b78b;color:#fff;content:"html"}</style><link rel="icon" href="/favicon-32x32.png?v=811a7931fba03b4e9798857dcaf98dd9" type="image/png"/><link rel="manifest" href="/manifest.webmanifest" crossorigin="anonymous"/><link rel="apple-touch-icon" sizes="48x48" href="/icons/icon-48x48.png?v=811a7931fba03b4e9798857dcaf98dd9"/><link rel="apple-touch-icon" sizes="72x72" href="/icons/icon-72x72.png?v=811a7931fba03b4e9798857dcaf98dd9"/><link rel="apple-touch-icon" sizes="96x96" href="/icons/icon-96x96.png?v=811a7931fba03b4e9798857dcaf98dd9"/><link rel="apple-touch-icon" sizes="144x144" href="/icons/icon-144x144.png?v=811a7931fba03b4e9798857dcaf98dd9"/><link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192x192.png?v=811a7931fba03b4e9798857dcaf98dd9"/><link rel="apple-touch-icon" sizes="256x256" href="/icons/icon-256x256.png?v=811a7931fba03b4e9798857dcaf98dd9"/><link rel="apple-touch-icon" sizes="384x384" href="/icons/icon-384x384.png?v=811a7931fba03b4e9798857dcaf98dd9"/><link rel="apple-touch-icon" sizes="512x512" href="/icons/icon-512x512.png?v=811a7931fba03b4e9798857dcaf98dd9"/><style type="text/css">
    .anchor.before {
      position: absolute;
      top: 0;
      left: 0;
      transform: translateX(-100%);
      padding-right: 4px;
    }
    .anchor.after {
      display: inline-block;
      padding-left: 4px;
    }
    h1 .anchor svg,
    h2 .anchor svg,
    h3 .anchor svg,
    h4 .anchor svg,
    h5 .anchor svg,
    h6 .anchor svg {
      visibility: hidden;
    }
    h1:hover .anchor svg,
    h2:hover .anchor svg,
    h3:hover .anchor svg,
    h4:hover .anchor svg,
    h5:hover .anchor svg,
    h6:hover .anchor svg,
    h1 .anchor:focus svg,
    h2 .anchor:focus svg,
    h3 .anchor:focus svg,
    h4 .anchor:focus svg,
    h5 .anchor:focus svg,
    h6 .anchor:focus svg {
      visibility: visible;
    }
  </style><script>
    document.addEventListener("DOMContentLoaded", function(event) {
      var hash = window.decodeURI(location.hash.replace('#', ''))
      if (hash !== '') {
        var element = document.getElementById(hash)
        if (element) {
          var scrollTop = window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop
          var clientTop = document.documentElement.clientTop || document.body.clientTop || 0
          var offset = element.getBoundingClientRect().top + scrollTop - clientTop
          // Wait for the browser to finish rendering before scrolling.
          setTimeout((function() {
            window.scrollTo(0, offset - 0)
          }), 0)
        }
      }
    })
  </script><link rel="sitemap" type="application/xml" href="/sitemap-index.xml"/><title data-gatsby-head="true">Великолепный Gatsby.js</title><link rel="preload" as="font" type="font/woff2" href="/fonts/Philosopher_ru.woff2" crossorigin="anonymous" data-gatsby-head="true"/><link rel="preload" as="font" type="font/woff2" href="/fonts/Philosopher_en.woff2" crossorigin="anonymous" data-gatsby-head="true"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><svg width="0" height="0" class="hidden" preserveAspectRatio="xMidYMid meet"><symbol viewBox="0 0 470 146" xmlns="http://www.w3.org/2000/svg" id="email"><path d="M50.98 145.758c11.915 0 22.56-3.353 31.934-10.059 9.375-6.706 16.667-16.21 21.875-28.515L81.156 95.758c-3.45 6.575-7.633 11.588-12.549 15.039-4.915 3.45-10.237 5.176-15.966 5.176-6.12 0-11.296-2.344-15.528-7.032-4.231-4.687-6.347-10.481-6.347-17.382 0-6.771 2.148-12.484 6.445-17.14 4.297-4.654 9.505-6.981 15.625-6.981 1.953 0 3.841.276 5.664.83 1.823.553 3.58 1.383 5.273 2.49L37.797 88.824l12.012 18.164 47.949-32.617C92.615 64.215 86.039 56.484 78.03 51.178c-8.008-5.306-17.024-7.96-27.05-7.96-6.706 0-13.07 1.27-19.092 3.81-6.022 2.538-11.377 6.184-16.065 10.937-4.883 4.948-8.577 10.514-11.084 16.7C2.234 80.848.98 87.424.98 94.39c0 6.966 1.254 13.541 3.76 19.726 2.507 6.185 6.201 11.751 11.084 16.7 4.688 4.817 10.075 8.512 16.162 11.083 6.088 2.572 12.419 3.858 18.994 3.858zM145.414 144V86.969c0-4.037 1.204-7.373 3.613-10.01 2.41-2.637 5.47-3.955 9.18-3.955 3.776 0 6.901 1.318 9.375 3.955s3.711 5.973 3.711 10.01V144h30.566V86.969c0-4.037 1.237-7.373 3.711-10.01 2.474-2.637 5.567-3.955 9.278-3.955 3.71 0 6.77 1.318 9.18 3.955 2.408 2.637 3.613 5.973 3.613 10.01V144h30.761V91.754c0-14.844-3.971-26.677-11.914-35.498-7.942-8.822-18.49-13.233-31.64-13.233-5.078 0-10.091 1.123-15.04 3.37-4.947 2.246-9.407 5.452-13.378 9.619-3.841-4.232-8.252-7.455-13.233-9.668-4.98-2.214-10.302-3.32-15.967-3.32-12.565 0-22.77 4.46-30.615 13.378-7.845 8.92-11.767 20.703-11.767 35.352V144h30.566zm175.781 1.367c1.953 0 4.07-.13 6.348-.39a82.914 82.914 0 0 0 7.227-1.172v-32.422c-3.06.976-5.534 1.66-7.422 2.05-1.888.391-3.549.587-4.98.587-5.925 0-10.597-1.79-14.014-5.372-3.418-3.58-5.127-8.398-5.127-14.453 0-5.86 1.627-10.595 4.882-14.209 3.256-3.613 7.487-5.42 12.696-5.42 6.315 0 11.067 1.856 14.257 5.567 3.19 3.71 4.786 9.212 4.786 16.504V144h30.957v-42.093c-.018-8.632-.36-14.963-1.026-18.991-.683-4.134-1.806-7.894-3.369-11.28-4.036-8.853-10.091-15.836-18.164-20.947-8.073-5.11-17.09-7.666-27.05-7.666-14.454 0-26.368 4.818-35.743 14.454-9.375 9.635-14.062 21.875-14.062 36.718 0 14.844 4.687 27.084 14.062 36.72 9.375 9.634 21.29 14.452 35.742 14.452zm82.618-108.984c5.013 0 9.293-1.774 12.841-5.322 3.548-3.549 5.323-7.83 5.323-12.842 0-5.013-1.775-9.278-5.323-12.793-3.548-3.516-7.828-5.274-12.841-5.274-5.014 0-9.294 1.758-12.842 5.274-3.548 3.515-5.323 7.78-5.323 12.793 0 5.013 1.775 9.293 5.323 12.842 3.548 3.548 7.828 5.322 12.841 5.322zM419.632 144V44.977h-31.64V144h31.64zm50 0V4.156h-31.64V144h31.64z"></path></symbol><symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 172 169" id="site-logo"><path d="M76.193 52.127V0h-47.86c-7.38.722-12.673 2.264-15.879 4.626C6.572 8.96 5.91 9.49 2.738 15.754.514 20.145-.355 25.21.13 30.949v137.56h144.352c4.745-.263 8.35-.862 10.816-1.795 3.7-1.399 3.834-2.369 6.541-4.769 1.806-1.6 3.23-3.58 4.274-5.94l2.642-5.698a28.541 28.541 0 0 0 3.043-12.824V0h-75.5v52.127h20.748v64.805h-61.89V52.127h21.037z" fill-rule="evenodd"></path></symbol><symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384.97 384.97" id="menu"><path d="M12.03 120.303h360.909c6.641 0 12.03-5.39 12.03-12.03 0-6.641-5.39-12.03-12.03-12.03H12.03c-6.641 0-12.03 5.39-12.03 12.03s5.39 12.03 12.03 12.03zm360.909 60.152H12.03c-6.641 0-12.03 5.39-12.03 12.03s5.39 12.03 12.03 12.03h360.909c6.641 0 12.03-5.39 12.03-12.03s-5.389-12.03-12.03-12.03zm0 84.212H132.333c-6.641 0-12.03 5.39-12.03 12.03 0 6.641 5.39 12.03 12.03 12.03h240.606c6.641 0 12.03-5.39 12.03-12.03.001-6.641-5.389-12.03-12.03-12.03z"></path></symbol><symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 22 22" id="search"><path d="M14.906 16.32a8 8 0 1 1 1.414-1.414l3.751 3.751-1.414 1.414-3.751-3.751zM10 16a6 6 0 1 0 0-12 6 6 0 0 0 0 12z"></path></symbol><symbol viewBox="0 0 784 185" xmlns="http://www.w3.org/2000/svg" id="telegram" preserveAspectRatio="xMidYMid meet"><path d="M56.16 140v-29.2H42c-3.841 0-6.527-.715-8.057-2.148-1.53-1.432-2.295-3.906-2.295-7.422V69.98H56.16V40.977H31.648v-24.22H.594v82.227c0 14.128 3.564 24.496 10.693 31.104 7.129 6.608 18.246 9.912 33.35 9.912H56.16zm61.23 1.758c11.915 0 22.56-3.353 31.934-10.059 9.375-6.706 16.667-16.21 21.875-28.515l-23.633-11.426c-3.45 6.575-7.633 11.588-12.548 15.039-4.916 3.45-10.238 5.176-15.967 5.176-6.12 0-11.296-2.344-15.528-7.032-4.231-4.687-6.347-10.481-6.347-17.382 0-6.771 2.148-12.484 6.445-17.14 4.297-4.654 9.505-6.981 15.625-6.981 1.953 0 3.841.276 5.664.83 1.823.553 3.58 1.383 5.274 2.49l-25.977 18.066 12.012 18.164 47.949-32.617c-5.143-10.156-11.719-17.887-19.727-23.193-8.007-5.306-17.024-7.96-27.05-7.96-6.706 0-13.07 1.27-19.092 3.81-6.022 2.538-11.377 6.184-16.065 10.937-4.882 4.948-8.577 10.514-11.084 16.7-2.506 6.184-3.76 12.76-3.76 19.726 0 6.966 1.254 13.541 3.76 19.726 2.507 6.185 6.202 11.751 11.084 16.7 4.688 4.817 10.075 8.512 16.162 11.083 6.088 2.572 12.42 3.858 18.995 3.858zM213.876 140V.156h-31.64V140h31.64zm64.16 1.758c11.914 0 22.559-3.353 31.934-10.059 9.375-6.706 16.666-16.21 21.875-28.515L308.21 91.758c-3.45 6.575-7.634 11.588-12.549 15.039-4.915 3.45-10.238 5.176-15.967 5.176-6.12 0-11.295-2.344-15.527-7.032-4.232-4.687-6.348-10.481-6.348-17.382 0-6.771 2.149-12.484 6.446-17.14 4.296-4.654 9.505-6.981 15.625-6.981 1.953 0 3.84.276 5.664.83 1.823.553 3.58 1.383 5.273 2.49l-25.976 18.066 12.011 18.164 47.95-32.617c-5.144-10.156-11.72-17.887-19.727-23.193-8.008-5.306-17.025-7.96-27.05-7.96-6.707 0-13.07 1.27-19.093 3.81-6.022 2.538-11.377 6.184-16.064 10.937-4.883 4.948-8.578 10.514-11.084 16.7-2.507 6.184-3.76 12.76-3.76 19.726 0 6.966 1.253 13.541 3.76 19.726 2.506 6.185 6.201 11.751 11.084 16.7 4.687 4.817 10.075 8.512 16.162 11.083 6.087 2.572 12.419 3.858 18.994 3.858zm108.692 42.676c16.406 0 29.036-4.346 37.89-13.038 8.854-8.69 13.281-21.012 13.281-36.962v-35.84c0-8.985-.341-15.544-1.025-19.678-.684-4.134-1.807-7.894-3.37-11.28-4.036-8.919-10.058-15.917-18.065-20.995-8.008-5.078-16.993-7.618-26.954-7.618-14.323 0-26.204 4.802-35.644 14.405-9.44 9.603-14.16 21.728-14.16 36.377 0 14.648 4.67 26.741 14.013 36.279 9.343 9.538 21.208 14.307 35.596 14.307 1.888 0 3.955-.13 6.201-.391 2.246-.26 4.77-.651 7.569-1.172v-31.445c-3.06.976-5.534 1.66-7.422 2.05-1.888.391-3.548.587-4.98.587-5.925 0-10.596-1.79-14.014-5.372-3.418-3.58-5.127-8.398-5.127-14.453 0-5.86 1.627-10.595 4.882-14.209 3.256-3.613 7.487-5.42 12.696-5.42 6.25 0 10.954 1.84 14.111 5.518 3.158 3.678 4.736 9.196 4.736 16.553v36.523c0 10.352-1.757 17.318-5.273 20.899-3.516 3.58-9.896 5.37-19.14 5.37-4.623 0-9.473-.455-14.551-1.367-5.079-.911-10.45-2.278-16.114-4.101v30.078a149.995 149.995 0 0 0 17.383 3.272c5.86.748 11.686 1.123 17.48 1.123zM485.262 140v-37.207c0-11.263 2.49-19.385 7.47-24.365 4.98-4.98 13.103-7.471 24.366-7.471h1.367v-29.98h-3.711c-7.682 0-13.997 1.188-18.945 3.564-4.948 2.376-8.985 6.136-12.11 11.28V40.976h-28.613V140h30.176zm88.476 1.367c1.953 0 4.07-.13 6.348-.39a82.914 82.914 0 0 0 7.226-1.172v-32.422c-3.06.976-5.533 1.66-7.421 2.05-1.888.391-3.549.587-4.98.587-5.925 0-10.597-1.79-14.015-5.372-3.417-3.58-5.126-8.398-5.126-14.453 0-5.86 1.627-10.595 4.882-14.209 3.256-3.613 7.487-5.42 12.696-5.42 6.315 0 11.067 1.856 14.257 5.567 3.19 3.71 4.786 9.212 4.786 16.504V140h30.957V98.594c0-8.985-.342-15.544-1.026-19.678-.683-4.134-1.806-7.894-3.369-11.28-4.036-8.853-10.091-15.836-18.164-20.947-8.073-5.11-17.09-7.666-27.05-7.666-14.454 0-26.368 4.818-35.743 14.454-9.375 9.635-14.062 21.875-14.062 36.718 0 14.844 4.687 27.084 14.062 36.72 9.375 9.634 21.29 14.452 35.742 14.452zM670.125 140V82.969c0-4.037 1.204-7.373 3.613-10.01 2.41-2.637 5.469-3.955 9.18-3.955 3.776 0 6.901 1.318 9.375 3.955s3.71 5.973 3.71 10.01V140h30.567V82.969c0-4.037 1.237-7.373 3.711-10.01 2.474-2.637 5.567-3.955 9.278-3.955 3.71 0 6.77 1.318 9.18 3.955 2.408 2.637 3.613 5.973 3.613 10.01V140h30.761V87.754c0-14.844-3.971-26.677-11.914-35.498-7.942-8.822-18.49-13.233-31.64-13.233-5.079 0-10.092 1.123-15.04 3.37-4.947 2.246-9.407 5.452-13.378 9.619-3.842-4.232-8.252-7.455-13.233-9.668-4.98-2.214-10.303-3.32-15.967-3.32-12.565 0-22.77 4.46-30.615 13.378-7.845 8.92-11.767 20.703-11.767 35.352V140h30.566z"></path></symbol><symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 22 22" id="theme"><circle cx="10" cy="10" r="8"></circle><circle cx="10" cy="10" r="6"></circle></symbol><symbol viewBox="0 0 597 146" xmlns="http://www.w3.org/2000/svg" id="twitter" preserveAspectRatio="xMidYMid meet"><path d="M56.16 144v-29.2H42c-3.841 0-6.527-.715-8.057-2.148-1.53-1.432-2.295-3.906-2.295-7.422V73.98H56.16V44.977H31.648v-24.22H.594v82.227c0 14.128 3.564 24.496 10.693 31.104 7.129 6.608 18.246 9.912 33.35 9.912H56.16zm115.625 1.758c12.63 0 22.852-4.427 30.664-13.281 7.813-8.855 11.719-20.606 11.719-35.254V44.977h-30.566v57.03c0 4.037-1.221 7.341-3.663 9.913-2.441 2.572-5.55 3.857-9.326 3.857-3.71 0-6.77-1.285-9.18-3.857-2.408-2.572-3.613-5.876-3.613-9.912V44.977h-30.76v57.03c0 4.037-1.205 7.341-3.614 9.913s-5.501 3.857-9.277 3.857c-3.711 0-6.803-1.285-9.277-3.857-2.474-2.572-3.711-5.876-3.711-9.912V44.977H70.613v52.246c0 14.843 3.972 26.644 11.914 35.4 7.943 8.757 18.49 13.135 31.641 13.135 5.143 0 10.156-1.107 15.039-3.32 4.883-2.214 9.277-5.372 13.184-9.473 3.776 4.167 8.186 7.34 13.232 9.521 5.046 2.181 10.433 3.272 16.162 3.272zm75.586-109.375c5.013 0 9.294-1.774 12.842-5.322 3.548-3.549 5.322-7.83 5.322-12.842 0-5.013-1.774-9.278-5.322-12.793C256.665 1.91 252.384.152 247.37.152c-5.013 0-9.294 1.758-12.842 5.274-3.548 3.515-5.322 7.78-5.322 12.793 0 5.013 1.774 9.293 5.322 12.842 3.548 3.548 7.83 5.322 12.842 5.322zM263.191 144V44.977h-31.64V144h31.64zm73.34 0v-29.2h-14.16c-3.841 0-6.527-.715-8.057-2.148-1.53-1.432-2.294-3.906-2.294-7.422V73.98h24.511V44.977H312.02v-24.22h-31.055v82.227c0 14.128 3.564 24.496 10.693 31.104 7.13 6.608 18.246 9.912 33.35 9.912h11.523zm70.41 0v-29.2h-14.16c-3.84 0-6.526-.715-8.056-2.148-1.53-1.432-2.295-3.906-2.295-7.422V73.98h24.511V44.977H382.43v-24.22h-31.055v82.227c0 14.128 3.564 24.496 10.693 31.104 7.13 6.608 18.246 9.912 33.35 9.912h11.523zm61.23 1.758c11.915 0 22.56-3.353 31.934-10.059 9.375-6.706 16.667-16.21 21.875-28.515l-23.632-11.426c-3.45 6.575-7.634 11.588-12.55 15.039-4.915 3.45-10.237 5.176-15.966 5.176-6.12 0-11.296-2.344-15.527-7.032-4.232-4.687-6.348-10.481-6.348-17.382 0-6.771 2.148-12.484 6.445-17.14 4.297-4.654 9.506-6.981 15.625-6.981 1.953 0 3.841.276 5.664.83 1.823.553 3.581 1.383 5.274 2.49l-25.977 18.066L467 106.988l47.95-32.617c-5.144-10.156-11.72-17.887-19.727-23.193-8.008-5.306-17.025-7.96-27.051-7.96-6.706 0-13.07 1.27-19.092 3.81-6.022 2.538-11.377 6.184-16.064 10.937-4.883 4.948-8.578 10.514-11.084 16.7-2.507 6.184-3.76 12.76-3.76 19.726 0 6.966 1.253 13.541 3.76 19.726 2.506 6.185 6.2 11.751 11.084 16.7 4.687 4.817 10.074 8.512 16.162 11.083 6.087 2.572 12.418 3.858 18.994 3.858zm95.02-1.758v-37.207c0-11.263 2.49-19.385 7.471-24.365 4.98-4.98 13.102-7.471 24.365-7.471h1.368v-29.98h-3.711c-7.683 0-13.998 1.188-18.946 3.564-4.948 2.376-8.984 6.136-12.11 11.28V44.976h-28.612V144h30.175z"></path></symbol></svg><div class="layout"><header class="header"><a class="logo header__logo" aria-label="Домой" href="/"><svg class="icon icon_logo" width="40" height="40" preserveAspectRatio="xMinYMax meet"><use xlink:href="#site-logo"></use></svg></a><ul class="tags-module--tags--512d6 tags-module--tags_header--f87a8 header__tags"><li><a href="/tags/tex/">TeX</a></li><li><a href="/tags/backend/">backend</a></li><li><a href="/tags/editors/">editors</a></li><li><a href="/tags/frontend/">frontend</a></li><li><a href="/tags/linux/">linux</a></li><li><a href="/tags/mobile/">mobile</a></li><li><a href="/tags/random/">random</a></li></ul><button type="button" class="header__tagsSwitcher" aria-label="Меню"><svg class="icon icon_menu"><use xlink:href="#menu"></use></svg></button><button type="button" class="theme-switcher-module--themeSwitcher--032b9" aria-label="Изменить тему"><svg class="icon icon_theme"><use xlink:href="#theme"></use></svg></button><div class="searchBlock "><form class="searchForm searchForm_hidden" action="#"><input class="searchForm__input" placeholder="Найти запись" aria-label="Поиск" value=""/></form><button type="button" class="searchForm__button " aria-label="Поиск"><svg class="icon icon_search"><use xlink:href="#search"></use></svg></button></div></header><main class="page"><article class="article"><header class="article__header"><div class="article__box"><h1 class="article__title">Великолепный Gatsby.js</h1><a class="article__tag" href="/tags/frontend/"><span>frontend</span></a><span class="article__date">16 апреля 2021</span></div><div class="article__image" style="background-image:url(
/static/b12d014c336c0cadb3242845fc5c8660/60650/gatsby.webp);background-color:#f8c8c8"></div></header><ul class="toc-module--list--5acce"><li class="toc-module--list__item--75273" style="margin-left:11px"><a href="#установка">Установка</a></li><li class="toc-module--list__item--75273" style="margin-left:11px"><a href="#graphql">Graphql</a></li><li class="toc-module--list__item--75273" style="margin-left:11px"><a href="#контент">Контент</a><ul class="toc-module--list__item--75273"><li class="toc-module--list__item--75273" style="margin-left:16px"><a href="#данные">Данные</a></li><li class="toc-module--list__item--75273" style="margin-left:16px"><a href="#инструменты">Инструменты</a></li><li class="toc-module--list__item--75273" style="margin-left:16px"><a href="#создание-страниц">Создание страниц</a></li><li class="toc-module--list__item--75273" style="margin-left:16px"><a href="#шаблон">Шаблон</a></li></ul></li><li class="toc-module--list__item--75273" style="margin-left:11px"><a href="#мультиязычность-и-seo">Мультиязычность и SEO</a></li><li class="toc-module--list__item--75273" style="margin-left:11px"><a href="#gatsby-ssr">gatsby-ssr</a></li><li class="toc-module--list__item--75273" style="margin-left:11px"><a href="#webpack">Webpack</a></li><li class="toc-module--list__item--75273" style="margin-left:11px"><a href="#картинки-вне-static">Картинки вне static</a></li><li class="toc-module--list__item--75273" style="margin-left:11px"><a href="#dark-mode">Dark mode</a></li><li class="toc-module--list__item--75273" style="margin-left:11px"><a href="#подсветка-кода">Подсветка кода</a></li><li class="toc-module--list__item--75273" style="margin-left:11px"><a href="#комментарии">Комментарии</a></li><li class="toc-module--list__item--75273" style="margin-left:11px"><a href="#mdx">MDX</a></li><li class="toc-module--list__item--75273" style="margin-left:11px"><a href="#публикация">Публикация</a></li><li class="toc-module--list__item--75273" style="margin-left:11px"><a href="#послесловие">Послесловие</a></li></ul><div class="page__content"><p>На выходных захотелось поэкспериментиро вать с блогом. Возможности vuepress исследованы.
Душа просит новизны. Под руку попался gatsby. Ну, что ж, попробуем сделать мультиязычный сайт
и поиграть с graphql, который поставляется как вариант по-умолчанию для передачи данных.</p>
<h2 id="установка" style="position:relative"><a href="#%D1%83%D1%81%D1%82%D0%B0%D0%BD%D0%BE%D0%B2%D0%BA%D0%B0" aria-label="установка permalink" class="anchor before"><span><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></span></a>Установка</h2>
<p>Любимый для подобных вещей <span><code class="language-text">npx</code></span> спешит на помощь. Выбираем минимальный starter-шаблон, чтобы
всё сделать по-своему с нуля. Используемая версия gatsby: 4.</p>
<span><div class="gatsby-highlight" data-language="shell"><pre class="language-shell"><code class="language-shell">$ npx gatsby new gatsby-blog https://github.com/gatsbyjs/gatsby-starter-hello-world
$ <span class="token builtin class-name">cd</span> gatsby-blog
$ <span class="token function">npm</span> run develop</code></pre></div></span>
<p>Файловая структура представлена ниже. Можно не воспроизводить её как есть, она лишь иллюстрирует
откуда берутся те или иные файлы и помогает ориентиров аться в дальнейших кусках кода.</p>
<span><div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">.
├── content
│   ├── en
│   │   └── frontend
│   └── ru
│       ├── frontend
│       └── backend
├── gatsby-browser.js
├── gatsby-config.js
├── gatsby-node.js
├── gatsby-ssr.js
├── src
│   ├── assets
│   │   ├── images
│   │   │   └── great.jpg
│   │   └── styles
│   │       └── base.css
│   ├── components
│   │   ├── layout.js
│   │   └── theme-switcher.js
│   ├── pages
│   │   ├── 404.js
│   │   └── index.js
│   ├── templates
│   │   └── post-template.js
│   └── translations
│       ├── en.json
│       ├── ru.json
│       └── index.js
└── static
    ├── favicon.ico
    ├── sitemap.xml
    └── robots.txt</code></pre></div></span>
<p>Из названий, в общем-то, всё понятно. Единственное, что стоило бы уточнить: данные
будут представлять собой <a href="https://daringfireball.net/projects/markdown/" target="_blank" rel="nofollow">markdown-файлы</a>.
Это наша база данных. Типичная для генератора статики, но не являющаяся единственным вариантом
в случае с gatsby.</p>
<h2 id="graphql" style="position:relative"><a href="#graphql" aria-label="graphql permalink" class="anchor before"><span><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></span></a>Graphql</h2>
<p>После получения копии gatsby, можно сразу же запустить его в режиме разработки и поиграть
с graphql. Чтобы получить что-то полезное, сначала надо это полезное написать. Хотя бы
задать глобальные данные для сайта. Сделать это можно в <span><code class="language-text">gatsby-config.js</code></span>.</p>
<span><div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token comment">// gatsby-config.js</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">siteMetadata</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">"Great gatsby multi-language blog"</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span></code></pre></div></span>
<p>Открыть браузер по адресу <a href="http://localhost:8000/___graphql" target="_blank" rel="nofollow">http://localhost:8000/___graphql</a> и написать запрос:</p>
<span><div class="gatsby-highlight" data-language="graphql"><pre class="language-graphql"><code class="language-graphql"><span class="token punctuation">{</span>
  <span class="token object">site</span> <span class="token punctuation">{</span>
    <span class="token object">siteMetadata</span> <span class="token punctuation">{</span>
      <span class="token property">title</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div></span>
<p>В файле конфигурации можно прописать названия и пути к каким-либо страницам и вывести
динамическое меню. Только помните: если запросы используются в компоненте, получайте их
через <span><code class="language-text">useStaticQuery</code></span>. Но обо всём по порядку.</p>
<p>Надеюсь, вы получили в ответ свой заголовок. Пора отправляться дальше.</p>
<h2 id="контент" style="position:relative"><a href="#%D0%BA%D0%BE%D0%BD%D1%82%D0%B5%D0%BD%D1%82" aria-label="контент permalink" class="anchor before"><span><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></span></a>Контент</h2>
<p>Главная вещь, ради кот орой мы тут собрались: данные. Этот раздел самый большой,
поэтому приготовьте чаю.</p>
<h3 id="данные" style="position:relative"><a href="#%D0%B4%D0%B0%D0%BD%D0%BD%D1%8B%D0%B5" aria-label="данные permalink" class="anchor before"><span><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></span></a>Данные</h3>
<p>Перво-наперво пишем заметочку. Лучше несколько.</p>
<p>По <span><code class="language-text">slug</code></span> определим путь к заметке. <span><code class="language-text">Category</code></span> для тех, кто хочет разбивать страницы по категориям.
Конечно, дата, в формате год-месяц-день. Остальное должно быть понятно.</p>
<span><div class="gatsby-highlight" data-language="markdown"><pre class="language-markdown"><code class="language-markdown"><span class="token comment">&lt;!--content/ru/frontend/gatsby/gatsby.mdx--></span>
<span class="token hr punctuation">---</span>
h1: Заголовок поста
title: Title для браузера
description: Описание для поисковых роботов
date: 2020-04-06
category: frontend
<span class="token title important">slug: gatsby
<span class="token punctuation">---</span></span>

Мой контент
<span class="token url"><span class="token operator">!</span>[<span class="token content">alt</span>](<span class="token url">./tree.jpg</span>)</span></code></pre></div></span>
<p>Структура директории в формате <span><code class="language-text">локаль -> категория -> запись</code></span>:</p>
<span><div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">.
├── content
│   ├── en
│   │   └── frontend
│   └── ru
│       ├── frontend
│       │   ├── gatsby
│       │   │   ├── gatsby.jpg
│       │   │   └── gatsby.mdx</code></pre></div></span>
<h3 id="инструменты" style="position:relative"><a href="#%D0%B8%D0%BD%D1%81%D1%82%D1%80%D1%83%D0%BC%D0%B5%D0%BD%D1%82%D1%8B" aria-label="инструменты permalink" class="anchor before"><span><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></span></a>Инструменты</h3>
<p>Установка пакетов для работы с форматом mdx (в отличие от обычного markdown эта штука позволит
использовать компоненты прямо в md-файлах. Ну не круто ли?).</p>
<span><div class="gatsby-highlight" data-language="shell"><pre class="language-shell"><code class="language-shell">$ <span class="token function">npm</span> i gatsby-plugin-mdx @mdx-js/mdx @mdx-js/react</code></pre></div></span>
<p>Пакет «расшаривания» директории, где лежит контент, чтобы его содержимое
было видно в graphql.</p>
<span><div class="gatsby-highlight" data-language="shell"><pre class="language-shell"><code class="language-shell">$ <span class="token function">npm</span> i gatsby-source-filesystem</code></pre></div></span>
<p>И пакеты, позволяющие запросто подключать картинки и хранить их не где-то в <span><code class="language-text">static</code></span>,
а рядом с файлом-заметкой.</p>
<span><div class="gatsby-highlight" data-language="shell"><pre class="language-shell"><code class="language-shell">$ <span class="token function">npm</span> i gatsby-plugin-sharp gatsby-remark-images</code></pre></div></span>
<p>Скормим их в файлу конфигурации:</p>
<span><div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token comment">// gatsby-config.js</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">"gatsby-plugin-sharp"</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token literal-property property">resolve</span><span class="token operator">:</span> <span class="token string">"gatsby-source-filesystem"</span><span class="token punctuation">,</span>
      <span class="token literal-property property">options</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">"content"</span><span class="token punctuation">,</span>
        <span class="token comment">// шарить директорию content</span>
        <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>__dirname<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/content/</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token literal-property property">resolve</span><span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">gatsby-plugin-mdx</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
      <span class="token literal-property property">options</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">extensions</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">.mdx</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">.md</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token literal-property property">gatsbyRemarkPlugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{</span>
            <span class="token literal-property property">resolve</span><span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">gatsby-remark-images</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
            <span class="token literal-property property">options</span><span class="token operator">:</span> <span class="token punctuation">{</span>
              <span class="token literal-property property">maxWidth</span><span class="token operator">:</span> <span class="token number">1200</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span></code></pre></div></span>
<p>Данные подготовлены, пакеты установлены. Дальше следует выяснить как работает механизм
передачи данных. Для каждого markdown-файла создаётся страница (<span><code class="language-text">gatsby-node.js</code></span>).
Страница должна иметь шаблон (<span><code class="language-text">post-template.js</code></span>). В шаблоне можно вывести что угодно.</p>
<p>Поехали.</p>
<h3 id="создание-страниц" style="position:relative"><a href="#%D1%81%D0%BE%D0%B7%D0%B4%D0%B0%D0%BD%D0%B8%D0%B5-%D1%81%D1%82%D1%80%D0%B0%D0%BD%D0%B8%D1%86" aria-label="создание страниц permalink" class="anchor before"><span><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></span></a>Создание страниц</h3>
<span><div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token comment">// gatsby-node.js</span>
<span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"path"</span><span class="token punctuation">)</span>

<span class="token comment">// createPages даёт доступ к graphql и некоторым методам gatsby (actions)</span>
exports<span class="token punctuation">.</span><span class="token function-variable function">createPages</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> actions<span class="token punctuation">,</span> graphql <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> createPage <span class="token punctuation">}</span> <span class="token operator">=</span> actions

  <span class="token comment">// получить все markdown-записи</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">allMdx</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">edges</span><span class="token operator">:</span> posts <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">graphql</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
    {
      allMdx {
        edges {
          node {
            frontmatter {
              slug
              category
            }
          }
        }
      }
    }
  </span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>

  <span class="token comment">// для каждой записи создать страницу</span>
  posts<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> node <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> slug<span class="token punctuation">,</span> category <span class="token punctuation">}</span> <span class="token operator">=</span> node<span class="token punctuation">.</span>frontmatter
    <span class="token keyword">return</span> <span class="token function">createPage</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token comment">// путь к странице</span>
      <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>category<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>slug<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
      <span class="token comment">// шаблон страницы</span>
      <span class="token literal-property property">component</span><span class="token operator">:</span> require<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">"./src/templates/post-template.js"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token comment">// контекст, который попадёт в шаблон</span>
      <span class="token comment">// может быть использован для дальнейших манипуляций с данными</span>
      <span class="token literal-property property">context</span><span class="token operator">:</span> <span class="token punctuation">{</span> slug <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span></code></pre></div></span>
<h3 id="шаблон" style="position:relative"><a href="#%D1%88%D0%B0%D0%B1%D0%BB%D0%BE%D0%BD" aria-label="шаблон permalink" class="anchor before"><span><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></span></a>Шаблон</h3>
<p>В шаблоне запрашиваем любые данные.</p>
<span><div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token comment">// src/templates/post-template.js</span>

<span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">"react"</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> graphql <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"gatsby"</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> MDXRenderer <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"gatsby-plugin-mdx"</span>

<span class="token comment">// динамический slug берётся из переданного на этапе создания страниц контекста</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> query <span class="token operator">=</span> graphql<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
  query getPost($slug: String!) {
    mdx(frontmatter: { slug: { eq: $slug } }) {
      body
      frontmatter {
        h1
        slug
      }
    }
  }
</span><span class="token template-punctuation string">`</span></span>
<span class="token comment">// Отобразить контент помогает MDXRenderer</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">PostTemplate</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> data <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> h1 <span class="token punctuation">}</span> <span class="token operator">=</span> data<span class="token punctuation">.</span>mdx<span class="token punctuation">.</span>frontmatter
  <span class="token keyword">const</span> <span class="token punctuation">{</span> body <span class="token punctuation">}</span> <span class="token operator">=</span> data<span class="token punctuation">.</span>mdx

  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>main</span><span class="token punctuation">></span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">></span></span><span class="token punctuation">{</span>h1<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">></span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">MDXRenderer</span></span><span class="token punctuation">></span></span><span class="token punctuation">{</span>body<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">MDXRenderer</span></span><span class="token punctuation">></span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>main</span><span class="token punctuation">></span></span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span></code></pre></div></span>
<p>Всё! Новую запись можно увидеть по адресу <span><code class="language-text">http://localhost:8000/frontend/gatsby/</code></span>.
Это был самый трудоёмкий этап. Дальше можно вывести все записи на главной и перейти к пунктам
более простым и не менее полезным.</p>
<p>Записи на главной:</p>
<span><div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token comment">// pages/index.js</span>
<span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">"react"</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> graphql<span class="token punctuation">,</span> useStaticQuery<span class="token punctuation">,</span> Link <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"gatsby"</span>

<span class="token comment">// получить все записи, отсортированные по дате</span>
<span class="token keyword">const</span> getPosts <span class="token operator">=</span> graphql<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
  query allPosts {
    allMdx(sort: { frontmatter: {date: DESC} }) {
      edges {
        node {
          frontmatter {
            h1
            slug
            category
            date(formatString: "MMMM Do, YYYY")
          }
        }
      }
    }
  }
</span><span class="token template-punctuation string">`</span></span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">HomePage</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> response <span class="token operator">=</span> <span class="token function">useStaticQuery</span><span class="token punctuation">(</span>getPosts<span class="token punctuation">)</span>
  <span class="token keyword">const</span> posts <span class="token operator">=</span> response<span class="token punctuation">.</span>allMdx<span class="token punctuation">.</span>edges

  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>main</span><span class="token punctuation">></span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">></span></span><span class="token plain-text">Posts</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">></span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">></span></span><span class="token plain-text">
        </span><span class="token punctuation">{</span>posts<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> <span class="token literal-property property">node</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">frontmatter</span><span class="token operator">:</span> post <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> index</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">key</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>index<span class="token punctuation">}</span></span><span class="token punctuation">></span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span><span class="token punctuation">></span></span><span class="token punctuation">{</span>post<span class="token punctuation">.</span>date<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span><span class="token punctuation">/></span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Link</span></span> <span class="token attr-name">to</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>post<span class="token punctuation">.</span>category<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>post<span class="token punctuation">.</span>slug<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">}</span></span><span class="token punctuation">></span></span><span class="token punctuation">{</span>post<span class="token punctuation">.</span>h1<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Link</span></span><span class="token punctuation">></span></span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span>
        <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">></span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>main</span><span class="token punctuation">></span></span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span></code></pre></div></span>
<p>Объект <span><code class="language-text">posts</code></span> можно фильтровать и сортировать как захочется прямо здесь. На производительность
это не повлияет. После сборки останется статичная страница с преобразованными заранее данными.</p>
<h2 id="мультиязычность-и-seo" style="position:relative"><a href="#%D0%BC%D1%83%D0%BB%D1%8C%D1%82%D0%B8%D1%8F%D0%B7%D1%8B%D1%87%D0%BD%D0%BE%D1%81%D1%82%D1%8C-%D0%B8-seo" aria-label="мультиязычность и seo permalink" class="anchor before"><span><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></span></a>Мультиязычность и SEO</h2>
<p>На мой взгляд хорошим подспорьем для переводов в обычных javascript-файлах,
таких как страницы (pages), может быть пакет <span><code class="language-text">react-intl</code></span>. Однако, есть одна проблема:
для gatsby его метод <span><code class="language-text">injectIntl</code></span> работать не будет: не предусмотрен для использования
в этом окружении. Но не беда, есть обёртка над <span><code class="language-text">react-intl</code></span>, её и установим.</p>
<span><div class="gatsby-highlight" data-language="shell"><pre class="language-shell"><code class="language-shell">$ <span class="token function">npm</span> i gatsby-plugin-intl</code></pre></div></span>
<p>Файл конфигурации принимает следующий вид:</p>
<span><div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token comment">// gatsby-config.js</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token comment">// ...</span>
    <span class="token punctuation">{</span>
      <span class="token literal-property property">resolve</span><span class="token operator">:</span> <span class="token string">"gatsby-plugin-intl"</span><span class="token punctuation">,</span>
      <span class="token literal-property property">options</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>__dirname<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/src/translations</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
        <span class="token literal-property property">languages</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"en"</span><span class="token punctuation">,</span> <span class="token string">"ru"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token literal-property property">defaultLanguage</span><span class="token operator">:</span> <span class="token string">"ru"</span><span class="token punctuation">,</span>
        <span class="token comment">// автоматически перенаправлять на `/ru` или `/en` когда человек на главной `/`</span>
        <span class="token comment">// имейте ввиду: у Google Chrome всегда стоит `en-US`! экспериментируйте</span>
        <span class="token literal-property property">redirect</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span></code></pre></div></span>
<p>Создайте файлы с языковыми переводами, если не сделали этого раньше.</p>
<span><div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">src
└── translations
    ├── en.json
    ├── ru.json
    └── index.js</code></pre></div></span>
<p>Переводы не должны иметь вложенность. Только flat. Это ограничение <span><code class="language-text">react-intl</code></span>.
Оно, конечно, обходится, но не станем заострять на этом внимание сейчас.</p>
<span><div class="gatsby-highlight" data-language="json"><pre class="language-json"><code class="language-json"><span class="token comment">// src/translations/en.json</span>
<span class="token punctuation">{</span>
  <span class="token property">"home.h1"</span><span class="token operator">:</span> <span class="token string">"Hello, welcome {user}"</span><span class="token punctuation">,</span>
  <span class="token property">"home.title"</span><span class="token operator">:</span> <span class="token string">"Home title"</span><span class="token punctuation">,</span>
  <span class="token property">"home.description"</span><span class="token operator">:</span> <span class="token string">"Home description"</span>
<span class="token punctuation">}</span></code></pre></div></span>
<p>Предпочитаю брать их все из одного места. Так удобнее.</p>
<span><div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token comment">// src/translations/index.js</span>
<span class="token keyword">import</span> locale_en <span class="token keyword">from</span> <span class="token string">"./en.json"</span>
<span class="token keyword">import</span> locale_ru <span class="token keyword">from</span> <span class="token string">"./ru.json"</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">en</span><span class="token operator">:</span> locale_en<span class="token punctuation">,</span>
  <span class="token literal-property property">ru</span><span class="token operator">:</span> locale_ru<span class="token punctuation">,</span>
<span class="token punctuation">}</span></code></pre></div></span>
<p>В markdown-файлы добавить информацию о языке, это очень важные данные!</p>
<span><div class="gatsby-highlight" data-language="markdown"><pre class="language-markdown"><code class="language-markdown"><span class="token comment">&lt;!--content/ru/frontend/gatsby/gatsby.mdx--></span>
<span class="token hr punctuation">---</span>
h1: Заголовок поста
lang: ru

<span class="token comment">&lt;!--content/en/frontend/gatsby/gatsby.mdx--></span>
<span class="token hr punctuation">---</span>
h1: Post heading
lang: en</code></pre></div></span>
<p>Поскольку контентные страницы создаём самостоятельно, передавать контекст тоже надо самостоятельно.</p>
<span><div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token comment">// gatsby-node.js</span>
exports<span class="token punctuation">.</span><span class="token function-variable function">createPages</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> actions<span class="token punctuation">,</span> graphql <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token comment">// запрос тот же, только lang добавить</span>
  <span class="token comment">// ...</span>
  frontmatter <span class="token punctuation">{</span>
    lang
    slug
    category
  <span class="token punctuation">}</span>
  <span class="token comment">// ...</span>

  <span class="token comment">// создать отдельные страницы для разных языков</span>
  posts<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> node <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> lang<span class="token punctuation">,</span> slug<span class="token punctuation">,</span> category <span class="token punctuation">}</span> <span class="token operator">=</span> node<span class="token punctuation">.</span>frontmatter
    <span class="token keyword">return</span> <span class="token function">createPage</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>lang<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>category<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>slug<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
      <span class="token literal-property property">component</span><span class="token operator">:</span> require<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">"./src/templates/post-template.js"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token literal-property property">context</span><span class="token operator">:</span> <span class="token punctuation">{</span> lang<span class="token punctuation">,</span> slug <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span></code></pre></div></span>
<p>И <span><code class="language-text">lang</code></span> в шаблон, конечно, прокинуть. Надо же теперь распределять весь контент
по языковой принадлежности! Заодно правильно отформатируем даты для текущего языка.</p>
<span><div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token comment">// src/templates/post-template.js</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> query <span class="token operator">=</span> graphql<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
  query getPost($slug: String!, $lang: String!) {
    mdx(frontmatter: { slug: { eq: $slug }, lang: { eq: $lang } }) {
      body
      frontmatter {
        h1
        date(formatString: "MMMM Do, YYYY", locale: $lang)
      }
    }
  }
</span><span class="token template-punctuation string">`</span></span></code></pre></div></span>
<p>Страницы в <span><code class="language-text">page</code></span> после установки плагина обзавелись новой переменной контекста — <span><code class="language-text">language</code></span>.
Теперь для каждой из них можно получить язык, установленный в браузере посетителя.
Фильтровать по этому признаку записи или добавлять seo-заголовки. Попробуем.</p>
<span><div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token comment">// src/pages/index.js</span>
<span class="token comment">// ... добавить в запрос lang</span>
frontmatter <span class="token punctuation">{</span>
  lang
  h1
  slug
  category
<span class="token punctuation">}</span>
<span class="token comment">// ...</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">HomePage</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> <span class="token literal-property property">pageContext</span><span class="token operator">:</span> <span class="token punctuation">{</span> language <span class="token punctuation">}</span> <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> response <span class="token operator">=</span> <span class="token function">useStaticQuery</span><span class="token punctuation">(</span>getPosts<span class="token punctuation">)</span>
  <span class="token comment">// только записи с актуальной локалью</span>
  <span class="token keyword">const</span> posts <span class="token operator">=</span> response<span class="token punctuation">.</span>allMdx<span class="token punctuation">.</span>edges<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>
    <span class="token parameter">post</span> <span class="token operator">=></span> post<span class="token punctuation">.</span>node<span class="token punctuation">.</span>frontmatter<span class="token punctuation">.</span>lang <span class="token operator">===</span> language
  <span class="token punctuation">)</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>main</span><span class="token punctuation">></span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">></span></span><span class="token plain-text">
        </span><span class="token punctuation">{</span>posts<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> <span class="token literal-property property">node</span><span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token literal-property property">frontmatter</span><span class="token operator">:</span> post <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> index</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span>
          <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">key</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>index<span class="token punctuation">}</span></span><span class="token punctuation">></span></span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Link</span></span> <span class="token attr-name">to</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>post<span class="token punctuation">.</span>lang<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>post<span class="token punctuation">.</span>category<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>post<span class="token punctuation">.</span>slug<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">}</span></span><span class="token punctuation">></span></span><span class="token plain-text">
              </span><span class="token punctuation">{</span>post<span class="token punctuation">.</span>h1<span class="token punctuation">}</span><span class="token plain-text">
            </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Link</span></span><span class="token punctuation">></span></span><span class="token plain-text">
          </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span>
        <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">></span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>main</span><span class="token punctuation">></span></span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span></code></pre></div></span>
<p>Осталось разобраться с локализацией самих js-страниц. На сцену снова выходит <span><code class="language-text">react-intl</code></span>.</p>
<p>Конечно, захочется правильно устанавливать html-атрибут <span><code class="language-text">lang</code></span> и писать в <span><code class="language-text">head</code></span> всякие
красивые мета-данные для поисковых роботов. В этом поможет <span><code class="language-text">layout.js</code></span>, куда будем складывать всё
это добро. Ставим <span><code class="language-text">react-helmet</code></span> и <span><code class="language-text">gatsby-plugin-react-helmet</code></span>:</p>
<span><div class="gatsby-highlight" data-language="shell"><pre class="language-shell"><code class="language-shell">$ <span class="token function">npm</span> i react-helmet gatsby-plugin-react-helmet</code></pre></div></span>
<p>В <span><code class="language-text">gatsby.config.js</code></span> добавляем последний. Так мета-теги будут учитываться при генерации статики.</p>
<span><div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token comment">// gatsby.config.js</span>
<span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
  <span class="token string">'gatsby-plugin-react-helmet'</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span></code></pre></div></span>
<p>Чтобы не страдать с импортом относительных путей, докрутим webpack.</p>
<span><div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token comment">// gatsby-node.js</span>
exports<span class="token punctuation">.</span><span class="token function-variable function">onCreateWebpackConfig</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> actions <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  actions<span class="token punctuation">.</span><span class="token function">setWebpackConfig</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token literal-property property">resolve</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">modules</span><span class="token operator">:</span> <span class="token punctuation">[</span>path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">"src"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">"node_modules"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span></code></pre></div></span>
<p>Дописываем в <span><code class="language-text">gatsby-config.js</code></span> глобальные title и description. Или не дописываем, а передаём
с конкретной страницы. Тогда и graphql-запрос не нужен. В общем, идём делать SEO.</p>
<span><div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token comment">// components/layout.js</span>
<span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">"react"</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Helmet <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"react-helmet"</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> useStaticQuery<span class="token punctuation">,</span> graphql <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"gatsby"</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">Layout</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  lang <span class="token operator">=</span> <span class="token string">"ru"</span><span class="token punctuation">,</span>
  title <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">,</span>
  description <span class="token operator">=</span> <span class="token string">""</span><span class="token punctuation">,</span>
  children<span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> site <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">useStaticQuery</span><span class="token punctuation">(</span>
    graphql<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
      query {
        site {
          siteMetadata {
            title
            description
          }
        }
      }
    </span><span class="token template-punctuation string">`</span></span>
  <span class="token punctuation">)</span>
  <span class="token keyword">const</span> metaDescription <span class="token operator">=</span> description <span class="token operator">||</span> site<span class="token punctuation">.</span>siteMetadata<span class="token punctuation">.</span>description

  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span></span><span class="token punctuation">></span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Helmet</span></span>
        <span class="token attr-name">htmlAttributes</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> lang <span class="token punctuation">}</span><span class="token punctuation">}</span></span>
        <span class="token attr-name">title</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>title<span class="token punctuation">}</span></span>
        <span class="token attr-name">titleTemplate</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">%s | </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>site<span class="token punctuation">.</span>siteMetadata<span class="token punctuation">.</span>title<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">}</span></span>
        <span class="token attr-name">meta</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">[</span>
          <span class="token comment">// по желанию добавить Open Graph для социальных сетей</span>
          <span class="token punctuation">{</span> <span class="token literal-property property">name</span><span class="token operator">:</span> <span class="token string">"description"</span><span class="token punctuation">,</span> <span class="token literal-property property">content</span><span class="token operator">:</span> metaDescription <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span><span class="token punctuation">}</span></span>
      <span class="token punctuation">/></span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>main</span><span class="token punctuation">></span></span><span class="token punctuation">{</span>children<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>main</span><span class="token punctuation">></span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span></span><span class="token punctuation">></span></span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span></code></pre></div></span>
<p>Допустим, <span><code class="language-text">pages/index.js</code></span> пуст (если нет, создаём любой другой, к примеру <span><code class="language-text">about.js</code></span>).</p>
<span><div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token comment">// pages/index.js</span>
<span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">"react"</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>
  useIntl<span class="token punctuation">,</span>
  FormattedDate<span class="token punctuation">,</span>
  FormattedMessage<span class="token punctuation">,</span>
  FormattedNumber<span class="token punctuation">,</span>
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"gatsby-plugin-intl"</span>
<span class="token keyword">import</span> Layout <span class="token keyword">from</span> <span class="token string">"components/layout"</span>

<span class="token comment">// получить language из контекста и вывести:</span>
<span class="token comment">// правильно отформатированные дату, число и валюту, да просто переменную в тексте</span>
<span class="token comment">// красота!</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">HomePage</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> <span class="token literal-property property">pageContext</span><span class="token operator">:</span> <span class="token punctuation">{</span> language <span class="token punctuation">}</span> <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> intl <span class="token operator">=</span> <span class="token function">useIntl</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Layout</span></span>
      <span class="token attr-name">lang</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>language<span class="token punctuation">}</span></span>
      <span class="token attr-name">title</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>intl<span class="token punctuation">.</span><span class="token function">formatMessage</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token string">"home.title"</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span>
      <span class="token attr-name">description</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>intl<span class="token punctuation">.</span><span class="token function">formatMessage</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">id</span><span class="token operator">:</span> <span class="token string">"home.description"</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span>
    <span class="token punctuation">></span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">FormattedDate</span></span> <span class="token attr-name">value</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span> <span class="token punctuation">/></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span> <span class="token punctuation">/></span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">FormattedNumber</span></span> <span class="token attr-name">value</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token number">12000</span><span class="token punctuation">}</span></span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css">currency</span><span class="token punctuation">"</span></span></span> <span class="token attr-name">currency</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>USD<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>br</span> <span class="token punctuation">/></span></span><span class="token plain-text">
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">FormattedMessage</span></span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>home.h1<span class="token punctuation">"</span></span> <span class="token attr-name">values</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> <span class="token literal-property property">user</span><span class="token operator">:</span> <span class="token string">"Jack"</span> <span class="token punctuation">}</span><span class="token punctuation">}</span></span> <span class="token punctuation">/></span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Layout</span></span><span class="token punctuation">></span></span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span></code></pre></div></span>
<p>На этом вопросы мультиязычности и SEO считаю закрытыми.</p>
<h2 id="gatsby-ssr" style="position:relative"><a href="#gatsby-ssr" aria-label="gatsby ssr permalink" class="anchor before"><span><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></span></a>gatsby-ssr</h2>
<p>Надо бы затронуть и этот файл тоже. Но для чего? Gatsby встраивает инлайновые стили на страницу.
Не всем это придётся по вкусу по той причине, что такие стили по-умолчанию не кэшируются.
Это поведение меняется здесь. На любителя.</p>
<span><div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token comment">// gatsby-ssr.js</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">onPreRenderHTML</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> getHeadComponents<span class="token punctuation">,</span> replaceHeadComponents <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token comment">// для разработки оставить inline css</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span> <span class="token operator">!==</span> <span class="token string">"production"</span><span class="token punctuation">)</span> <span class="token keyword">return</span>

  <span class="token keyword">const</span> headComponents <span class="token operator">=</span> <span class="token function">getHeadComponents</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

  headComponents<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">el</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token comment">// для итоговой сборки сделать отдельный css-файл</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>el<span class="token punctuation">.</span>type <span class="token operator">===</span> <span class="token string">"style"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      el<span class="token punctuation">.</span>type <span class="token operator">=</span> <span class="token string">"link"</span>
      el<span class="token punctuation">.</span>props<span class="token punctuation">[</span><span class="token string">"href"</span><span class="token punctuation">]</span> <span class="token operator">=</span> el<span class="token punctuation">.</span>props<span class="token punctuation">[</span><span class="token string">"data-href"</span><span class="token punctuation">]</span>
      el<span class="token punctuation">.</span>props<span class="token punctuation">[</span><span class="token string">"rel"</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">"stylesheet"</span>
      el<span class="token punctuation">.</span>props<span class="token punctuation">[</span><span class="token string">"type"</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">"text/css"</span>

      <span class="token keyword">delete</span> el<span class="token punctuation">.</span>props<span class="token punctuation">[</span><span class="token string">"data-href"</span><span class="token punctuation">]</span>
      <span class="token keyword">delete</span> el<span class="token punctuation">.</span>props<span class="token punctuation">[</span><span class="token string">"dangerouslySetInnerHTML"</span><span class="token punctuation">]</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

  <span class="token function">replaceHeadComponents</span><span class="token punctuation">(</span>headComponents<span class="token punctuation">)</span>
<span class="token punctuation">}</span></code></pre></div></span>
<h2 id="webpack" style="position:relative"><a href="#webpack" aria-label="webpack permalink" class="anchor before"><span><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></span></a>Webpack</h2>
<p>Небольшой пример тюнинга конфигурации webpack был рассмотрен в предыдущем разделе.</p>
<span><div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token comment">// gatsby-node.js</span>
exports<span class="token punctuation">.</span><span class="token function-variable function">onCreateWebpackConfig</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> getConfig<span class="token punctuation">,</span> actions<span class="token punctuation">,</span> plugins <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  actions<span class="token punctuation">.</span><span class="token function">setWebpackConfig</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token comment">// отключить  source-map в итоговой сборке</span>
    <span class="token literal-property property">devtool</span><span class="token operator">:</span> <span class="token function">getConfig</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>mode <span class="token operator">===</span> <span class="token string">"production"</span> <span class="token operator">?</span> <span class="token boolean">false</span> <span class="token operator">:</span> <span class="token string">"source-map"</span><span class="token punctuation">,</span>
    <span class="token literal-property property">resolve</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">modules</span><span class="token operator">:</span> <span class="token punctuation">[</span>path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">"src"</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">"node_modules"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// по желанию вырубить react-dev-tools</span>
    <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      plugins<span class="token punctuation">.</span><span class="token function">define</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        <span class="token string-property property">'__REACT_DEVTOOLS_GLOBAL_HOOK__'</span><span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">({ isDisabled: true })</span><span class="token template-punctuation string">`</span></span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span></code></pre></div></span>
<p>Здесь упомяну лишь о том, как ставить свои плагины. На самом деле нет ничего проще.
Ставим что хотим + обязательно <span><code class="language-text">babel-preset-gatsby</code></span>.</p>
<span><div class="gatsby-highlight" data-language="shell"><pre class="language-shell"><code class="language-shell">$ <span class="token function">npm</span> i --save-dev babel-preset-gatsby @babel/plugin-proposal-optional-chaining</code></pre></div></span>
<p>Создаём свой <span><code class="language-text">.babelrc</code></span> в корне проекта.</p>
<span><div class="gatsby-highlight" data-language="json"><pre class="language-json"><code class="language-json"><span class="token punctuation">{</span>
  <span class="token property">"plugins"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token string">"@babel/plugin-proposal-optional-chaining"</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">"presets"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">[</span>
      <span class="token string">"babel-preset-gatsby"</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        <span class="token property">"targets"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token property">"browsers"</span><span class="token operator">:</span> <span class="token punctuation">[</span>
            <span class="token string">">0.5%"</span><span class="token punctuation">,</span>
            <span class="token string">"not dead"</span>
          <span class="token punctuation">]</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span></code></pre></div></span>
<p>Всё. Уже можно использовать <span><code class="language-text">plugin-proposal-optional-chaining</code></span>.</p>
<h2 id="картинки-вне-static" style="position:relative"><a href="#%D0%BA%D0%B0%D1%80%D1%82%D0%B8%D0%BD%D0%BA%D0%B8-%D0%B2%D0%BD%D0%B5-static" aria-label="картинки вне static permalink" class="anchor before"><span><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></span></a>Картинки вне static</h2>
<p>Импорт картинок, лежащих не глобально в <span><code class="language-text">static</code></span>, а где-нибудь в <span><code class="language-text">src/assets</code></span>, можно произвести
следующим образом:</p>
<span><div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token comment">// src/pages/index.js</span>
<span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">"react"</span>
<span class="token keyword">import</span> image <span class="token keyword">from</span> <span class="token string">"assets/images/great.jpg"</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">HomePage</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>main</span><span class="token punctuation">></span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>img</span> <span class="token attr-name">src</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>image<span class="token punctuation">}</span></span> <span class="token attr-name">alt</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Great Gatsby<span class="token punctuation">"</span></span> <span class="token attr-name">width</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token number">375</span><span class="token punctuation">}</span></span> <span class="token attr-name">height</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>auto<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>main</span><span class="token punctuation">></span></span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span></code></pre></div></span>
<h2 id="dark-mode" style="position:relative"><a href="#dark-mode" aria-label="dark mode permalink" class="anchor before"><span><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></span></a>Dark mode</h2>
<p>В мобильных приложениях появился dark mode. Осмелюсь доложить, штука неплохая. Вечерами спасает глаза.
Те, кто хочет завести себе PWA и быть ближе к нативным мобильным, явно захотят и эту фичу.
Что ж, сделаем!</p>
<p>Я опишу сложный вариант, чтобы продемонстрировать работу с <span><code class="language-text">gatsby-browser.js</code></span>.
Можно проще: менять класс у <span><code class="language-text">html</code></span> или <span><code class="language-text">body</code></span> (рабоать это будет, конечно, до перезагрузки страницы).</p>
<p>Понадобятся стили, общие для всех страниц для объявления в них css-переменных. В примере
динамически меняться будут только фон и текст страницы.</p>
<span><div class="gatsby-highlight" data-language="css"><pre class="language-css"><code class="language-css"><span class="token comment">/* assets/styles/base.css */</span>
<span class="token selector">:root</span> <span class="token punctuation">{</span>
  <span class="token property">--textColor</span><span class="token punctuation">:</span> #3f3f3f<span class="token punctuation">;</span>
  <span class="token property">--bgColor</span><span class="token punctuation">:</span> #fafafa<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">[data-theme="dark"]</span> <span class="token punctuation">{</span>
  <span class="token property">--textColor</span><span class="token punctuation">:</span> #d9d7e0<span class="token punctuation">;</span>
  <span class="token property">--bgColor</span><span class="token punctuation">:</span> #232129<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">body</span> <span class="token punctuation">{</span>
  <span class="token property">background-color</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--bgColor<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token property">color</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--textColor<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre></div></span>
<p>Идём на сторону клиента. Код в <span><code class="language-text">onClientEntry</code></span> отрабатывает только один раз когда посетитель зашёл
на страницу.</p>
<span><div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token comment">// gatsby-browser.js</span>
<span class="token comment">// подключаем глобальные стили</span>
<span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"./src/assets/styles/base.css"</span><span class="token punctuation">)</span>

exports<span class="token punctuation">.</span><span class="token function-variable function">onClientEntry</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token function">enableTheme</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// Если тема не установлена, применить тему по-умолчанию.</span>
<span class="token comment">// Если установлена пользователем, сохранить его выбор в localStorage,</span>
<span class="token comment">// чтобы не заставлять человека выбирать её снова и снова при переходе на другие страницы</span>
<span class="token keyword">function</span> <span class="token function">enableTheme</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> root <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementsByTagName</span><span class="token punctuation">(</span><span class="token string">"body"</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
  <span class="token keyword">try</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> uiTheme <span class="token operator">=</span> localStorage<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span><span class="token string">"theme-ui-color-mode"</span><span class="token punctuation">)</span>
    <span class="token keyword">const</span> theme <span class="token operator">=</span> uiTheme <span class="token operator">?</span> uiTheme <span class="token operator">:</span> <span class="token string">"light"</span>
    <span class="token comment">// выставить data-атрибут темы для элемента body</span>
    root<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"data-theme"</span><span class="token punctuation">,</span> theme<span class="token punctuation">)</span>
  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">'localStorage error'</span><span class="token punctuation">,</span> error<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div></span>
<p>Неплохо бы сделать переключатель, чтобы пользователь сам мог менять оформление.</p>
<span><div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token comment">// src/components/theme-switcher.js</span>
<span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">"react"</span>

<span class="token keyword">const</span> <span class="token function-variable function">onThemeToggle</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token comment">// получить тему из data-theme</span>
  <span class="token keyword">const</span> root <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementsByTagName</span><span class="token punctuation">(</span><span class="token string">"body"</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
  <span class="token keyword">const</span> theme <span class="token operator">=</span> root<span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">"data-theme"</span><span class="token punctuation">)</span>

  <span class="token comment">// изменить атрибут</span>
  <span class="token comment">// если была светлая тема, поставить тёмную и наоборот</span>
  <span class="token keyword">const</span> uiTheme <span class="token operator">=</span> theme <span class="token operator">===</span> <span class="token string">"dark"</span> <span class="token operator">?</span> <span class="token string">"light"</span> <span class="token operator">:</span> <span class="token string">"dark"</span>

  <span class="token keyword">try</span> <span class="token punctuation">{</span>
    root<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"data-theme"</span><span class="token punctuation">,</span> uiTheme<span class="token punctuation">)</span>
    <span class="token comment">// запомнить выбор</span>
    localStorage<span class="token punctuation">.</span><span class="token function">setItem</span><span class="token punctuation">(</span><span class="token string">"theme-ui-color-mode"</span><span class="token punctuation">,</span> uiTheme<span class="token punctuation">)</span>
  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token boolean">false</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">ThemeSwitcher</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>onThemeToggle<span class="token punctuation">}</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>button<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token plain-text">
      Change Theme
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span></code></pre></div></span>
<p>Ну, и подключить компонент-switcher куда-нибудь на страницу или в другой компонент:
в шапку сайта, например.</p>
<span><div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token comment">// src/pages/index.js</span>
<span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">"react"</span>
<span class="token keyword">import</span> Layout <span class="token keyword">from</span> <span class="token string">"components/layout"</span>
<span class="token keyword">import</span> ThemeSwitcher <span class="token keyword">from</span> <span class="token string">"components/theme-switcher"</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">HomePage</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> <span class="token literal-property property">pageContext</span><span class="token operator">:</span> <span class="token punctuation">{</span> language <span class="token punctuation">}</span> <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Layout</span></span> <span class="token attr-name">lang</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>language<span class="token punctuation">}</span></span><span class="token punctuation">></span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">ThemeSwitcher</span></span> <span class="token punctuation">/></span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">></span></span><span class="token plain-text">Home</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">></span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">Layout</span></span><span class="token punctuation">></span></span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span></code></pre></div></span>
<p>Проверяем, кликаем.</p>
<p>Если хочется менять тему в зависимости от времени суток, лучший вариант <a href="https://developer.mozilla.org/ru/docs/Web/CSS/@media/prefers-color-scheme" target="_blank" rel="nofollow">prefers-color-scheme</a>. Тогда приведённый выше код даже писать
не придётся.</p>
<h2 id="подсветка-кода" style="position:relative"><a href="#%D0%BF%D0%BE%D0%B4%D1%81%D0%B2%D0%B5%D1%82%D0%BA%D0%B0-%D0%BA%D0%BE%D0%B4%D0%B0" aria-label="подсветка кода permalink" class="anchor before"><span><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></span></a>Подсветка кода</h2>
<p>Когда вы пишете в своих заметках тонны кода как это делаю я, подсветка жизненно необходима.
Для gatsby есть два варианта: prism.js или highlight.js. Возьмём первый.</p>
<span><div class="gatsby-highlight" data-language="shell"><pre class="language-shell"><code class="language-shell">$ <span class="token function">npm</span> i prismjs gatsby-remark-prismjs</code></pre></div></span>
<p>Настроек у пакета достаточно. Не вижу смысла описывать их все здесь, лучше увидеть
<a href="https://www.gatsbyjs.com/packages/gatsby-remark-prismjs/" target="_blank" rel="nofollow">полную картину</a>.</p>
<p>Ограничимся минимумом. Надо сказать <span><code class="language-text">gatsby-plugin-mdx</code></span>, чтобы он применил <span><code class="language-text">prism.js</code></span>.</p>
<span><div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token comment">// gatsby-config.js</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token comment">// ...</span>
    <span class="token punctuation">{</span>
      <span class="token literal-property property">resolve</span><span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">gatsby-plugin-mdx</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
      <span class="token literal-property property">options</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">gatsbyRemarkPlugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token punctuation">{</span>
            <span class="token literal-property property">resolve</span><span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">gatsby-remark-prismjs</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
            <span class="token literal-property property">options</span><span class="token operator">:</span> <span class="token punctuation">{</span>
              <span class="token literal-property property">classPrefix</span><span class="token operator">:</span> <span class="token string">"language-"</span><span class="token punctuation">,</span>
              <span class="token literal-property property">inlineCodeMarker</span><span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span></code></pre></div></span>
<p>Не забыть подключить стили подсветки. Можно глобально, а можно только на страницах записей.</p>
<span><div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token comment">// gatsby-browser.js</span>
<span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"prismjs/themes/prism-solarizedlight.css"</span><span class="token punctuation">)</span></code></pre></div></span>
<p>И посмотреть-таки, что получилось.</p>
<span><div class="gatsby-highlight" data-language="markdown"><pre class="language-markdown"><code class="language-markdown"><span class="token comment">&lt;!--content/ru/frontend/gatsby/gatsby.mdx--></span>
Кусок кода css.

<span class="token code"><span class="token punctuation">```</span><span class="token code-language">css</span>
<span class="token code-block language-css"><span class="token selector">.gatsby-highlight</span> <span class="token punctuation">{</span>
  <span class="token property">background-color</span><span class="token punctuation">:</span> #fdf6e3<span class="token punctuation">;</span>
  <span class="token property">border-radius</span><span class="token punctuation">:</span> 0.3em<span class="token punctuation">;</span>
<span class="token punctuation">}</span></span>
<span class="token punctuation">```</span></span></code></pre></div></span>
<h2 id="комментарии" style="position:relative"><a href="#%D0%BA%D0%BE%D0%BC%D0%BC%D0%B5%D0%BD%D1%82%D0%B0%D1%80%D0%B8%D0%B8" aria-label="комментарии permalink" class="anchor before"><span><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></span></a>Комментарии</h2>
<p>Редкий блог обходится без комментариев. Здесь у каждого свои предпочтения, начиная от
выбора самой системы комментирования, и заканчивая реализацией её подключения. Мне интересно
поведение, когда комментарии показываются только если посетитель сам захотел их увидеть.
Следовательно, до этого момента (а он может не наступить никогда), я не хочу грузить какие-то
сторонние скрипты.</p>
<p>Реализация именно такого поведения и представлена ниже. Из всего многообразия похожих скриптовых
систем используем disqus.</p>
<p>Код disqus.</p>
<span><div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token comment">// src/components/disqus.js</span>
<span class="token keyword">const</span> <span class="token constant">DISQUS_ID</span> <span class="token operator">=</span> <span class="token string">"xxxxx.disqus.com"</span> <span class="token comment">// ваш идентификатор</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">runDisqus</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> page <span class="token operator">=</span> window<span class="token punctuation">.</span>document<span class="token punctuation">;</span>
  <span class="token keyword">const</span> dscript <span class="token operator">=</span> page<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">"script"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  dscript<span class="token punctuation">.</span>src <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">//</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token constant">DISQUS_ID</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/embed.js</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
  dscript<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">"data-timestamp"</span><span class="token punctuation">,</span> <span class="token operator">+</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">(</span>page<span class="token punctuation">.</span>head <span class="token operator">||</span> page<span class="token punctuation">.</span>body<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>dscript<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></span>
<p>Компонент комментариев.</p>
<span><div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token comment">// src/components/comments.js</span>
<span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> useState<span class="token punctuation">,</span> useEffect <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"react"</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> runDisqus <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"./disqus"</span>

<span class="token keyword">const</span> <span class="token function-variable function">Comments</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token comment">// Если юзер тыкнул по кнопке (isThreadOpened = true),</span>
  <span class="token comment">// динамически подключаем скрипт disqus</span>
  <span class="token keyword">const</span> <span class="token punctuation">[</span>isThreadOpened<span class="token punctuation">,</span> setIsThreadOpened<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span>

  <span class="token keyword">const</span> <span class="token function-variable function">handleOpenThread</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token function">setIsThreadOpened</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> window <span class="token operator">!==</span> <span class="token string">"undefined"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token function">runDisqus</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// переход с Link не перезагружает страницу полностью</span>
  <span class="token comment">// поэтому выполняем DISQUS.reset, чтобы корректно обновлять</span>
  <span class="token comment">// комментарии на странице</span>
  <span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>window<span class="token punctuation">.</span><span class="token constant">DISQUS</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      window<span class="token punctuation">.</span><span class="token constant">DISQUS</span><span class="token punctuation">.</span><span class="token function">reset</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

  <span class="token comment">// показать кнопку, если комментарии ещё не открывали</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>comments<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token plain-text">
      </span><span class="token punctuation">{</span><span class="token operator">!</span>isThreadOpened <span class="token operator">&amp;&amp;</span> <span class="token punctuation">(</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>handleOpenThread<span class="token punctuation">}</span></span><span class="token punctuation">></span></span><span class="token plain-text">
          Show comments
        </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span>
      <span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>disqus_thread<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> Comments</code></pre></div></span>
<p>Подключаем компонент на страницы записей.</p>
<span><div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token comment">// src/templates/post-template.js</span>
<span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">"react"</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> graphql <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"gatsby"</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> MDXRenderer <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"gatsby-plugin-mdx"</span>
<span class="token keyword">import</span> Comments <span class="token keyword">from</span> <span class="token string">"components/comments"</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">PostTemplate</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> data <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> h1 <span class="token punctuation">}</span> <span class="token operator">=</span> data<span class="token punctuation">.</span>mdx<span class="token punctuation">.</span>frontmatter
  <span class="token keyword">const</span> <span class="token punctuation">{</span> body <span class="token punctuation">}</span> <span class="token operator">=</span> data<span class="token punctuation">.</span>mdx

  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>main</span><span class="token punctuation">></span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h1</span><span class="token punctuation">></span></span><span class="token punctuation">{</span>h1<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h1</span><span class="token punctuation">></span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">MDXRenderer</span></span><span class="token punctuation">></span></span><span class="token punctuation">{</span>body<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token class-name">MDXRenderer</span></span><span class="token punctuation">></span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token class-name">Comments</span></span> <span class="token punctuation">/></span></span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>main</span><span class="token punctuation">></span></span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token comment">// ...</span></code></pre></div></span>
<p>Ещё вариант: подключать скрипт когда скролл доходит до конца страницы,
чтобы ленивцы не напрягали палец нажатием на кнопку.</p>
<h2 id="mdx" style="position:relative"><a href="#mdx" aria-label="mdx permalink" class="anchor before"><span><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></span></a>MDX</h2>
<p>Plugin MDX — это в первую очередь доступ к множеству пакетов. Для gatsby они
подключаются в двух вариациях: как адаптированный gatsby-пакет или как родной пакет
<a href="https://github.com/remarkjs/remark" target="_blank" rel="nofollow">remark</a>.</p>
<p>Выглядит это так:</p>
<span><div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">plugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token literal-property property">resolve</span><span class="token operator">:</span> <span class="token string">"gatsby-plugin-mdx"</span><span class="token punctuation">,</span>
      <span class="token literal-property property">options</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">extensions</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">".mdx"</span><span class="token punctuation">,</span> <span class="token string">".md"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token comment">// родные плагины remark</span>
        <span class="token literal-property property">remarkPlugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token comment">// ставит внешним ссылкам атрибуты rel="nofollow, noopener, noreferrer"</span>
          <span class="token comment">// открывает их в новой вкладке</span>
          <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"remark-external-links"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token comment">// адаптированные плагины</span>
        <span class="token literal-property property">gatsbyRemarkPlugins</span><span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token string">"gatsby-remark-images"</span><span class="token punctuation">,</span>
          <span class="token string">"gatsby-remark-prismjs"</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span></code></pre></div></span>
<p>А самое вкусное то, что можно импортировать компоненты прямо в markdown-файлы. Это позволит сделать
почти всё, что угодно. Вывод красивых табличек-предупреждений, нормальные вкладки с табами.
Возможно, даже галерею изображений.</p>
<p>Самый простой случай — предупреждения. Делаем.</p>
<span><div class="gatsby-highlight" data-language="css"><pre class="language-css"><code class="language-css"><span class="token comment">/* components/tip/tip.module.css */</span>
<span class="token comment">/* стиль с именем с module.css это css-модуль */</span>
<span class="token selector">.tip</span> <span class="token punctuation">{</span>
  <span class="token property">padding</span><span class="token punctuation">:</span> 2rem<span class="token punctuation">;</span>
  <span class="token property">color</span><span class="token punctuation">:</span> white<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">.heading</span> <span class="token punctuation">{</span> <span class="token property">font-weight</span><span class="token punctuation">:</span> bold<span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token selector">.warning</span> <span class="token punctuation">{</span> <span class="token property">background-color</span><span class="token punctuation">:</span> coral<span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token selector">.danger</span> <span class="token punctuation">{</span> <span class="token property">background-color</span><span class="token punctuation">:</span> crimson<span class="token punctuation">;</span> <span class="token punctuation">}</span></code></pre></div></span>
<p>Сам компонент:</p>
<span><div class="gatsby-highlight" data-language="jsx"><pre class="language-jsx"><code class="language-jsx"><span class="token comment">// components/tip/index.js</span>
<span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">"react"</span>
<span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> styles <span class="token keyword">from</span> <span class="token string">"./tip.module.css"</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span> <span class="token function">Tip</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> type<span class="token punctuation">,</span> heading<span class="token punctuation">,</span> children <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">className</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">[</span>styles<span class="token punctuation">.</span>tip<span class="token punctuation">,</span> styles<span class="token punctuation">[</span>type<span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">' '</span><span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token punctuation">></span></span><span class="token plain-text">
      </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">className</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>styles<span class="token punctuation">.</span>heading<span class="token punctuation">}</span></span><span class="token punctuation">></span></span><span class="token punctuation">{</span>heading<span class="token punctuation">}</span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span><span class="token plain-text">
      </span><span class="token punctuation">{</span>children<span class="token punctuation">}</span><span class="token plain-text">
    </span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span></code></pre></div></span>
<p>Использование в mdx-файле:</p>
<span><div class="gatsby-highlight" data-language="markdown"><pre class="language-markdown"><code class="language-markdown">import Tip from "components/tip"

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Tip</span> <span class="token attr-name">heading</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>Danger!<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>danger<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
My danger text
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Tip</span><span class="token punctuation">></span></span></code></pre></div></span>
<h2 id="публикация" style="position:relative"><a href="#%D0%BF%D1%83%D0%B1%D0%BB%D0%B8%D0%BA%D0%B0%D1%86%D0%B8%D1%8F" aria-label="публикация permalink" class="anchor before"><span><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></span></a>Публикация</h2>
<p>Вариантов много. Рассмотрим деплой на github pages.</p>
<p>От знакомства с vuepress у меня остался прекрасный маленький скрипт, который я оставлю здесь,
потому как он универсален.</p>
<span><div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash"><span class="token shebang important">#!/usr/bin/env sh</span>

<span class="token comment"># abort on errors</span>
<span class="token builtin class-name">set</span> <span class="token parameter variable">-e</span>

<span class="token comment"># build and navigate into the build output directory</span>
<span class="token function">npm</span> run build <span class="token operator">&amp;&amp;</span> <span class="token builtin class-name">cd</span> public

<span class="token comment"># if you are deploying to a custom domain</span>
<span class="token builtin class-name">echo</span> <span class="token string">'blogname.com'</span> <span class="token operator">></span> CNAME

<span class="token function">git</span> init
<span class="token function">git</span> <span class="token function">add</span> <span class="token parameter variable">-A</span>
<span class="token function">git</span> commit <span class="token parameter variable">-m</span> <span class="token string">'deploy'</span>

<span class="token comment"># git push -f git@github.com:&lt;имя_юзера>/&lt;имя_репозитория>.git &lt;имя_ветки></span>
<span class="token function">git</span> push <span class="token parameter variable">-f</span> git@github.com:jack/jack.github.io.git master:gh-pages</code></pre></div></span>
<h2 id="послесловие" style="position:relative"><a href="#%D0%BF%D0%BE%D1%81%D0%BB%D0%B5%D1%81%D0%BB%D0%BE%D0%B2%D0%B8%D0%B5" aria-label="послесловие permalink" class="anchor before"><span><svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></span></a>Послесловие</h2>
<p>В статье осталось много неосвящённых моментов: как поднять PWA (точно надо?), можно ли брать gatsby
когда нужно сотворить Headless CMS + статику (можно), обязательно ли использовать graphql (нет).</p>
<p>Ответы есть в <a href="https://www.gatsbyjs.com" target="_blank" rel="nofollow">официальной документации</a>.
Она очень хороша для глубокого погружения.</p>
<p>С чем сравнивать gatsby когда стоишь перед выбором? Зависит от потребностей.</p>
<p>На первой ступени стоят генераторы статики.</p>
<p>Тот же vuepress был создан в первую очередь для написания документации. И с этой задачей
он справляется на 100% без ручного вмешательства. Его можно сравнить с octopress или jekyll.
Вернее, из него можно сделать octopress (и даже лучше).</p>
<p>Вторая ступень... не знаю как обозначить эти фреймворки. Gatsby и его молодой аналог
на Vue — Gridsome. Они предоставляют больше возможностей: обращение к серверу или напрямую
к базе данных, или использование классики в виде локально хранящихся markdown-файлов.</p>
<p>Третья ступень: Next.js/Nuxt.js. Это если нужен server side rendering «из коробки»,
но одной лишь статикой не обойтись. В основном это приложения с множеством страниц, когда интерфейс
подстраивается под каждого пользователя индивидуально.</p>
<p>Про мир Angular сказать не могу, но явно у них есть свои решения.</p>
<p>В любом случае смотреть надо на наличие хорошей документации, поддержки сообщества и того,
сколько средств вливается в инструмент. У gatsby в этом плане на текущий момент всё очень неплохо.</p>
<p>У меня остались хорошие впечатления. И я, пожалуй, перееду на gatsby когда надумаю
в следующий раз делать глобальный редизайн.</p><div class="next-prev-module--links--d62c5"><a class="next-prev-module--link--3ae6f" href="/posts/redux-saga/"><span>Redux Saga</span></a><span class="next-prev-module--link__separator--e12da"></span><a class="next-prev-module--link--3ae6f" href="/posts/rn-without-android-studio/"><span>Android без Android Studio</span></a></div></div><div class="comments"><button class="button">Комментарии<span class="button__icon"></span></button><div id="disqus_thread"></div></div></article></main><footer class="footer-module--footer--03d8a"><a href="https://twitter.com/octowed" class="footer-module--footer__link--22faa" rel="nofollow noopener noreferrer" target="_blank" aria-label="Твиттер"><svg class="icon icon_twitter"><use xlink:href="#twitter"></use></svg></a><a href="https://t-do.ru/redvi9" class="footer-module--footer__link--22faa" rel="nofollow noopener noreferrer" target="_blank" aria-label="Телеграм"><svg class="icon icon_telegram"><use xlink:href="#telegram"></use></svg></a><a href="mailto:liberty195@gmail.com" class="footer-module--footer__link--22faa" rel="nofollow noopener noreferrer" target="_blank" aria-label="Почта"><svg class="icon icon_mail"><use xlink:href="#email"></use></svg></a></footer></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/posts/gatsby/";/*]]>*/</script><!-- slice-start id="_gatsby-scripts-1" -->
          <script
            id="gatsby-chunk-mapping"
          >
            window.___chunkMapping="{\"app\":[\"/app-b05bbfbd6f04ab26f1a1.js\"],\"component---src-pages-404-tsx\":[\"/component---src-pages-404-tsx-dad6d8e6c9d0b64f9b3a.js\"],\"component---src-pages-index-tsx\":[\"/component---src-pages-index-tsx-b79f2baf4ff90a64a1f1.js\"],\"component---src-pages-posts-js\":[\"/component---src-pages-posts-js-565dd2f5f7934642f014.js\"],\"component---src-pages-tags-js\":[\"/component---src-pages-tags-js-88d92c91303a4d191b94.js\"],\"component---src-templates-post-template-tsx-content-file-path-content-2012-12-04-dwm-index-mdx\":[\"/component---src-templates-post-template-tsx-content-file-path-content-2012-12-04-dwm-index-mdx-da10028ed80e24dff569.js\"],\"component---src-templates-post-template-tsx-content-file-path-content-2013-05-16-gentoo-update-index-mdx\":[\"/component---src-templates-post-template-tsx-content-file-path-content-2013-05-16-gentoo-update-index-mdx-a82216119f8ac9c6492a.js\"],\"component---src-templates-post-template-tsx-content-file-path-content-2013-09-14-tex-hyperref-hyperref-mdx\":[\"/component---src-templates-post-template-tsx-content-file-path-content-2013-09-14-tex-hyperref-hyperref-mdx-cc3604bc43cacb45f861.js\"],\"component---src-templates-post-template-tsx-content-file-path-content-2021-04-16-gatsby-gatsby-mdx\":[\"/component---src-templates-post-template-tsx-content-file-path-content-2021-04-16-gatsby-gatsby-mdx-ed027fe2cb3214431713.js\"],\"component---src-templates-post-template-tsx-content-file-path-content-2023-07-02-ts-utility-types-ts-utility-types-mdx\":[\"/component---src-templates-post-template-tsx-content-file-path-content-2023-07-02-ts-utility-types-ts-utility-types-mdx-2fdba1f056f08db99446.js\"],\"component---src-templates-post-template-tsx-content-file-path-content-2023-07-03-hash-colors-hash-colors-mdx\":[\"/component---src-templates-post-template-tsx-content-file-path-content-2023-07-03-hash-colors-hash-colors-mdx-6d6747a362fe4faf61b9.js\"],\"component---src-templates-post-template-tsx-content-file-path-content-achilles-index-mdx\":[\"/component---src-templates-post-template-tsx-content-file-path-content-achilles-index-mdx-fed1040053e956f42ffa.js\"],\"component---src-templates-post-template-tsx-content-file-path-content-adb-wifi-adb-wifi-mdx\":[\"/component---src-templates-post-template-tsx-content-file-path-content-adb-wifi-adb-wifi-mdx-93e5c8d34236a4519bd8.js\"],\"component---src-templates-post-template-tsx-content-file-path-content-chroot-index-mdx\":[\"/component---src-templates-post-template-tsx-content-file-path-content-chroot-index-mdx-fe2595f276b28645d1f3.js\"],\"component---src-templates-post-template-tsx-content-file-path-content-cp-1251-to-utf-8-index-mdx\":[\"/component---src-templates-post-template-tsx-content-file-path-content-cp-1251-to-utf-8-index-mdx-3b67ffdaaafd1e035e47.js\"],\"component---src-templates-post-template-tsx-content-file-path-content-css-blur-index-mdx\":[\"/component---src-templates-post-template-tsx-content-file-path-content-css-blur-index-mdx-f2e1bdee38bf6090aa5f.js\"],\"component---src-templates-post-template-tsx-content-file-path-content-debian-kernel-index-mdx\":[\"/component---src-templates-post-template-tsx-content-file-path-content-debian-kernel-index-mdx-cd5ca3dbe18e68f77ded.js\"],\"component---src-templates-post-template-tsx-content-file-path-content-debian-wheezy-index-mdx\":[\"/component---src-templates-post-template-tsx-content-file-path-content-debian-wheezy-index-mdx-19ff95e8b793ba59f905.js\"],\"component---src-templates-post-template-tsx-content-file-path-content-django-first-steps-django-first-steps-mdx\":[\"/component---src-templates-post-template-tsx-content-file-path-content-django-first-steps-django-first-steps-mdx-fa9b9ceb327bb6f4042f.js\"],\"component---src-templates-post-template-tsx-content-file-path-content-django-pagination-django-pagination-mdx\":[\"/component---src-templates-post-template-tsx-content-file-path-content-django-pagination-django-pagination-mdx-6d15cee3f8306c76cec9.js\"],\"component---src-templates-post-template-tsx-content-file-path-content-elegant-design-index-mdx\":[\"/component---src-templates-post-template-tsx-content-file-path-content-elegant-design-index-mdx-58a340283de6a90b5b33.js\"],\"component---src-templates-post-template-tsx-content-file-path-content-emacs-dired-emacs-dired-mdx\":[\"/component---src-templates-post-template-tsx-content-file-path-content-emacs-dired-emacs-dired-mdx-7ab62b131d7d60bfb73d.js\"],\"component---src-templates-post-template-tsx-content-file-path-content-emacs-emacs-mdx\":[\"/component---src-templates-post-template-tsx-content-file-path-content-emacs-emacs-mdx-78638920b8b38e4a7503.js\"],\"component---src-templates-post-template-tsx-content-file-path-content-emacs-ide-emacs-ide-mdx\":[\"/component---src-templates-post-template-tsx-content-file-path-content-emacs-ide-emacs-ide-mdx-e7cbbebedac22ab0fd75.js\"],\"component---src-templates-post-template-tsx-content-file-path-content-emacs-snippets-emacs-snippets-mdx\":[\"/component---src-templates-post-template-tsx-content-file-path-content-emacs-snippets-emacs-snippets-mdx-066ef0e9e5e6047fe873.js\"],\"component---src-templates-post-template-tsx-content-file-path-content-gentoo-2-index-mdx\":[\"/component---src-templates-post-template-tsx-content-file-path-content-gentoo-2-index-mdx-920ce0793fbdfbb71fec.js\"],\"component---src-templates-post-template-tsx-content-file-path-content-get-absolute-url-get-absolute-url-mdx\":[\"/component---src-templates-post-template-tsx-content-file-path-content-get-absolute-url-get-absolute-url-mdx-746a9f5160eae9d8873c.js\"],\"component---src-templates-post-template-tsx-content-file-path-content-js-this-js-this-mdx\":[\"/component---src-templates-post-template-tsx-content-file-path-content-js-this-js-this-mdx-a52121b730946ab4cbb5.js\"],\"component---src-templates-post-template-tsx-content-file-path-content-linux-acpi-index-mdx\":[\"/component---src-templates-post-template-tsx-content-file-path-content-linux-acpi-index-mdx-7d8f41077978686a2721.js\"],\"component---src-templates-post-template-tsx-content-file-path-content-linux-arch-users-arch-users-mdx\":[\"/component---src-templates-post-template-tsx-content-file-path-content-linux-arch-users-arch-users-mdx-a76c8056ade5fb42fed7.js\"],\"component---src-templates-post-template-tsx-content-file-path-content-linux-backup-index-mdx\":[\"/component---src-templates-post-template-tsx-content-file-path-content-linux-backup-index-mdx-f595468ea0e52ade0143.js\"],\"component---src-templates-post-template-tsx-content-file-path-content-linux-command-index-mdx\":[\"/component---src-templates-post-template-tsx-content-file-path-content-linux-command-index-mdx-3be86729ea46edaad8e2.js\"],\"component---src-templates-post-template-tsx-content-file-path-content-linux-fbsplash-index-mdx\":[\"/component---src-templates-post-template-tsx-content-file-path-content-linux-fbsplash-index-mdx-915c662e5015ce3d5763.js\"],\"component---src-templates-post-template-tsx-content-file-path-content-linux-grub-2-index-mdx\":[\"/component---src-templates-post-template-tsx-content-file-path-content-linux-grub-2-index-mdx-eaeddecd9c2cbe3e0ace.js\"],\"component---src-templates-post-template-tsx-content-file-path-content-linux-install-gentoo-index-mdx\":[\"/component---src-templates-post-template-tsx-content-file-path-content-linux-install-gentoo-index-mdx-eb1979cce2c5cbae6c2b.js\"],\"component---src-templates-post-template-tsx-content-file-path-content-linux-kernel-v-3-index-mdx\":[\"/component---src-templates-post-template-tsx-content-file-path-content-linux-kernel-v-3-index-mdx-4ec444463fa86d22652e.js\"],\"component---src-templates-post-template-tsx-content-file-path-content-linux-lamp-index-mdx\":[\"/component---src-templates-post-template-tsx-content-file-path-content-linux-lamp-index-mdx-9e52be395eee881ac2ca.js\"],\"component---src-templates-post-template-tsx-content-file-path-content-linux-mplayer-index-mdx\":[\"/component---src-templates-post-template-tsx-content-file-path-content-linux-mplayer-index-mdx-977e2b7e9a8f955618e3.js\"],\"component---src-templates-post-template-tsx-content-file-path-content-linux-ntpd-index-mdx\":[\"/component---src-templates-post-template-tsx-content-file-path-content-linux-ntpd-index-mdx-aa1a68227d0a8a392983.js\"],\"component---src-templates-post-template-tsx-content-file-path-content-linux-openbox-index-mdx\":[\"/component---src-templates-post-template-tsx-content-file-path-content-linux-openbox-index-mdx-5772347a10393d9838b1.js\"],\"component---src-templates-post-template-tsx-content-file-path-content-linux-screencast-index-mdx\":[\"/component---src-templates-post-template-tsx-content-file-path-content-linux-screencast-index-mdx-2562778b416fc5866ffa.js\"],\"component---src-templates-post-template-tsx-content-file-path-content-linux-sound-linux-sound-mdx\":[\"/component---src-templates-post-template-tsx-content-file-path-content-linux-sound-linux-sound-mdx-fce96dd28370ae6e5fa4.js\"],\"component---src-templates-post-template-tsx-content-file-path-content-macos-commands-macos-commands-mdx\":[\"/component---src-templates-post-template-tsx-content-file-path-content-macos-commands-macos-commands-mdx-d2a09289de7e792d0d1f.js\"],\"component---src-templates-post-template-tsx-content-file-path-content-nano-nano-mdx\":[\"/component---src-templates-post-template-tsx-content-file-path-content-nano-nano-mdx-7f8a9f0d1ffe043b9b59.js\"],\"component---src-templates-post-template-tsx-content-file-path-content-nestjs-start-nestjs-start-mdx\":[\"/component---src-templates-post-template-tsx-content-file-path-content-nestjs-start-nestjs-start-mdx-f61d25537276fd440a48.js\"],\"component---src-templates-post-template-tsx-content-file-path-content-npm-build-index-mdx\":[\"/component---src-templates-post-template-tsx-content-file-path-content-npm-build-index-mdx-27217d5f71dedb56db41.js\"],\"component---src-templates-post-template-tsx-content-file-path-content-pull-request-index-mdx\":[\"/component---src-templates-post-template-tsx-content-file-path-content-pull-request-index-mdx-30c33358f5af597fdbba.js\"],\"component---src-templates-post-template-tsx-content-file-path-content-pydict-pydict-mdx\":[\"/component---src-templates-post-template-tsx-content-file-path-content-pydict-pydict-mdx-ab725a832278697925d9.js\"],\"component---src-templates-post-template-tsx-content-file-path-content-python-gui-python-gui-mdx\":[\"/component---src-templates-post-template-tsx-content-file-path-content-python-gui-python-gui-mdx-0bf0d21d419c084bfc0c.js\"],\"component---src-templates-post-template-tsx-content-file-path-content-python-sort-sort-mdx\":[\"/component---src-templates-post-template-tsx-content-file-path-content-python-sort-sort-mdx-51f0d043a9c6fd67d21b.js\"],\"component---src-templates-post-template-tsx-content-file-path-content-qemu-index-mdx\":[\"/component---src-templates-post-template-tsx-content-file-path-content-qemu-index-mdx-2122ed611102df5b2037.js\"],\"component---src-templates-post-template-tsx-content-file-path-content-rails-archive-index-mdx\":[\"/component---src-templates-post-template-tsx-content-file-path-content-rails-archive-index-mdx-1e2d9dc4e69d154da112.js\"],\"component---src-templates-post-template-tsx-content-file-path-content-rails-markdown-index-mdx\":[\"/component---src-templates-post-template-tsx-content-file-path-content-rails-markdown-index-mdx-ff24a5e98c8af591ba76.js\"],\"component---src-templates-post-template-tsx-content-file-path-content-rails-slug-url-index-mdx\":[\"/component---src-templates-post-template-tsx-content-file-path-content-rails-slug-url-index-mdx-77777673445b2303bac1.js\"],\"component---src-templates-post-template-tsx-content-file-path-content-react-dynamic-component-tagname-index-mdx\":[\"/component---src-templates-post-template-tsx-content-file-path-content-react-dynamic-component-tagname-index-mdx-d1ea3ee0d286fa2ad069.js\"],\"component---src-templates-post-template-tsx-content-file-path-content-react-jsx-render-index-mdx\":[\"/component---src-templates-post-template-tsx-content-file-path-content-react-jsx-render-index-mdx-c56facea8460ecc29d36.js\"],\"component---src-templates-post-template-tsx-content-file-path-content-react-native-custom-fonts-index-mdx\":[\"/component---src-templates-post-template-tsx-content-file-path-content-react-native-custom-fonts-index-mdx-b6d1ecb5bfc80b013e7d.js\"],\"component---src-templates-post-template-tsx-content-file-path-content-react-native-icons-index-mdx\":[\"/component---src-templates-post-template-tsx-content-file-path-content-react-native-icons-index-mdx-719fb5ef2bb554b5f0a0.js\"],\"component---src-templates-post-template-tsx-content-file-path-content-react-render-props-react-render-props-mdx\":[\"/component---src-templates-post-template-tsx-content-file-path-content-react-render-props-react-render-props-mdx-c7dc23646358e81e74d0.js\"],\"component---src-templates-post-template-tsx-content-file-path-content-react-timers-react-timers-mdx\":[\"/component---src-templates-post-template-tsx-content-file-path-content-react-timers-react-timers-mdx-e372a898ef08f2dc563c.js\"],\"component---src-templates-post-template-tsx-content-file-path-content-recursive-component-recursive-component-mdx\":[\"/component---src-templates-post-template-tsx-content-file-path-content-recursive-component-recursive-component-mdx-b956c5871f619ef2ed6d.js\"],\"component---src-templates-post-template-tsx-content-file-path-content-redux-saga-redux-saga-mdx\":[\"/component---src-templates-post-template-tsx-content-file-path-content-redux-saga-redux-saga-mdx-0156f88ce029e915b59f.js\"],\"component---src-templates-post-template-tsx-content-file-path-content-responsive-menu-index-mdx\":[\"/component---src-templates-post-template-tsx-content-file-path-content-responsive-menu-index-mdx-0c0999b091ebeb0d445e.js\"],\"component---src-templates-post-template-tsx-content-file-path-content-rn-dark-mode-rn-dark-mode-mdx\":[\"/component---src-templates-post-template-tsx-content-file-path-content-rn-dark-mode-rn-dark-mode-mdx-1dca07b02021085b6887.js\"],\"component---src-templates-post-template-tsx-content-file-path-content-rn-maps-rn-maps-mdx\":[\"/component---src-templates-post-template-tsx-content-file-path-content-rn-maps-rn-maps-mdx-08e267f85eb7ef4a8972.js\"],\"component---src-templates-post-template-tsx-content-file-path-content-rn-mobile-splash-screen-mobile-splash-screen-mdx\":[\"/component---src-templates-post-template-tsx-content-file-path-content-rn-mobile-splash-screen-mobile-splash-screen-mdx-40b13c34cb82c9c4b544.js\"],\"component---src-templates-post-template-tsx-content-file-path-content-rn-settings-rn-settings-mdx\":[\"/component---src-templates-post-template-tsx-content-file-path-content-rn-settings-rn-settings-mdx-7af45cffe6d282d54dad.js\"],\"component---src-templates-post-template-tsx-content-file-path-content-rn-toolkit-rn-toolkit-mdx\":[\"/component---src-templates-post-template-tsx-content-file-path-content-rn-toolkit-rn-toolkit-mdx-c3927ec2b9ca70281d56.js\"],\"component---src-templates-post-template-tsx-content-file-path-content-rn-without-android-studio-rn-without-android-studio-mdx\":[\"/component---src-templates-post-template-tsx-content-file-path-content-rn-without-android-studio-rn-without-android-studio-mdx-798fc67eb323bd4c0479.js\"],\"component---src-templates-post-template-tsx-content-file-path-content-ruby-archives-in-jekyll-index-mdx\":[\"/component---src-templates-post-template-tsx-content-file-path-content-ruby-archives-in-jekyll-index-mdx-047dcbcfa93445bba18a.js\"],\"component---src-templates-post-template-tsx-content-file-path-content-ruby-jekyll-index-mdx\":[\"/component---src-templates-post-template-tsx-content-file-path-content-ruby-jekyll-index-mdx-9335f95454e634038bd3.js\"],\"component---src-templates-post-template-tsx-content-file-path-content-ruby-rvm-index-mdx\":[\"/component---src-templates-post-template-tsx-content-file-path-content-ruby-rvm-index-mdx-c4c4d71e3921089f030b.js\"],\"component---src-templates-post-template-tsx-content-file-path-content-ruby-sinatra-index-mdx\":[\"/component---src-templates-post-template-tsx-content-file-path-content-ruby-sinatra-index-mdx-a443f9769d480ee89051.js\"],\"component---src-templates-post-template-tsx-content-file-path-content-sass-controls-index-mdx\":[\"/component---src-templates-post-template-tsx-content-file-path-content-sass-controls-index-mdx-9e7ff15f6c24f59bf7b4.js\"],\"component---src-templates-post-template-tsx-content-file-path-content-ssh-keys-index-mdx\":[\"/component---src-templates-post-template-tsx-content-file-path-content-ssh-keys-index-mdx-5207097eb2857e356a4c.js\"],\"component---src-templates-post-template-tsx-content-file-path-content-tex-ebup-latex-epub-latex-md\":[\"/component---src-templates-post-template-tsx-content-file-path-content-tex-ebup-latex-epub-latex-md-c25b19f865fca24ff1f8.js\"],\"component---src-templates-post-template-tsx-content-file-path-content-texreview-texreview-mdx\":[\"/component---src-templates-post-template-tsx-content-file-path-content-texreview-texreview-mdx-8b5d9c563048efe8481c.js\"],\"component---src-templates-post-template-tsx-content-file-path-content-tikz-tikz-mdx\":[\"/component---src-templates-post-template-tsx-content-file-path-content-tikz-tikz-mdx-9dd488512e68b132f95e.js\"],\"component---src-templates-post-template-tsx-content-file-path-content-title-latex-title-latex-mdx\":[\"/component---src-templates-post-template-tsx-content-file-path-content-title-latex-title-latex-mdx-d62f7a9645f4d9eb6e00.js\"],\"component---src-templates-post-template-tsx-content-file-path-content-udev-index-mdx\":[\"/component---src-templates-post-template-tsx-content-file-path-content-udev-index-mdx-34bbd61cbb752d1dc6f2.js\"],\"component---src-templates-post-template-tsx-content-file-path-content-whois-whois-mdx\":[\"/component---src-templates-post-template-tsx-content-file-path-content-whois-whois-mdx-6b15be52bd2f8ce1a766.js\"],\"component---src-templates-tag-template-tsx\":[\"/component---src-templates-tag-template-tsx-41c1dc64612956e85124.js\"]}";
          </script>
        <script>window.___webpackCompilationHash="564798658944e73b73c6";</script><script src="/webpack-runtime-580fb7172f783dce07c9.js" async></script><script src="/framework-35077be2a200ce034dbf.js" async></script><script src="/app-b05bbfbd6f04ab26f1a1.js" async></script><!-- slice-end id="_gatsby-scripts-1" --></body></html>