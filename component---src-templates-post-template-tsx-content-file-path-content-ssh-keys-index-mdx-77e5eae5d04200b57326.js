"use strict";(self.webpackChunkgatsby_blog=self.webpackChunkgatsby_blog||[]).push([[9964],{9532:function(e,n,t){t.r(n),t.d(n,{Head:function(){return o.Ss},default:function(){return i}});var l=t(8876),a=t(4424);function c(e){const n=Object.assign({p:"p",h2:"h2",a:"a",span:"span",code:"code",pre:"pre"},(0,l.MN)(),e.components);return a.createElement(a.Fragment,null,a.createElement(n.p,null,"Вы пользуетесь git. У вас сгенерированы приватный и публичный ключи, связанные\nс вашим email-адресом. Один ключ и один адрес. Но что если нужно больше одного?\nКак привязать несколько аккаунтов со своими данными и автоматизировать вход?"),"\n",a.createElement(n.h2,{id:"генерация-ssh-ключей",style:{position:"relative"}},a.createElement(n.a,{href:"#%D0%B3%D0%B5%D0%BD%D0%B5%D1%80%D0%B0%D1%86%D0%B8%D1%8F-ssh-%D0%BA%D0%BB%D1%8E%D1%87%D0%B5%D0%B9","aria-label":"генерация ssh ключей permalink",className:"anchor before"},a.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"Генерация ssh-ключей"),"\n",a.createElement(n.p,null,"При генерации ключа следует указать ему отличное от дефолтного имя. По-умолчанию\nиспользуются имена ",a.createElement(n.code,null,"id_rsa")," (приватный ключ) и ",a.createElement(n.code,null,"id_rsa_pub")," (ключ публичный).\nЧтобы создать файлы с другими именами или просто не затереть уже существующие\nсгенерируем ключи с флагом ",a.createElement(n.code,null,"-f"),". Например, сделаем автономными данные для github."),"\n",a.createElement(n.pre,null,a.createElement(n.code,{className:"language-shell"},'$ ssh-keygen -t ed25519 -C "your_name@yourmail.domain" -f ~/.ssh/github\n')),"\n",a.createElement(n.p,null,"В качестве пользователя используйте данные вашей почтовой учётной записи. В\nскрытом домашнем каталоге ",a.createElement(n.code,null,"~/.ssh")," теперь лежат два файла с нестандартными именами:\n",a.createElement(n.code,null,"github")," и ",a.createElement(n.code,null,"github.pub"),". Содержимое последнего копируется на git-сервер."),"\n",a.createElement(n.p,null,"Если ключи генерируются на сервере, перенести их на локальную машину можно так:"),"\n",a.createElement(n.pre,null,a.createElement(n.code,{className:"language-shell"},'# на сервере, 7021 - нестандартный порт\n$ ssh company_user@server.domain -p 7021\n$ ssh-keygen -t ed25519 -C "user@server.domain" -f ~/.ssh/mycompany_key\n\n# локально\n$ scp -r -P 7021 company_user@server.domain:/home/company_user/.ssh/ /home/local_user/\n')),"\n",a.createElement(n.p,null,"Заходим на сервер по ssh под именем нужного пользователя, генерируем ключ.\nЗатем на локальной машине через scp копируем рекурсивно каталог с ssh-ключами.\nРекурсивно: ",a.createElement(n.code,null,"-r"),", если используется нестандартный порт: ",a.createElement(n.code,null,"-P"),"."),"\n",a.createElement(n.h2,{id:"как-автоматизировать-вход",style:{position:"relative"}},a.createElement(n.a,{href:"#%D0%BA%D0%B0%D0%BA-%D0%B0%D0%B2%D1%82%D0%BE%D0%BC%D0%B0%D1%82%D0%B8%D0%B7%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D1%82%D1%8C-%D0%B2%D1%85%D0%BE%D0%B4","aria-label":"как автоматизировать вход permalink",className:"anchor before"},a.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"Как автоматизировать вход"),"\n",a.createElement(n.p,null,"Допустим, у нас десятки ключей от git-серверов разных компаний. Как сказать git'у,\nпод какой учётной записью работать в каждом конкретном случае? Для этого\nпонадобится изменить конфигурацию. Создаём в ",a.createElement(n.code,null,"~/.ssh")," файл ",a.createElement(n.code,null,"config")," с подходящими настройками:"),"\n",a.createElement(n.pre,null,a.createElement(n.code,{className:"language-bash"},"Host github.com\n  Hostname github.com\n  PreferredAuthentications publickey\n  IdentityFile ~/.ssh/github\n\nHost mycompany.com\n  Hostname mycompany.com\n  Port 7021\n  IdentityFile ~/.ssh/mycompany_key\n")),"\n",a.createElement(n.p,null,"Теперь при работе в репозитории github или mycompany будут использованы ключи,\nсоответствующие адресу домена. Что и требовалось."),"\n",a.createElement(n.p,null,"Однако, коммиты закрепляются за одним только пользователем. Как вариант решения:\nуказать одного пользователя глобально, а других для каждого репозитория (без флага global):"),"\n",a.createElement(n.pre,null,a.createElement(n.code,{className:"language-shell"},"$ git config --local user.email myuser@mymail.doman\n$ git config --local user.name myusername\n")),"\n",a.createElement(n.p,null,"Либо изменять автора на лету, при создании коммита:"),"\n",a.createElement(n.pre,null,a.createElement(n.code,{className:"language-shell"},'$ git commit --author=myuser "commit"\n')),"\n",a.createElement(n.h2,{id:"игнорируй-всё",style:{position:"relative"}},a.createElement(n.a,{href:"#%D0%B8%D0%B3%D0%BD%D0%BE%D1%80%D0%B8%D1%80%D1%83%D0%B9-%D0%B2%D1%81%D1%91","aria-label":"игнорируй всё permalink",className:"anchor before"},a.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"Игнорируй всё"),"\n",a.createElement(n.p,null,"В работе каждый подбирает для себя наиболее удобный инструмент. Кто-то пользуется\nпростым текстовым редактором, кто-то предпочитает навороченные среды разработки.\nЧасто инструменты оставляют после себя «мусор», который не хотелось бы\nтащить в ",a.createElement(n.code,null,".gitignore")," публичного проекта."),"\n",a.createElement(n.p,null,"Для того нам дан ещё один файл с настройками гита — .gitconfig. Открываем,\nвносим информацию."),"\n",a.createElement(n.pre,null,a.createElement(n.code,{className:"language-bash"},"# базовые настройки\n[core]\n  autocrlf = input\n  quotepath = false\n  whitespace = cr-at-eol,indent-with-non-tab,blank-at-eol,space-before-tab\n  excludesfile = /home/local_user/.gitignore_global\n# псевдонимы для команд\n[alias]\n  ch = checkout\n  cm = commit -m\n")),"\n",a.createElement(n.p,null,"Всё внимание на строку ",a.createElement(n.code,null,"excludesfile = /home/user/.gitignore_global"),". Именно эта\nволшебная настройка позволяет внести в ",a.createElement(n.code,null,".gitignore_global")," (или любой другой файл)\nто, что будет игнорироваться (не будет отправлено на сервер) всегда."))}var r=function(e){void 0===e&&(e={});const{wrapper:n}=Object.assign({},(0,l.MN)(),e.components);return n?a.createElement(n,e,a.createElement(c,e)):c(e)},o=t(7792),s=t(7619);function m(e){var n,t;let{data:{mdx:l},children:c,pageContext:{prev:r,next:m}}=e;const{h1:i,title:u,description:h,image:d,table_of_contents:g}=l.frontmatter;return(0,a.useEffect)((()=>{(0,s.K)()}),[]),a.createElement(a.Fragment,null,a.createElement(o._W,{h1:i,title:u,description:h,image:null===(n=l.frontmatter.image)||void 0===n?void 0:n.publicURL},a.createElement(o.MV,{post:l.frontmatter,imageData:null==d||null===(t=d.childImageSharp)||void 0===t?void 0:t.gatsbyImageData},g?a.createElement(o.G8,{headings:l.tableOfContents}):null,a.createElement("div",{className:"page__content"},c,a.createElement(o.Mf,{prev:r,next:m})),a.createElement(o.QZ,null))))}function i(e){return a.createElement(m,e,a.createElement(r,e))}},8876:function(e,n,t){t.d(n,{MN:function(){return c}});var l=t(4424);const a=l.createContext({});function c(e){const n=l.useContext(a);return l.useMemo((()=>"function"==typeof e?e(n):{...n,...e}),[n,e])}}}]);