"use strict";(self.webpackChunkgatsby_blog=self.webpackChunkgatsby_blog||[]).push([[9016],{5984:function(e,n,a){a.r(n),a.d(n,{Head:function(){return c.Ss},default:function(){return i}});var s=a(8876),t=a(4424);function l(e){const n=Object.assign({p:"p",h2:"h2",a:"a",span:"span",h3:"h3"},(0,s.MN)(),e.components);return t.createElement(t.Fragment,null,t.createElement(n.p,null,"NPM — пакетный менеджер JavaScript. Он управляет зависимостями как для\nклиентской стороны, так и для серверной. Если вы намерены выложить исходный код\nсвоего проекта и иметь возможность устанавливать его как отдельный компонент,\nлучший способ сделать это — создать пакет."),"\n",t.createElement(n.h2,{id:"что-для-этого-нужно",style:{position:"relative"}},t.createElement(n.a,{href:"#%D1%87%D1%82%D0%BE-%D0%B4%D0%BB%D1%8F-%D1%8D%D1%82%D0%BE%D0%B3%D0%BE-%D0%BD%D1%83%D0%B6%D0%BD%D0%BE","aria-label":"что для этого нужно permalink",className:"anchor before"},t.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"Что для этого нужно?"),"\n",t.createElement(n.p,null,"Для начала установить пакетный менеджер, если это ещё не было сделано. Установка\nзависит от используемой вами операционной системы, описывать её не вижу смысла:\nматериала по этому вопросу предостаточно."),"\n",t.createElement(n.h3,{id:"акканут",style:{position:"relative"}},t.createElement(n.a,{href:"#%D0%B0%D0%BA%D0%BA%D0%B0%D0%BD%D1%83%D1%82","aria-label":"акканут permalink",className:"anchor before"},t.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"Акканут"),"\n",t.createElement(n.p,null,"Первый шаг самый тривиальный. Зарегистрируйтесь на ",t.createElement(n.a,{href:"https://www.npmjs.com/signup",target:"_blank",rel:"nofollow"},"npmjs.com"),".\nПосле этого вы сможете публиковать пакеты от своего имени прямо из командной строки.\nВведите команду:"),"\n",t.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="shell"><pre class="language-shell"><code class="language-shell">$ <span class="token function">npm</span> login\nUsername: your_name\nPassword:\nEmail: <span class="token punctuation">(</span>this IS public<span class="token punctuation">)</span> your_name@domain.com\nLogged <span class="token keyword">in</span> on https://registry.npmjs.org/.</code></pre></div>'}}),"\n",t.createElement(n.h3,{id:"подготовка-проекта-к-публикации",style:{position:"relative"}},t.createElement(n.a,{href:"#%D0%BF%D0%BE%D0%B4%D0%B3%D0%BE%D1%82%D0%BE%D0%B2%D0%BA%D0%B0-%D0%BF%D1%80%D0%BE%D0%B5%D0%BA%D1%82%D0%B0-%D0%BA-%D0%BF%D1%83%D0%B1%D0%BB%D0%B8%D0%BA%D0%B0%D1%86%D0%B8%D0%B8","aria-label":"подготовка проекта к публикации permalink",className:"anchor before"},t.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"Подготовка проекта к публикации"),"\n",t.createElement(n.p,null,"Помимо самого кода, обязательно приложить файл README.md, содержащий описание\nтого как подключить и использовать пакет."),"\n",t.createElement(n.p,null,"Ещё надо обзавестись файлом ",t.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">package.json</code>'}}),", где хранятся основные сведения о\nпакете и прописаны его зависимости, если таковые имеются. В директории проекта\nсоздаём этот файл командой ",t.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">npm init</code>'}}),", вносим подходящее описание и консольные\nкоманды в секцию scripts (опять же если они есть):"),"\n",t.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="json"><pre class="language-json"><code class="language-json"><span class="token punctuation">{</span>\n  <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"mypackage"</span><span class="token punctuation">,</span>\n  <span class="token property">"version"</span><span class="token operator">:</span> <span class="token string">"1.0.0"</span><span class="token punctuation">,</span>\n  <span class="token property">"description"</span><span class="token operator">:</span> <span class="token string">"The best package in the world"</span><span class="token punctuation">,</span>\n  <span class="token property">"main"</span><span class="token operator">:</span> <span class="token string">"index.js"</span><span class="token punctuation">,</span>\n  <span class="token property">"scripts"</span><span class="token operator">:</span> <span class="token punctuation">{</span>\n    <span class="token property">"test"</span><span class="token operator">:</span> <span class="token string">"command for testing package"</span>\n  <span class="token punctuation">}</span><span class="token punctuation">,</span>\n  <span class="token property">"repository"</span><span class="token operator">:</span> <span class="token punctuation">{</span>\n    <span class="token property">"type"</span><span class="token operator">:</span> <span class="token string">"git"</span><span class="token punctuation">,</span>\n    <span class="token property">"url"</span><span class="token operator">:</span> <span class="token string">"git+https://github.com/myname/mypackage.git"</span>\n  <span class="token punctuation">}</span><span class="token punctuation">,</span>\n  <span class="token property">"keywords"</span><span class="token operator">:</span> <span class="token punctuation">[</span>\n    <span class="token string">"my"</span><span class="token punctuation">,</span>\n    <span class="token string">"package"</span>\n  <span class="token punctuation">]</span><span class="token punctuation">,</span>\n  <span class="token property">"author"</span><span class="token operator">:</span> <span class="token string">"me"</span><span class="token punctuation">,</span>\n  <span class="token property">"license"</span><span class="token operator">:</span> <span class="token string">"MIT"</span><span class="token punctuation">,</span>\n  <span class="token property">"bugs"</span><span class="token operator">:</span> <span class="token punctuation">{</span>\n    <span class="token property">"url"</span><span class="token operator">:</span> <span class="token string">"https://github.com/myname/mypackage/issues"</span>\n  <span class="token punctuation">}</span><span class="token punctuation">,</span>\n  <span class="token property">"homepage"</span><span class="token operator">:</span> <span class="token string">"https://github.com/myname/mypackage#readme"</span>\n<span class="token punctuation">}</span></code></pre></div>'}}),"\n",t.createElement(n.p,null,"Осталось только закоммитить изменения и выложить код на github."),"\n",t.createElement(n.h3,{id:"тестируем-пакет",style:{position:"relative"}},t.createElement(n.a,{href:"#%D1%82%D0%B5%D1%81%D1%82%D0%B8%D1%80%D1%83%D0%B5%D0%BC-%D0%BF%D0%B0%D0%BA%D0%B5%D1%82","aria-label":"тестируем пакет permalink",className:"anchor before"},t.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"Тестируем пакет"),"\n",t.createElement(n.p,null,"Всегда тестируйте работоспособность своего творения прежде, чем публиковать\nего в репозиторий npm."),"\n",t.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="shell"><pre class="language-shell"><code class="language-shell"><span class="token comment"># установка пакета из github</span>\n$ <span class="token function">npm</span> <span class="token function">install</span> mypackage\n\n<span class="token comment"># или локально с указанием пути к модулю</span>\n$ <span class="token function">npm</span> <span class="token function">install</span> path_to_mypackage/mypackage</code></pre></div>'}}),"\n",t.createElement(n.h3,{id:"публикация",style:{position:"relative"}},t.createElement(n.a,{href:"#%D0%BF%D1%83%D0%B1%D0%BB%D0%B8%D0%BA%D0%B0%D1%86%D0%B8%D1%8F","aria-label":"публикация permalink",className:"anchor before"},t.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"Публикация"),"\n",t.createElement(n.p,null,"Находясь в директории проекта, скомандуйте ",t.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">npm publish</code>'}}),". Вы должны увидеть\nчто-то подобное:"),"\n",t.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="shell"><pre class="language-shell"><code class="language-shell">+ mypackage@1.0.0</code></pre></div>'}}),"\n",t.createElement(n.p,null,"Теперь пакет можно найти в репозитории npm через поиск или по прямому адресу\nnpmjs.com/package/mypackage. Любой может установить его как зависимость своего\nсобственного проекта командой ",t.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">npm install mypackage --save</code>'}}),"."),"\n",t.createElement(n.p,null,"Если вы дорабатывали программу позже и пакет оказался в неактуальном состоянии,\nизмените версию в ",t.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">package.json</code>'}})," и снова опубликуйте его через ",t.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">npm publihs</code>'}}),"."),"\n",t.createElement(n.h2,{id:"es6-модули",style:{position:"relative"}},t.createElement(n.a,{href:"#es6-%D0%BC%D0%BE%D0%B4%D1%83%D0%BB%D0%B8","aria-label":"es6 модули permalink",className:"anchor before"},t.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"ES6-модули"),"\n",t.createElement(n.p,null,"Допустим, нужно использовать не commonJS, а модули ES6. Что тогда? Увы, нам не\nобойтись без транспайлера Babel.JS. Именно с его помощью будут проводиться все\nманипуляции. Ставим необходимые пакеты как зависимости нашей библиотеки."),"\n",t.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="shell"><pre class="language-shell"><code class="language-shell">$ <span class="token function">npm</span> i --save-dev babel-cli babel-core babel-preset-es2015</code></pre></div>'}}),"\n",t.createElement(n.p,null,"Также надо создать два каталога: один для исходников, другой — для\nскомпилированной версии скрипта. Это будут ",t.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">src</code>'}})," и ",t.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">lib</code>'}})," соответственно."),"\n",t.createElement(n.p,null,"Для удобства пропишите нужные команды в ",t.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">package.json</code>'}})," своего проекта."),"\n",t.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="json"><pre class="language-json"><code class="language-json"><span class="token property">"scripts"</span><span class="token operator">:</span> <span class="token punctuation">{</span>\n  <span class="token property">"compile"</span><span class="token operator">:</span> <span class="token string">"babel --presets es2015 -d lib/ src/"</span><span class="token punctuation">,</span>\n  <span class="token property">"prepublish"</span><span class="token operator">:</span> <span class="token string">"npm run compile"</span>\n<span class="token punctuation">}</span></code></pre></div>'}}),"\n",t.createElement(n.p,null,"Первая команда будет собирать файлы ",t.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">.es6</code>'}})," из исходников и\nпомещать их в ",t.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">lib/</code>'}}),". Вторая — делать то же самое без вашего участия\nпри публикации пакета в npm-репозиторий."),"\n",t.createElement(n.p,null,"Для коректной сборки нужно ещё немного магии. Создать ",t.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">.gitignore</code>'}}),", поместить туда\nкаталог сборки ",t.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">lib/</code>'}}),". В ",t.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">package.json</code>'}})," указать главный файл проекта, например:"),"\n",t.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="json"><pre class="language-json"><code class="language-json"><span class="token property">"main"</span><span class="token operator">:</span> <span class="token string">"lib/mylibrary.js"</span></code></pre></div>'}}),"\n",t.createElement(n.p,null,"Таким образом, в git находятся только исходники, а при публикации в npm будут\nсобраны и файлы, пропущенные через транспайлер."),"\n",t.createElement(n.p,null,"Для подключения модуля в конкретном проекте теперь можно установить его стандартным\nспособом и импортировать."),"\n",t.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js">$ npm i <span class="token operator">--</span>save mylibrary\n\n<span class="token comment">// подключаем</span>\n<span class="token keyword">import</span> myfile <span class="token keyword">from</span> <span class="token string">\'mylibrary\'</span><span class="token punctuation">;</span></code></pre></div>'}}))}var p=function(e){void 0===e&&(e={});const{wrapper:n}=Object.assign({},(0,s.MN)(),e.components);return n?t.createElement(n,e,t.createElement(l,e)):l(e)},c=a(7792),o=a(7619);function r(e){var n,a;let{data:{mdx:s},children:l,pageContext:{prev:p,next:r}}=e;const{h1:i,title:g,description:u,image:m,table_of_contents:h}=s.frontmatter;return(0,t.useEffect)((()=>{(0,o.K)()}),[]),t.createElement(t.Fragment,null,t.createElement(c._W,{h1:i,title:g,description:u,image:null===(n=s.frontmatter.image)||void 0===n?void 0:n.publicURL},t.createElement(c.MV,{post:s.frontmatter,imageData:null==m||null===(a=m.childImageSharp)||void 0===a?void 0:a.gatsbyImageData},h?t.createElement(c.G8,{headings:s.tableOfContents}):null,t.createElement("div",{className:"page__content"},l,t.createElement(c.Mf,{prev:p,next:r})),t.createElement(c.QZ,null))))}function i(e){return t.createElement(r,e,t.createElement(p,e))}},8876:function(e,n,a){a.d(n,{MN:function(){return l}});var s=a(4424);const t=s.createContext({});function l(e){const n=s.useContext(t);return s.useMemo((()=>"function"==typeof e?e(n):{...n,...e}),[n,e])}}}]);