"use strict";(self.webpackChunkgatsby_blog=self.webpackChunkgatsby_blog||[]).push([[6692],{9716:function(e,n,t){t.r(n),t.d(n,{Head:function(){return s.Ss},default:function(){return p}});var a=t(8876),c=t(4424);function l(e){const n=Object.assign({p:"p",pre:"pre",code:"code",h2:"h2",a:"a",span:"span"},(0,a.MN)(),e.components);return c.createElement(c.Fragment,null,c.createElement(n.p,null,"Как насчёт динамического меню когда глубина вложенности неизвестна? Пример из жизни — сайдбар.\nПод катом реализация для React."),"\n",c.createElement(n.p,null,"Данные в качестве мока:"),"\n",c.createElement(n.pre,null,c.createElement(n.code,{className:"language-js"},"// tree.js\nconst tree = [\n  { name: 'Условия размещения' },\n  {\n    name: 'Кто может размещать объявления',\n    children: [\n      { name: 'Какие категории существуют?' },\n      {\n        name: 'Как добавить свое объявление',\n        children: [\n          {\n            name: 'Через личный кабинет',\n            children: [\n              { name: 'Вот так добавь' }\n            ],\n          },\n          { name: 'Через менеджера' }\n        ]\n      },\n    ]\n  },\n  {\n    name: 'Сколько стоит размещение объявления',\n    children: [\n      { name: 'Частным лицам' },\n      { name: 'Организациям' },\n    ]\n  }\n]\n\nexport default tree\n")),"\n",c.createElement(n.h2,{id:"react",style:{position:"relative"}},c.createElement(n.a,{href:"#react","aria-label":"react permalink",className:"anchor before"},c.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"React"),"\n",c.createElement(n.p,null,"Создать новый проект."),"\n",c.createElement(n.pre,null,c.createElement(n.code,{className:"language-shell"},"$ npx create-react-app new-project\n$ cd new-project\n$ npm run start\n")),"\n",c.createElement(n.p,null,"Структура проекта:"),"\n",c.createElement(n.pre,null,c.createElement(n.code,null,".\n├── src\n│   ├── App.js\n│   ├── App.css\n│   ├── components\n│   │   └── RecursiveComponent.js\n│   ├── index.js\n│   └── tree.js\n└── public\n")),"\n",c.createElement(n.p,null,c.createElement(n.code,null,"App")," - точка входа. Здесь будет жить рекурсивный компонент.\nИмпортируем файл мока, прогоняем с использованием компонента."),"\n",c.createElement(n.pre,null,c.createElement(n.code,{className:"language-jsx"},"// App.js\nimport './App.css'\nimport tree from './tree'\nimport RecursiveComponent from './components/RecursiveComponent'\n\nfunction App() {\n  return (\n    <div className=\"sidebar\">\n      <ul className=\"sidebar-list\">\n        {tree.map(item => (\n          <RecursiveComponent key={`${item.name}`} {...item} />\n        ))}\n      </ul>\n    </div>\n  )\n}\n\nexport default App\n")),"\n",c.createElement(n.p,null,"Внутри компонента отобразить имена элементов первого уровня. Проверить наличие вложенных\nуровней и, если они есть, вернуть ",c.createElement("code",null,"RecursiveComponent")," снова,\nпередав ему новый список (рекурсия в действии)."),"\n",c.createElement(n.p,null,"Для того, чтобы раскрывать и закрывать активный список по нажатию на кнопку\nзаданы динамические стили ",c.createElement(n.code,null,"style")," и ",c.createElement(n.code,null,"childStyle"),". Состояние хранится в ",c.createElement(n.code,null,"active")," и меняестя\nпо клику. Для отслеживания вложенности введена переменная ",c.createElement(n.code,null,"depth"),", увеличивающая своё\nзначение с каждым новым шагом."),"\n",c.createElement(n.pre,null,c.createElement(n.code,{className:"language-jsx"},"// RecursiveComponent.js\nimport { useState } from 'react'\n\nconst RecursiveComponent = ({ name, children, depth = 1 }) => {\n  const [active, setActive] = useState(false)\n  const style = { marginLeft: 10 + (depth * 5 + 5) }\n  const childStyle = { display: depth && active ? 'block' : 'none' }\n  const onClick = () => setActive(!active)\n\n  return (\n    <li className={`parent parent-${depth}`} style={style}>\n      <button className=\"button\" onClick={onClick}>\n        <span>{name}</span>\n      </button>\n\n      {Array.isArray(children) ? (\n        <ul className=\"child\" style={childStyle}>\n          {children.map(item => (\n            <RecursiveComponent key={item.name} depth={depth + 1} {...item} />\n          ))}\n        </ul>\n      ) : null}\n    </li>\n  )\n}\n\nexport default RecursiveComponent\n")),"\n",c.createElement(n.p,null,"Напоследок простенькая стилизация:"),"\n",c.createElement(n.pre,null,c.createElement(n.code,{className:"language-css"},".sidebar {\n  max-width: 500px;\n  margin: 10px auto;\n}\n\nul {\n  list-style: none;\n  margin: 0;\n  padding-left: 0;\n}\n\nli {\n  padding: 10px;\n  border-left: 1px solid gainsboro;\n  text-align: left;\n}\n\n.button {\n  background-color: #28bd8b;\n  border: 1px solid #28bd8b;\n  outline: none;\n  font-size: 14px;\n  color: white;\n  font-weight: bold;\n  padding: 7px 20px;\n  transition: background-color .5s ease;\n}\n")),"\n",c.createElement(n.p,null,"Таков итог."),"\n",c.createElement(n.span,{dangerouslySetInnerHTML:{__html:'<span\n      class="gatsby-resp-image-wrapper"\n      style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1042px; flex:1;"\n    >\n      <span\n    class="gatsby-resp-image-background-image"\n    style="padding-bottom: 87.00000000000001%; position: relative; bottom: 0; left: 0; display: block;"\n  ></span>\n  <picture>\n          <source\n              srcset="/static/b70665c3854183a58bc4cb7a7a20cefa/e93cc/recursion.webp 300w,\n/static/b70665c3854183a58bc4cb7a7a20cefa/b0544/recursion.webp 600w,\n/static/b70665c3854183a58bc4cb7a7a20cefa/70feb/recursion.webp 1042w"\n              sizes="(max-width: 1042px) 100vw, 1042px"\n              type="image/webp"\n            />\n          <source\n            srcset="/static/b70665c3854183a58bc4cb7a7a20cefa/73b64/recursion.jpg 300w,\n/static/b70665c3854183a58bc4cb7a7a20cefa/3ad8d/recursion.jpg 600w,\n/static/b70665c3854183a58bc4cb7a7a20cefa/da17f/recursion.jpg 1042w"\n            sizes="(max-width: 1042px) 100vw, 1042px"\n            type="image/jpeg"\n          />\n          <img\n            class="gatsby-resp-image-image"\n            src="/static/b70665c3854183a58bc4cb7a7a20cefa/da17f/recursion.jpg"\n            alt="Recursion"\n            title=""\n            loading="lazy"\n            decoding="async"\n            style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;"\n          />\n        </picture>\n    </span>'}}))}var r=function(e){void 0===e&&(e={});const{wrapper:n}=Object.assign({},(0,a.MN)(),e.components);return n?c.createElement(n,e,c.createElement(l,e)):l(e)},s=t(7792),i=t(7619);function o(e){var n,t;let{data:{mdx:a},children:l,pageContext:{prev:r,next:o}}=e;const{h1:p,title:m,description:u,image:d,table_of_contents:b}=a.frontmatter;return(0,c.useEffect)((()=>{(0,i.K)()}),[]),c.createElement(c.Fragment,null,c.createElement(s._W,{h1:p,title:m,description:u,image:null===(n=a.frontmatter.image)||void 0===n?void 0:n.publicURL},c.createElement(s.MV,{post:a.frontmatter,imageData:null==d||null===(t=d.childImageSharp)||void 0===t?void 0:t.gatsbyImageData},b?c.createElement(s.G8,{headings:a.tableOfContents}):null,c.createElement("div",{className:"page__content"},l,c.createElement(s.Mf,{prev:r,next:o})),c.createElement(s.QZ,null))))}function p(e){return c.createElement(o,e,c.createElement(r,e))}},8876:function(e,n,t){t.d(n,{MN:function(){return l}});var a=t(4424);const c=a.createContext({});function l(e){const n=a.useContext(c);return a.useMemo((()=>"function"==typeof e?e(n):{...n,...e}),[n,e])}}}]);