"use strict";(self.webpackChunkgatsby_blog=self.webpackChunkgatsby_blog||[]).push([[7348],{2148:function(n,e,a){a.r(e),a.d(e,{Head:function(){return o.Ss},default:function(){return i}});var s=a(8876),t=a(4424);function l(n){const e=Object.assign({p:"p",span:"span",h2:"h2",a:"a",ul:"ul",li:"li"},(0,s.MN)(),n.components);return t.createElement(t.Fragment,null,t.createElement(e.p,null,'Трудно приходится линуксоидам, не имеющим DE, а\nсидящим исключительно на WM — всё, что в полноценном Desktop\nEnvironment ( окружении рабочего стола или как это лучше обозначить\nна великом и могучем? ) поставляется и работает "из коробки" в WM нужно\nподбирать и настраивать. Вот и автором сего поста ранее были использованы\nэлементы xfce для таких вещей как управление питанием, регулировка громкости\nзвука и яркости экрана. Но вступило что-то в голову: ведь в моей системе всегда\nустановлены acpi и laptop-mode-tools, так почему бы не обучить их выполнять их\nже непосредственные обязанности: делать всё то, для чего раньше нужны были\nxfce4-volumed и xfce4-power-manager?'),"\n",t.createElement(e.p,null,"Для обучения нам понадобятся пакеты ",t.createElement(e.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">laptop-mode-tools</code>'}}),", ",t.createElement(e.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">acpi</code>'}}),",\n",t.createElement(e.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">acpid</code>'}}),". Acpid должен быть запущен."),"\n",t.createElement(e.h2,{id:"уровень-яркости-экрана",style:{position:"relative"}},t.createElement(e.a,{href:"#%D1%83%D1%80%D0%BE%D0%B2%D0%B5%D0%BD%D1%8C-%D1%8F%D1%80%D0%BA%D0%BE%D1%81%D1%82%D0%B8-%D1%8D%D0%BA%D1%80%D0%B0%D0%BD%D0%B0","aria-label":"уровень яркости экрана permalink",className:"anchor before"},t.createElement(e.span,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"Уровень яркости экрана"),"\n",t.createElement(e.p,null,"Дописать в ",t.createElement(e.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">/etc/default/grub</code>'}})," строки:"),"\n",t.createElement(e.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash"><span class="token assign-left variable">GRUB_CMDLINE_LINUX_DEFAULT</span><span class="token operator">=</span><span class="token string">"acpi_backlight=vendor resume=/dev/sda5"</span></code></pre></div>'}}),"\n",t.createElement(e.p,null,"Лезем в acpi. Создайте файлы со следующим содержанием."),"\n",t.createElement(e.p,null,"Для увеличения яркости:"),"\n",t.createElement(e.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash"><span class="token comment"># /etc/acpi/actions/bl_up.sh</span>\n\n<span class="token comment">#!/bin/sh</span>\n<span class="token assign-left variable">bl_device</span><span class="token operator">=</span>/sys/class/backlight/intel_backlight/brightness\n<span class="token builtin class-name">echo</span> <span class="token variable"><span class="token variable">$((</span>$<span class="token punctuation">(</span>cat $bl_device<span class="token punctuation">)</span><span class="token operator">+</span><span class="token number">200</span><span class="token variable">))</span></span> <span class="token operator">></span><span class="token variable">$bl_device</span></code></pre></div>'}}),"\n",t.createElement(e.p,null,"Для уменьшения яркости:"),"\n",t.createElement(e.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash"><span class="token comment"># /etc/acpi/actions/bl_down.sh:</span>\n\n<span class="token comment">#!/bin/sh</span>\n<span class="token assign-left variable">bl_device</span><span class="token operator">=</span>/sys/class/backlight/intel_backlight/brightness\n<span class="token builtin class-name">echo</span> <span class="token variable"><span class="token variable">$((</span>$<span class="token punctuation">(</span>cat $bl_device<span class="token punctuation">)</span><span class="token operator">-</span><span class="token number">200</span><span class="token variable">))</span></span> <span class="token operator">></span><span class="token variable">$bl_device</span></code></pre></div>'}}),"\n",t.createElement(e.p,null,"В ",t.createElement(e.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">bl_device</code>'}})," замените ",t.createElement(e.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">inel_backlight</code>'}})," на своё значение в\nзависимости от используемой видеокарты. Также стоит выяснить\nустраивающее вас значение, на основе которого будет увеличиваться или уменьшаться\nяркость экрана. У автора это значение = 200."),"\n",t.createElement(e.p,null,"Как найти подходящее значение?\nПосмотрите какая цифра стоит сейчас. Если вы ничего ещё не настраивали, она должна отражать максимально допустимое значение:"),"\n",t.createElement(e.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="shell"><pre class="language-shell"><code class="language-shell"><span class="token comment"># cat  /sys/class/backlight/intel_backlight/brightness</span>\n<span class="token number">4882</span></code></pre></div>'}}),"\n",t.createElement(e.p,null,"Теперь поиграйте со значениями, чтобы выбрать нужный шаг:"),"\n",t.createElement(e.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="shell"><pre class="language-shell"><code class="language-shell"><span class="token comment"># echo 1000 > /sys/class/backlight/intel_backlight/brightness</span>\n<span class="token comment"># echo 1010 > /sys/class/backlight/intel_backlight/brightness</span>\n<span class="token comment"># echo 1100 > /sys/class/backlight/intel_backlight/brightness</span></code></pre></div>'}}),"\n",t.createElement(e.p,null,"Посмотрите как будет изменяться яркость экрана при разных значениях, если при добавлении 10 единиц вы практически не чувствуете разницы, добавьте ещё 50-100 единиц. Какой шаг покажется оптимальным, тот и оставьте."),"\n",t.createElement(e.p,null,"Теперь укажем acpi использовать наши скрипты:"),"\n",t.createElement(e.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash"><span class="token comment"># /etc/acpi/events/bl_up</span>\n<span class="token comment">#</span>\n<span class="token assign-left variable">event</span><span class="token operator">=</span>video<span class="token punctuation">[</span> /<span class="token punctuation">]</span>brightnessup\n<span class="token assign-left variable">action</span><span class="token operator">=</span>/etc/acpi/actions/bl_up.sh\n\n<span class="token comment"># /etc/acpi/events/bl_down</span>\n<span class="token comment">#</span>\n<span class="token assign-left variable">event</span><span class="token operator">=</span>video<span class="token punctuation">[</span> /<span class="token punctuation">]</span>brightnessdown\n<span class="token assign-left variable">action</span><span class="token operator">=</span>/etc/acpi/actions/bl_down.sh</code></pre></div>'}}),"\n",t.createElement(e.p,null,"и сделаем эти скрипты исполняемыми:"),"\n",t.createElement(e.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="shell"><pre class="language-shell"><code class="language-shell"><span class="token comment"># chmod +x /etc/acpi/actions/{bl_up.sh,bl_down.sh}</span></code></pre></div>'}}),"\n",t.createElement(e.p,null,"Чтобы автоматически подбирать яркость при работе от аккумулятора или же сети, установим laptop-mode-tools:"),"\n",t.createElement(e.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="shell"><pre class="language-shell"><code class="language-shell"><span class="token comment"># pacman -S laptop-mode-tools</span></code></pre></div>'}}),"\n",t.createElement(e.p,null,"и немного изменим его настройки:"),"\n",t.createElement(e.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash"><span class="token comment"># /etc/laptop-mode/conf.d/lcd-brightness.conf</span>\n<span class="token comment">#</span>\n<span class="token assign-left variable">CONTROL_BRIGHTNESS</span><span class="token operator">=</span><span class="token number">1</span>\n<span class="token comment"># Commands to execute to set the brightness on your LCD</span>\n<span class="token comment">#</span>\n<span class="token comment">#BATT_BRIGHTNESS_COMMAND="echo [value]"</span>\n<span class="token assign-left variable">BATT_BRIGHTNESS_COMMAND</span><span class="token operator">=</span><span class="token string">"echo 700"</span>\n<span class="token assign-left variable">LM_AC_BRIGHTNESS_COMMAND</span><span class="token operator">=</span><span class="token string">"echo 2000"</span>\n<span class="token assign-left variable">NOLM_AC_BRIGHTNESS_COMMAND</span><span class="token operator">=</span><span class="token string">"echo 3000"</span>\n<span class="token assign-left variable">BRIGHTNESS_OUTPUT</span><span class="token operator">=</span><span class="token string">"/sys/class/backlight/intel_backlight/brightness"</span></code></pre></div>'}}),"\n",t.createElement(e.p,null,"Разумеется, значения ",t.createElement(e.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">700/2000/3000</code>'}})," и путь ",t.createElement(e.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">/sys/class/backlight/intel_backlight/brightness</code>'}})," должны быть заменены на ваши значения."),"\n",t.createElement(e.h2,{id:"автогибернация-при-критическом-уровне-заряда-батареи",style:{position:"relative"}},t.createElement(e.a,{href:"#%D0%B0%D0%B2%D1%82%D0%BE%D0%B3%D0%B8%D0%B1%D0%B5%D1%80%D0%BD%D0%B0%D1%86%D0%B8%D1%8F-%D0%BF%D1%80%D0%B8-%D0%BA%D1%80%D0%B8%D1%82%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%BE%D0%BC-%D1%83%D1%80%D0%BE%D0%B2%D0%BD%D0%B5-%D0%B7%D0%B0%D1%80%D1%8F%D0%B4%D0%B0-%D0%B1%D0%B0%D1%82%D0%B0%D1%80%D0%B5%D0%B8","aria-label":"автогибернация при критическом уровне заряда батареи permalink",className:"anchor before"},t.createElement(e.span,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"Автогибернация при критическом уровне заряда батареи"),"\n",t.createElement(e.p,null,"Достаточно часто бывает такое, что при работе от батареи забываешь посматривать на уровень её заряда, в результате чего получаешь отключение машины при полной разрядке батареи. Внезапное - как хлопок - выключение и все несохранённые данные потеряны. Обидно, не правда ли? Поэтому неплохо было бы позаботиться о своевременных мерах предосторожности."),"\n",t.createElement(e.p,null,"Для этих целей также будем использовать функционал laptop-mode."),"\n",t.createElement(e.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash"><span class="token comment"># /etc/laptop-mode/conf.d/auto-hibernate.conf:</span>\n<span class="token comment">#</span>\n<span class="token assign-left variable">ENABLE_AUTO_HIBERNATION</span><span class="token operator">=</span><span class="token number">1</span>\n<span class="token comment">#</span>\n<span class="token comment"># The hibernation command that is to be executed when auto-hibernation</span>\n<span class="token comment"># is triggered.</span>\n<span class="token comment">#</span>\n<span class="token assign-left variable">HIBERNATE_COMMAND</span><span class="token operator">=</span>/usr/share/laptop-mode-tools/module-helpers/pm-hibernate\n<span class="token comment">#</span>\n<span class="token comment"># Auto-hibernation battery level threshold, in percentage of the battery\'s</span>\n<span class="token comment"># total capacity.</span>\n<span class="token comment">#</span>\n<span class="token assign-left variable">AUTO_HIBERNATION_BATTERY_CHARGE_PERCENT</span><span class="token operator">=</span><span class="token number">4</span>\n<span class="token comment">#</span>\n<span class="token comment"># Enable this to auto-hibernate if the battery reports that its level is</span>\n<span class="token comment"># "critical".</span>\n<span class="token comment">#</span>\n<span class="token assign-left variable">AUTO_HIBERNATION_ON_CRITICAL_BATTERY_LEVEL</span><span class="token operator">=</span><span class="token number">1</span></code></pre></div>'}}),"\n",t.createElement(e.p,null,"Если вас не устраивают значения по умолчанию, вы также можете изменить их.\nВ случае, если до этого момента у вас не был указан раздел swap, укажите его в grub2, эти настройки уже были даны выше:"),"\n",t.createElement(e.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash"><span class="token comment"># /etc/default/grub</span>\n<span class="token comment">#</span>\n<span class="token assign-left variable">GRUB_CMDLINE_LINUX_DEFAULT</span><span class="token operator">=</span><span class="token string">"acpi_backlight=vendor resume=/dev/sda5"</span></code></pre></div>'}}),"\n",t.createElement(e.p,null,"где ",t.createElement(e.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">/dev/sda5</code>'}})," - ваш swap-раздел\nКроме того, в случае с archlinux следует добавить хук suspend в  ",t.createElement(e.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">/etc/mkinitcpio.conf</code>'}}),":"),"\n",t.createElement(e.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash"><span class="token assign-left variable">HOOKS</span><span class="token operator">=</span><span class="token string">"base udev autodetect modconf block filesystems usbinput fsck resume"</span></code></pre></div>'}}),"\n",t.createElement(e.p,null,"и пересобрать initrd:"),"\n",t.createElement(e.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="shell"><pre class="language-shell"><code class="language-shell"><span class="token comment"># mkinitcpio -p linux</span></code></pre></div>'}}),"\n",t.createElement(e.h2,{id:"регулировка-звука",style:{position:"relative"}},t.createElement(e.a,{href:"#%D1%80%D0%B5%D0%B3%D1%83%D0%BB%D0%B8%D1%80%D0%BE%D0%B2%D0%BA%D0%B0-%D0%B7%D0%B2%D1%83%D0%BA%D0%B0","aria-label":"регулировка звука permalink",className:"anchor before"},t.createElement(e.span,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"Регулировка звука"),"\n",t.createElement(e.p,null,"Для этого снова обратимся к скриптам acpi, как и в случае с управлением яркостью дисплея."),"\n",t.createElement(e.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash"><span class="token comment"># /etc/acpi/actions/volume_up.sh</span>\n<span class="token comment">#</span>\n<span class="token comment">#!/bin/bash</span>\n/usr/bin/amixer <span class="token builtin class-name">set</span> Master <span class="token number">5</span>%+\n\n<span class="token comment"># /etc/acpi/actions/volume_down.sh</span>\n<span class="token comment">#</span>\n<span class="token comment">#!/bin/bash</span>\n/usr/bin/amixer <span class="token builtin class-name">set</span> Master <span class="token number">5</span>%-\n\n<span class="token comment"># /etc/acpi/events/volume_up</span>\n<span class="token comment">#</span>\n<span class="token assign-left variable">event</span><span class="token operator">=</span>button<span class="token punctuation">[</span> /<span class="token punctuation">]</span>volumeup\n<span class="token assign-left variable">action</span><span class="token operator">=</span>/etc/acpi/actions/volume_up.sh\n\n<span class="token comment"># /etc/acpi/events/volume_down</span>\n<span class="token comment">#</span>\n<span class="token assign-left variable">event</span><span class="token operator">=</span>button<span class="token punctuation">[</span> /<span class="token punctuation">]</span>volumedown\n<span class="token assign-left variable">action</span><span class="token operator">=</span>/etc/acpi/actions/volume_down.sh</code></pre></div>'}}),"\n",t.createElement(e.p,null,"Делаем скрипты в actions исполняемыми:"),"\n",t.createElement(e.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="shell"><pre class="language-shell"><code class="language-shell"><span class="token comment"># chmod +x /etc/acpi/actions/{volume_up.sh,volume_down.sh}</span></code></pre></div>'}}),"\n",t.createElement(e.p,null,"Для корректного распознавания мультимедийных клавиш, лучше использовать утилиту ",t.createElement(e.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">xmodmap</code>'}}),"."),"\n",t.createElement(e.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">$ xmodmap <span class="token parameter variable">-pke</span> <span class="token operator">></span> ~/.xmodmap\n$ <span class="token function">vim</span> .xinitrc:\nxmodmap ~/.xmodmap</code></pre></div>'}}),"\n",t.createElement(e.h2,{id:"acpi-и-события-клавиш",style:{position:"relative"}},t.createElement(e.a,{href:"#acpi-%D0%B8-%D1%81%D0%BE%D0%B1%D1%8B%D1%82%D0%B8%D1%8F-%D0%BA%D0%BB%D0%B0%D0%B2%D0%B8%D1%88","aria-label":"acpi и события клавиш permalink",className:"anchor before"},t.createElement(e.span,{dangerouslySetInnerHTML:{__html:'<svg aria-hidden="true" focusable="false" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg>'}})),"Acpi и события клавиш"),"\n",t.createElement(e.p,null,"Честно говоря, меня устраивает поведение по-умолчанию, поэтому с пристрастием\nэтот вопрос не рассматривался. При закрытии крышки ноутбука машина переходит\nв режим гибернации. При нажатии кнопки питания - корректно отключает систему. Оно и хорошо."),"\n",t.createElement(e.p,null,"Похоже, управление этими событиями тоже берёт на себя laptop-mode-tools\n( только пока неясно, в каком модуле/скрипте лежат эти настройки),\nпоскольку в ",t.createElement(e.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">/etc/acpi/handler.sh</code>'}})," каких-либо действий на события не назначено."),"\n",t.createElement(e.p,null,"Но таки рассмотрим как настраивать то или иное событие."),"\n",t.createElement(e.p,null,"Ответственен за эти шаманские действа вышеупомянутый ",t.createElement(e.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">handler.sh</code>'}}),"\n(или ",t.createElement(e.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">default.sh</code>'}})," в зависимости от используемого дистрибутива), где и прописываются\nнастройки. В случае, если вам хочется использовать не команду, а скрипт, расположите\nего в отдельном файле, подобно тому, как выше настраивалось управление яркостью\nдисплея и уровнем громкости ."),"\n",t.createElement(e.p,null,"Пример из дефолта:"),"\n",t.createElement(e.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">button/lid<span class="token punctuation">)</span>\n  <span class="token keyword">case</span> <span class="token string">"<span class="token variable">$3</span>"</span> <span class="token keyword">in</span>\n    close<span class="token punctuation">)</span>\n      logger <span class="token string">\'LID closed\'</span>\n      <span class="token punctuation">;</span><span class="token punctuation">;</span>\n    <span class="token function">open</span><span class="token punctuation">)</span>\n      logger <span class="token string">\'LID opened\'</span>\n      <span class="token punctuation">;</span><span class="token punctuation">;</span>\n    *<span class="token punctuation">)</span>\n      logger <span class="token string">"ACPI action undefined: <span class="token variable">$3</span>"</span>\n      <span class="token punctuation">;</span><span class="token punctuation">;</span>\n  <span class="token keyword">esac</span>\n  <span class="token punctuation">;</span><span class="token punctuation">;</span></code></pre></div>'}}),"\n",t.createElement(e.p,null,t.createElement(e.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">button/lid</code>'}})," указывает на управление закрытием/открытием крышки ноутбука,\nпока здесь нет ничего интересного."),"\n",t.createElement(e.p,null,"Пример с воспроизведением звукового файла при закрытии/открытии крышки ноутбука:"),"\n",t.createElement(e.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">button/lid<span class="token punctuation">)</span>\n  <span class="token keyword">case</span> <span class="token string">"<span class="token variable">$3</span>"</span> <span class="token keyword">in</span>\n    close<span class="token punctuation">)</span>\n      logger <span class="token string">\'LID closed\'</span>\n      aplay /home/redvi/.scripts/message.wav\n      <span class="token punctuation">;</span><span class="token punctuation">;</span>\n    <span class="token function">open</span><span class="token punctuation">)</span>\n      logger <span class="token string">\'LID opened\'</span>\n      aplay /home/redvi/.scripts/message.wav\n      <span class="token punctuation">;</span><span class="token punctuation">;</span>\n    *<span class="token punctuation">)</span>\n      logger <span class="token string">"ACPI action undefined: <span class="token variable">$3</span>"</span>\n      <span class="token punctuation">;</span><span class="token punctuation">;</span>\n  <span class="token keyword">esac</span>\n  <span class="token punctuation">;</span><span class="token punctuation">;</span></code></pre></div>'}}),"\n",t.createElement(e.p,null,"То есть для настройки события нужно добавить его команду в соответствующее\nполе ( здесь после ",t.createElement(e.span,{dangerouslySetInnerHTML:{__html:"<code class=\"language-text\">logger 'LID closed'</code>"}}),"). Так, действие при открытии крышки\nнужно будет вписать после ",t.createElement(e.span,{dangerouslySetInnerHTML:{__html:"<code class=\"language-text\">logger 'LID opened'</code>"}}),"."),"\n",t.createElement(e.ul,null,"\n",t.createElement(e.li,null,t.createElement(e.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">button/power</code>'}})," — события, связанные с кнопкой управления питанием"),"\n",t.createElement(e.li,null,t.createElement(e.span,{dangerouslySetInnerHTML:{__html:"<code class=\"language-text\">logger 'PowerButton pressed'</code>"}})," — когда клавиша нажата"),"\n",t.createElement(e.li,null,t.createElement(e.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">button/sleep</code>'}})," — сон, если подобная кнопка/клавиша имеется"),"\n",t.createElement(e.li,null,t.createElement(e.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">ac_adapter</code>'}})," — события, связанные с подключением/отключением адаптера питания"),"\n",t.createElement(e.li,null,t.createElement(e.span,{dangerouslySetInnerHTML:{__html:"<code class=\"language-text\">logger 'AC unpluged'</code>"}})," — когда адаптер отключен"),"\n",t.createElement(e.li,null,t.createElement(e.span,{dangerouslySetInnerHTML:{__html:"<code class=\"language-text\">logger 'AC pluged'</code>"}})," — когда адаптер подключен"),"\n",t.createElement(e.li,null,t.createElement(e.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">battery</code>'}})," — батарея ноутбука"),"\n",t.createElement(e.li,null,t.createElement(e.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">button/lid</code>'}})," — крышка ноутбука"),"\n"),"\n",t.createElement(e.p,null,"Для перевода в ждущий/спящий режимы можно использовать скрипты\n",t.createElement(e.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">laptop-mode-tools</code>'}})," из ",t.createElement(e.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">/usr/share/laptop-mode-tools/module-helpers</code>'}}),":  ",t.createElement(e.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">pm-hibernate</code>'}})," и  ",t.createElement(e.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">pm-suspend</code>'}}),"."),"\n",t.createElement(e.p,null,"Для выключения питания при закрытии крышки достаточно добавить\nв ",t.createElement(e.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">/etc/acpi/actions/lm_lid.sh</code>'}})," строку:"),"\n",t.createElement(e.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash"><span class="token punctuation">[</span> <span class="token string">"<span class="token variable">$3</span>"</span> <span class="token operator">=</span> <span class="token string">"close"</span> <span class="token punctuation">]</span> <span class="token operator">&amp;&amp;</span> poweroff</code></pre></div>'}}),"\n",t.createElement(e.p,null,"Помимо всего вышеописанного мы можем контролировать парковку головок жёсткого диска.\nДабы отключить парковку совсем пропишите в ",t.createElement(e.span,{dangerouslySetInnerHTML:{__html:'<code class="language-text">/etc/laptop-mode/laptop-mode.conf</code>'}}),":"),"\n",t.createElement(e.span,{dangerouslySetInnerHTML:{__html:'<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash"><span class="token assign-left variable">BATT_HD_POWERMGMT</span><span class="token operator">=</span><span class="token number">254</span>\n<span class="token assign-left variable">LM_AC_HD_POWERMGMT</span><span class="token operator">=</span><span class="token number">254</span>\n<span class="token assign-left variable">NOLM_AC_HD_POWERMGMT</span><span class="token operator">=</span><span class="token number">254</span></code></pre></div>'}}),"\n",t.createElement(e.p,null,"Пожалуй, на этом стоит остановиться и дать читателю возможность самостоятельно\nпоэкспериментировать с настройками энергосбережения и событий acpi."))}var c=function(n){void 0===n&&(n={});const{wrapper:e}=Object.assign({},(0,s.MN)(),n.components);return e?t.createElement(e,n,t.createElement(l,n)):l(n)},o=a(7792),p=a(7619);function r(n){var e,a;let{data:{mdx:s},children:l,pageContext:{prev:c,next:r}}=n;const{h1:i,title:g,description:u,image:m,table_of_contents:d}=s.frontmatter;return(0,t.useEffect)((()=>{(0,p.K)()}),[]),t.createElement(t.Fragment,null,t.createElement(o._W,{h1:i,title:g,description:u,image:null===(e=s.frontmatter.image)||void 0===e?void 0:e.publicURL},t.createElement(o.MV,{post:s.frontmatter,imageData:null==m||null===(a=m.childImageSharp)||void 0===a?void 0:a.gatsbyImageData},d?t.createElement(o.G8,{headings:s.tableOfContents}):null,t.createElement("div",{className:"page__content"},l,t.createElement(o.Mf,{prev:c,next:r})),t.createElement(o.QZ,null))))}function i(n){return t.createElement(r,n,t.createElement(c,n))}},8876:function(n,e,a){a.d(e,{MN:function(){return l}});var s=a(4424);const t=s.createContext({});function l(n){const e=s.useContext(t);return s.useMemo((()=>"function"==typeof n?n(e):{...e,...n}),[e,n])}}}]);